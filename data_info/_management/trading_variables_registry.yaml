# ═══════════════════════════════════════════════════════════════
# 🌟 Trading Variables 마스터 레지스트리
# ═══════════════════════════════════════════════════════════════
# 목적: 200+ 거래 변수 (지표, 가격, 상태 등)의 중앙 관리 및 분류
# 구조: 카테고리별 변수 분류 및 메타데이터 관리
# 작성일: 2025-08-15
# ═══════════════════════════════════════════════════════════════

metadata:
  version: "3.0.0"
  last_updated: "2025-08-15"
  total_variables: 28  # 모든 변수 포함
  target_variables: 200+  # 최종 목표
  structure_version: "distributed_by_variable"
  description: "거래 변수별 완전 분리 관리 시스템"

# ═══════════════════════════════════════════════════════════════
# 📊 거래 변수 카테고리 정의
# ═══════════════════════════════════════════════════════════════
categories:
  trend:
    name_ko: "추세 지표"
    name_en: "Trend Indicators"
    description: "가격의 방향성과 추세를 분석하는 지표들"
    color_theme: "#4CAF50"  # 녹색

  momentum:
    name_ko: "모멘텀 지표"
    name_en: "Momentum Indicators"
    description: "가격 변화의 속도와 강도를 측정하는 지표들"
    color_theme: "#2196F3"  # 파란색

  volume:
    name_ko: "거래량 지표"
    name_en: "Volume Indicators"
    description: "거래량과 가격의 관계를 분석하는 지표들"
    color_theme: "#FF9800"  # 주황색

  volatility:
    name_ko: "변동성 지표"
    name_en: "Volatility Indicators"
    description: "가격 변동성과 리스크를 측정하는 지표들"
    color_theme: "#9C27B0"  # 보라색

  price:
    name_ko: "가격 변수"
    name_en: "Price Variables"
    description: "현재가, 시가, 고가, 저가 등 기본 가격 정보"
    color_theme: "#F44336"  # 빨간색

  capital:
    name_ko: "자본 변수"
    name_en: "Capital Variables"
    description: "현금 잔고, 코인 보유량, 총 자산 등"
    color_theme: "#795548"  # 갈색

  state:
    name_ko: "상태 변수"
    name_en: "State Variables"
    description: "현재 수익률, 포지션 크기, 평균 매수가 등"
    color_theme: "#009688"  # 청록색

  meta:
    name_ko: "메타 변수"
    name_en: "Meta Variables"
    description: "동적 관리 및 전략 실행 변수들"
    color_theme: "#607D8B"  # 회색

# ═══════════════════════════════════════════════════════════════
# 📋 거래 변수 상세 등록부
# ═══════════════════════════════════════════════════════════════
trading_variables:
  # ────────────────────────────────────────────────────────────
  # 📈 추세 지표 (Trend Indicators)
  # ────────────────────────────────────────────────────────────
  SMA:
    category: "trend"
    folder_path: "trading_variables/trend/sma"
    display_name_ko: "단순이동평균"
    display_name_en: "Simple Moving Average"
    short_name: "SMA"
    complexity: "basic"      # basic, intermediate, advanced
    popularity: "very_high"  # very_high, high, medium, low
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "sma_calculator"

  EMA:
    category: "trend"
    folder_path: "trading_variables/trend/ema"
    display_name_ko: "지수이동평균"
    display_name_en: "Exponential Moving Average"
    short_name: "EMA"
    complexity: "basic"
    popularity: "very_high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "ema_calculator"

  BOLLINGER_BAND:
    category: "trend"
    folder_path: "trading_variables/trend/bollinger_bands"
    display_name_ko: "볼린저밴드"
    display_name_en: "Bollinger Bands"
    short_name: "BB"
    complexity: "intermediate"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "bollinger_calculator"

  # ────────────────────────────────────────────────────────────
  # 🔥 모멘텀 지표 (Momentum Indicators)
  # ────────────────────────────────────────────────────────────
  RSI:
    category: "momentum"
    folder_path: "trading_variables/momentum/rsi"
    display_name_ko: "RSI 지표"
    display_name_en: "Relative Strength Index"
    short_name: "RSI"
    complexity: "basic"
    popularity: "very_high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "rsi_calculator"

  MACD:
    category: "momentum"
    folder_path: "trading_variables/momentum/macd"
    display_name_ko: "MACD"
    display_name_en: "Moving Average Convergence Divergence"
    short_name: "MACD"
    complexity: "intermediate"
    popularity: "very_high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "macd_calculator"

  STOCHASTIC:
    category: "momentum"
    folder_path: "trading_variables/momentum/stochastic"
    display_name_ko: "스토캐스틱"
    display_name_en: "Stochastic Oscillator"
    short_name: "STOCH"
    complexity: "intermediate"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "stochastic_calculator"

  # ────────────────────────────────────────────────────────────
  # 📊 거래량 지표 (Volume Indicators)
  # ────────────────────────────────────────────────────────────
  VOLUME_SMA:
    category: "volume"
    folder_path: "trading_variables/volume/volume_sma"
    display_name_ko: "거래량 이동평균"
    display_name_en: "Volume Simple Moving Average"
    short_name: "VolSMA"
    complexity: "basic"
    popularity: "medium"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "volume_sma_calculator"

  ATR:
    category: "volatility"
    folder_path: "trading_variables/volume/atr"
    display_name_ko: "평균 진폭"
    display_name_en: "Average True Range"
    short_name: "ATR"
    complexity: "intermediate"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "atr_calculator"

  # ────────────────────────────────────────────────────────────
  # 💰 가격 변수 (Price Variables)
  # ────────────────────────────────────────────────────────────
  CURRENT_PRICE:
    category: "price"
    folder_path: "trading_variables/price/current_price"
    display_name_ko: "현재가"
    display_name_en: "Current Price"
    short_name: "Current"
    complexity: "basic"
    popularity: "very_high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "current_price_calculator"

  OPEN_PRICE:
    category: "price"
    folder_path: "trading_variables/price/open_price"
    display_name_ko: "시가"
    display_name_en: "Open Price"
    short_name: "Open"
    complexity: "basic"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "open_price_calculator"

  HIGH_PRICE:
    category: "price"
    folder_path: "trading_variables/price/high_price"
    display_name_ko: "고가"
    display_name_en: "High Price"
    short_name: "High"
    complexity: "basic"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "high_price_calculator"

  LOW_PRICE:
    category: "price"
    folder_path: "trading_variables/price/low_price"
    display_name_ko: "저가"
    display_name_en: "Low Price"
    short_name: "Low"
    complexity: "basic"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "low_price_calculator"

  # ────────────────────────────────────────────────────────────
  # 💼 자본 변수 (Capital Variables)
  # ────────────────────────────────────────────────────────────
  CASH_BALANCE:
    category: "capital"
    folder_path: "trading_variables/capital/cash_balance"
    display_name_ko: "현금 잔고"
    display_name_en: "Cash Balance"
    short_name: "Cash"
    complexity: "basic"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "cash_balance_calculator"

  TOTAL_BALANCE:
    category: "capital"
    folder_path: "trading_variables/capital/total_balance"
    display_name_ko: "총 자산"
    display_name_en: "Total Balance"
    short_name: "Total"
    complexity: "basic"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "total_balance_calculator"

  # ────────────────────────────────────────────────────────────
  # 📊 상태 변수 (State Variables)
  # ────────────────────────────────────────────────────────────
  PROFIT_PERCENT:
    category: "state"
    folder_path: "trading_variables/state/profit_percent"
    display_name_ko: "수익률"
    display_name_en: "Profit Percentage"
    short_name: "Profit%"
    complexity: "basic"
    popularity: "very_high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "profit_percent_calculator"

  AVG_BUY_PRICE:
    category: "state"
    folder_path: "trading_variables/state/avg_buy_price"
    display_name_ko: "평균 매수가"
    display_name_en: "Average Buy Price"
    short_name: "AvgBuy"
    complexity: "basic"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "avg_buy_price_calculator"

  # ────────────────────────────────────────────────────────────
  # 🎯 메타 변수 (Meta Variables)
  # ────────────────────────────────────────────────────────────
  META_TRAILING_STOP:
    category: "meta"
    folder_path: "trading_variables/meta/trailing_stop"
    display_name_ko: "트레일링 스탑"
    display_name_en: "Trailing Stop"
    short_name: "TrailStop"
    complexity: "advanced"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "trailing_stop_calculator"

  META_PYRAMID_TARGET:
    category: "meta"
    folder_path: "trading_variables/meta/pyramid_target"
    display_name_ko: "피라미딩 목표"
    display_name_en: "Pyramid Target"
    short_name: "Pyramid"
    complexity: "advanced"
    popularity: "medium"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "pyramid_calculator"  # 추가로 생성된 변수들
  BOLLINGER_BAND:
    category: "volatility"
    folder_path: "trading_variables/volatility/bollinger_band"
    display_name_ko: "볼린저밴드"
    display_name_en: "Bollinger Bands"
    short_name: "BB"
    complexity: "intermediate"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "bollinger_calculator"

  VOLUME:
    category: "volume"
    folder_path: "trading_variables/volume/volume"
    display_name_ko: "거래량"
    display_name_en: "Volume"
    short_name: "Vol"
    complexity: "basic"
    popularity: "very_high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "volume_calculator"

  COIN_BALANCE:
    category: "capital"
    folder_path: "trading_variables/capital/coin_balance"
    display_name_ko: "코인 보유량"
    display_name_en: "Coin Balance"
    short_name: "CoinBal"
    complexity: "basic"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "coin_balance_calculator"

  PROFIT_AMOUNT:
    category: "state"
    folder_path: "trading_variables/state/profit_amount"
    display_name_ko: "수익 금액"
    display_name_en: "Profit Amount"
    short_name: "ProfitAmt"
    complexity: "basic"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "profit_amount_calculator"

  POSITION_SIZE:
    category: "state"
    folder_path: "trading_variables/state/position_size"
    display_name_ko: "포지션 크기"
    display_name_en: "Position Size"
    short_name: "PosSize"
    complexity: "basic"
    popularity: "high"
    files:
      - definition.yaml
      - parameters.yaml
      - help_guide.yaml
      - help_texts.yaml
      - placeholders.yaml
    calculator_module: "position_size_calculator"# ═══════════════════════════════════════════════════════════════
# 🔧 파일 구조 템플릿
# ═══════════════════════════════════════════════════════════════
file_templates:
  definition:
    description: "tv_trading_variables 테이블 대응"
    required_fields:
      - variable_id
      - display_name_ko
      - display_name_en
      - description
      - purpose_category
      - chart_category
      - comparison_group
      - parameter_required
      - is_active
      - source

  parameters:
    description: "tv_variable_parameters 테이블 대응"
    structure: "parameter_name 별로 세부 설정"
    required_fields:
      - parameter_name
      - parameter_type
      - default_value
      - is_required
      - display_name_ko
      - display_name_en
      - description
      - display_order

  help_guide:
    description: "tv_variable_help_documents 테이블 대응"
    sections:
      - concept
      - parameter_guides
      - examples
      - additional_notes

  help_texts:
    description: "tv_help_texts 테이블 대응 (간단한 툴팁)"
    structure: "parameter별 help_text_ko, tooltip_ko"

  placeholders:
    description: "tv_placeholder_texts 테이블 대응"
    structure: "parameter별 placeholder_text_ko"

# ═══════════════════════════════════════════════════════════════
# 🚀 향후 확장 계획
# ═══════════════════════════════════════════════════════════════
expansion_roadmap:
  phase_1:
    description: "핵심 변수 20개 구현"
    target_date: "2025-08-20"
    variables: ["SMA", "EMA", "RSI", "MACD", "BOLLINGER_BAND", "CURRENT_PRICE", "PROFIT_PERCENT"]

  phase_2:
    description: "중급 변수 50개 추가"
    target_date: "2025-08-30"
    new_categories: ["support_resistance", "candlestick_patterns", "order_flow"]

  phase_3:
    description: "고급 변수 및 사용자 정의"
    target_date: "2025-09-15"
    features: ["custom_variables", "variable_combinations", "complex_calculators"]

  phase_4:
    description: "200+ 전체 변수 완성"
    target_date: "2025-10-31"
    target_count: 200

# ═══════════════════════════════════════════════════════════════
# 🛠️ 도구 및 스크립트
# ═══════════════════════════════════════════════════════════════
management_tools:
  generator:
    script: "_management/generate_trading_variable_structure.py"
    description: "새 거래 변수 폴더 구조 자동 생성"

  validator:
    script: "_management/validate_trading_variable_structure.py"
    description: "거래 변수별 파일 구조 검증"

  merger:
    script: "_management/merge_trading_variables_to_db.py"
    description: "모든 거래 변수 데이터를 DB로 통합"

  migrator:
    script: "_management/migrate_from_legacy.py"
    description: "기존 YAML에서 새 구조로 마이그레이션"
