variable_id: EMA
help_documents:
  concept:
    title: EMA (Exponential Moving Average) 개념과 정의
    content: |
      ## 지수이동평균의 기본 개념

      EMA(Exponential Moving Average)는 최근 가격에 더 큰 가중치를 부여하는 이동평균으로,
      SMA보다 가격 변화에 민감하게 반응합니다. 트렌드의 전환점을 빠르게 포착하고
      지연성을 최소화하여 실시간 매매 신호에 적합한 지표입니다.

      ### 기술적 정의

      EMA는 다음 공식으로 계산됩니다:
      ```
      EMA(오늘) = (오늘 가격 × 승수) + (어제 EMA × (1 - 승수))
      승수 = 2 / (기간 + 1)

      예: 12일 EMA 승수 = 2 / (12 + 1) = 0.1538
      ```

      ### 변수 메타데이터

      - **Purpose Category**: trend
      - **Chart Category**: overlay
      - **Comparison Group**: price_comparable
      - **단위**: KRW (원화 기준)
      - **일반적 기간**: 12일, 26일, 50일, 200일

      ### SMA 대비 EMA의 특성

      **반응성**: EMA는 최근 가격 변화에 더 빠르게 반응합니다.
      **지연성**: SMA보다 지연성이 적어 트렌드 전환을 빠르게 감지합니다.
      **노이즈**: 민감성으로 인해 잦은 신호 발생 가능성이 있습니다.

      ### 시간 프레임별 활용

      - **단기 EMA (5-12일)**: 단기 트렌드 및 진입 타이밍
      - **중기 EMA (20-50일)**: 중기 추세 확인 및 필터링
      - **장기 EMA (100-200일)**: 장기 트렌드 방향 및 주요 지지/저항

      ### 수학적 특성

      EMA는 과거 모든 가격 데이터를 반영하지만, 시간이 지날수록 영향도가 지수적으로 감소합니다.
      이론적으로는 무한대까지 과거 데이터를 포함하지만, 실제로는 기간의 3-4배 정도의
      과거 데이터가 95% 이상의 영향을 미칩니다.
  usage:
    title: 트리거 빌더에서 EMA 실전 활용법
    content: |
      ## 트리거 빌더 조건 설정 방법

      ### 기본 트렌드 추종 조건

      ```
      조건 1: CURRENT_PRICE > EMA_12  # 단기 상승 추세
      조건 2: EMA_12 > EMA_26  # 골든 크로스 상태 유지
      조건 3: EMA_50 > EMA_200  # 장기 상승 추세
      ```

      ### 다중 EMA 전략 구현

      **골든/데드 크로스 전략:**
      ```
      골든 크로스 매수:
      - EMA_12 > EMA_26  # 단기선이 중기선 상향 돌파
      - EMA_12[1] <= EMA_26[1]  # 이전 봉에서는 하위
      - VOLUME > VOLUME_SMA(20) * 1.2  # 거래량 증가 확인

      데드 크로스 매도:
      - EMA_12 < EMA_26  # 단기선이 중기선 하향 돌파
      - PROFIT_PERCENT > 2  # 최소 수익 확보시
      ```

      **3중 EMA 필터 시스템:**
      ```
      강세 진입 조건:
      - EMA_12 > EMA_26 > EMA_50  # 3중 정배열
      - CURRENT_PRICE > EMA_12 * 1.005  # 단기선 위 1% 상회
      - RSI > 50  # 모멘텀 확인

      약세 진입 조건:
      - EMA_12 < EMA_26 < EMA_50  # 3중 역배열
      - CURRENT_PRICE < EMA_12 * 0.995  # 단기선 아래 1% 하회
      ```

      ### 동적 지지/저항선 활용

      **EMA 기반 지지/저항:**
      ```
      동적 지지선:
      - CURRENT_PRICE 접근시: EMA_20 ± ATR * 0.5
      - 터치 매수: CURRENT_PRICE <= EMA_20 * 0.998
      - 이탈 손절: CURRENT_PRICE < EMA_20 * 0.995

      동적 저항선:
      - 상승 중 저항: EMA_50이 현재가 위에 위치
      - 돌파 매수: CURRENT_PRICE > EMA_50 * 1.002
      ```

      ### 리볼버 전략 (EMA 되돌림 매매)

      **상승 추세 중 되돌림 매수:**
      ```
      트렌드 확인:
      - EMA_20 > EMA_50 (중기 상승 추세)
      - EMA_50 기울기 > 0 (상승 기울기 유지)

      되돌림 매수:
      - CURRENT_PRICE가 EMA_20에 터치 후 반등
      - RSI < 40 (일시적 과매도)
      - MACD > 0 (주 추세는 여전히 상승)
      ```

      ### 트레일링 스톱 구현

      **EMA 기반 동적 손절:**
      ```
      트레일링 손절선:
      - 롱 포지션: EMA_12 - ATR * 1.5
      - 최소 수익률 3% 달성 후 활성화
      - 손절선은 상승만 가능 (하락 금지)

      구현 조건:
      IF PROFIT_PERCENT > 3 THEN
         새로운_손절가 = MAX(기존_손절가, EMA_12 - ATR * 1.5)
      ```

      ### 시간대별 EMA 전략

      **다중 시간 프레임:**
      ```
      상위 시간대 필터 (1시간봉):
      - 1H_EMA_20 > 1H_EMA_50 (상위 추세 상승)

      하위 시간대 진입 (15분봉):
      - 15M_CURRENT_PRICE > 15M_EMA_12
      - 15M_EMA_12 > 15M_EMA_26
      - 15M_RSI > 50
      ```
  advanced:
    title: EMA 고급 수학적 분석과 최적화
    content: |
      ## 고급 EMA 수학적 모델링

      ### 적응형 EMA (Adaptive EMA)

      시장 변동성에 따라 승수를 동적으로 조정하는 고급 기법:
      ```
      변동성 지수 = ATR / CURRENT_PRICE
      적응형 승수 = 기본승수 * (1 + 변동성지수)

      고변동성시: 더 민감하게 반응 (승수 증가)
      저변동성시: 더 안정적으로 반응 (승수 감소)

      AEMA = (CURRENT_PRICE × 적응형승수) + (이전AEMA × (1 - 적응형승수))
      ```

      ### EMA의 편미분과 기울기 분석

      **1차 미분 (속도):**
      ```
      EMA 기울기 = (EMA[0] - EMA[1]) / EMA[1]

      기울기 분석:
      기울기 > 0.001: 상승 가속 구간
      기울기 < -0.001: 하락 가속 구간
      |기울기| < 0.0005: 횡보 구간
      ```

      **2차 미분 (가속도):**
      ```
      EMA 가속도 = 오늘기울기 - 어제기울기

      변곡점 감지:
      가속도 > 0: 상승 모멘텀 증가
      가속도 < 0: 상승 모멘텀 감소
      가속도 부호 변화: 트렌드 전환점 후보
      ```

      ### 다중 시간 프레임 EMA 융합

      **시간가중 EMA 합성:**
      ```
      융합 EMA = (1분봉_EMA × 0.1) + (5분봉_EMA × 0.2) +
                 (15분봉_EMA × 0.3) + (1시간봉_EMA × 0.4)

      가중치 조정:
      단기 거래: 1분봉 가중치 증가
      장기 거래: 1시간봉 가중치 증가
      ```

      ### 볼륨 가중 EMA (VEMA)

      **거래량을 고려한 EMA:**
      ```
      VEMA = Σ(가격 × 거래량 × 지수가중치) / Σ(거래량 × 지수가중치)

      효과:
      - 고거래량 구간의 가격에 더 큰 영향
      - 저거래량 허위 신호 필터링
      - 기관 거래 영향 반영
      ```

      ### EMA 기반 시그널 필터링

      **노이즈 제거 알고리즘:**
      ```
      신호 확정 조건:
      1. EMA 크로스 발생
      2. 연속 3캔들 동안 크로스 상태 유지
      3. 크로스 지점에서 최소 0.5% 이격
      4. 거래량이 평균의 120% 이상

      거짓 신호 판별:
      크로스 후 2캔들 내 재역전시 신호 취소
      ```

      ### 기관투자자 수준의 EMA 활용

      **포트폴리오 레벨 EMA 관리:**
      ```
      포트폴리오 EMA = Σ(종목별_시가총액비중 × 종목별_EMA)

      리밸런싱 신호:
      개별 종목 EMA가 포트폴리오 EMA 대비 ±10% 이격시
      비중 조정 또는 종목 교체 검토
      ```

      ### 옵션 시장 연계 EMA 전략

      **델타 헤지 EMA:**
      ```
      EMA 기반 델타 계산:
      동적 델타 = EMA 기울기 × 변동성 계수

      헤지 비율 조정:
      EMA 상승 가속시: 델타 헤지 비율 감소 (상승 익스포저 증가)
      EMA 하락 가속시: 델타 헤지 비율 증가 (하락 보호 강화)
      ```

      ### 백테스팅 최적화 기법

      **Walk-Forward EMA 최적화:**
      ```
      최적화 프로세스:
      1. 6개월 데이터로 최적 EMA 기간 탐색 (5-200일)
      2. 다음 1개월 아웃오브샘플 테스트
      3. 샤프비율 기준 최적 기간 선택
      4. 매월 롤링 업데이트

      동적 기간 조정:
      변동성 높은 시장: 단기 EMA (5-15일)
      변동성 낮은 시장: 장기 EMA (20-50일)
      ```

      ### 리스크 관리 고도화

      **EMA 기반 VaR 모델:**
      ```
      EMA 변동성 = √(EMA(수익률²) - EMA(수익률)²)
      EMA VaR = 포지션크기 × EMA변동성 × 1.65 × √거래일

      동적 포지션 사이징:
      허용 손실 / EMA VaR = 최대 포지션 비중
      ```

      ### 머신러닝과 EMA 결합

      **LSTM 기반 EMA 예측:**
      ```
      입력 변수: 과거 20일 EMA 값들
      출력 변수: 다음날 EMA 예측값

      신호 생성:
      예측 EMA > 현재 EMA × 1.002 → 매수 신호
      예측 EMA < 현재 EMA × 0.998 → 매도 신호
      ```

      ### 극한 상황 EMA 분석

      **블랙 스완 이벤트 대응:**
      ```
      급변 감지:
      |EMA[0] - EMA[1]| / EMA[1] > 0.05 (일일 5% 이상 변화)

      비상 모드 진입:
      - 모든 EMA 신호 일시 중단
      - 단순 가격 기반 손절만 활성화
      - 시장 정상화까지 신규 진입 금지
      ```

      ### 성과 측정 지표

      **EMA 전략 특화 메트릭:**
      ```
      EMA 효율성 = 실제수익 / EMA이론수익
      트렌드 포착률 = 주요 트렌드 중 EMA 신호 비율
      지연성 지수 = 평균 신호 지연 시간 / 캔들 주기
      ```

      ### 주의사항

      - EMA는 후행 지표로 트렌드 확인 용도에 적합
      - 횡보장에서는 잦은 허위 신호 발생 가능
      - 단일 EMA보다는 다중 EMA 조합 활용 권장
      - 거래량과 함께 종합 판단 필요
