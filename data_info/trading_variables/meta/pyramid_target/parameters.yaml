# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ¯ META_PYRAMID_TARGET (í”¼ë¼ë¯¸ë”©) - ë§¤ê°œë³€ìˆ˜ ì •ì˜
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ëŒ€ì‘ í…Œì´ë¸”: tv_variable_parameters
# ì§€í‘œ ID: META_PYRAMID_TARGET
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ë§¤ê°œë³€ìˆ˜ ëª©ë¡
parameters:
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # ğŸ“Š ê³„ì‚° ë°©ì‹ (Calculation Method) - í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  calculation_method:
    # ê¸°ë³¸ ì •ë³´
    parameter_name: "calculation_method"
    parameter_type: "enum"
    default_value: "entry_price_percent"
    is_required: true

    # ì„ íƒ ì˜µì…˜
    enum_values:
      - "average_price_percent"      # í‰ë‹¨ê°’ í¼ì„¼íŠ¸í¬ì¸íŠ¸ (%p) - í‰ë‹¨ê°€ ê¸°ì¤€
      - "entry_price_percent"        # ì§„ì…ê°’ í¼ì„¼íŠ¸í¬ì¸íŠ¸ (%p) - ì§„ì…ê°€ ê¸°ì¤€
      - "static_value_offset"        # ì •ì ì°¨ì´ (ì›í™”/ìˆ˜ì¹˜) - ì ˆëŒ€ê°’ ì°¨ì´
      - "percentage_of_tracked"      # ê·¹ê°’ ë¹„ìœ¨í¼ì„¼íŠ¸ (%) - ìµœê³ /ìµœì €ì  ëŒ€ë¹„

    # í‘œì‹œ ì •ë³´
    display_name_ko: "ê³„ì‚° ë°©ì‹"
    display_name_en: "Calculation Method"
    description: "í”¼ë¼ë¯¸ë”© ê³„ì‚° ë°©ì‹ (í‰ë‹¨ê°€%p/ì§„ì…ê°€%p/ì •ì ì°¨ì´/ê·¹ê°’ë¹„ìœ¨%)"
    display_order: 1

    # UI ë§¤í•‘ (í•œêµ­ì–´ í‘œì‹œìš©)
    display_mapping:
      "average_price_percent": "í‰ë‹¨ê°’ í¼ì„¼íŠ¸í¬ì¸íŠ¸ (%p)"
      "entry_price_percent": "ì§„ì…ê°’ í¼ì„¼íŠ¸í¬ì¸íŠ¸ (%p)"
      "static_value_offset": "ì •ì ì°¨ì´ (ì›í™”/ìˆ˜ì¹˜)"
      "percentage_of_tracked": "ê·¹ê°’ ë¹„ìœ¨í¼ì„¼íŠ¸ (%)"

    # ì¶”ê°€ ì†ì„±
    validation_rules:
      - "must_be_valid_enum_value"

    recommended_values:
      conservative: ["entry_price_percent"]
      aggressive: ["percentage_of_tracked", "average_price_percent"]

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # ğŸ’° ê³„ì‚°ê°’ (Value) - í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  value:
    # ê¸°ë³¸ ì •ë³´
    parameter_name: "value"
    parameter_type: "decimal"
    default_value: "3.0"
    is_required: true

    # ì œì•½ ì¡°ê±´
    min_value: "-50.0"
    max_value: "50.0"

    # í‘œì‹œ ì •ë³´
    display_name_ko: "ê³„ì‚°ê°’"
    display_name_en: "Value"
    description: "ê³„ì‚°ì— ì‚¬ìš©ë  ê°’ (í¼ì„¼íŠ¸: 3.0=3%, ì›í™”: 1000=1000ì›)"
    display_order: 2

    # ì¶”ê°€ ì†ì„±
    validation_rules:
      - "must_be_decimal"
      - "within_range_minus50_to_50"

    recommended_values:
      conservative: [5.0, 7.0, 10.0]
      moderate: [3.0, 5.0, 7.0]
      aggressive: [1.0, 2.0, 3.0]

    context_specific:
      crypto:
        popular: [3.0, 5.0, 7.0]
        scalping: [1.0, 2.0, 3.0]
      stocks:
        popular: [5.0, 7.0, 10.0]
        swing: [3.0, 5.0, 7.0]

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # ğŸ¯ ì¶”ì  ë°©í–¥ (Trail Direction) - í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  trail_direction:
    # ê¸°ë³¸ ì •ë³´
    parameter_name: "trail_direction"
    parameter_type: "enum"
    default_value: "up"
    is_required: true

    # ì„ íƒ ì˜µì…˜
    enum_values:
      - "up"      # ìƒí–¥ ì¶”ì  (ë¶ˆíƒ€ê¸° - ìƒìŠ¹ì‹œ ì¶”ê°€ ë§¤ìˆ˜)
      - "down"    # í•˜í–¥ ì¶”ì  (ë¬¼íƒ€ê¸° - í•˜ë½ì‹œ ì¶”ê°€ ë§¤ìˆ˜)

    # í‘œì‹œ ì •ë³´
    display_name_ko: "ì¶”ì  ë°©í–¥"
    display_name_en: "Trail Direction"
    description: "í”¼ë¼ë¯¸ë”© ë°©í–¥ (UP: ë¶ˆíƒ€ê¸°, DOWN: ë¬¼íƒ€ê¸°)"
    display_order: 3

    # UI ë§¤í•‘ (í•œêµ­ì–´ í‘œì‹œìš©)
    display_mapping:
      "up": "ìƒí–¥ ì¶”ì  (ë¶ˆíƒ€ê¸°)"
      "down": "í•˜í–¥ ì¶”ì  (ë¬¼íƒ€ê¸°)"

    # ì¶”ê°€ ì†ì„±
    validation_rules:
      - "must_be_valid_enum_value"

    recommended_combinations:
      bullish_strategy:
        direction: ["up"]
        description: "ìƒìŠ¹ ì „ëµì—ëŠ” ë¶ˆíƒ€ê¸° ê¶Œì¥"
      bearish_strategy:
        direction: ["down"]
        description: "í•˜ë½ ëŒ€ì‘ì—ëŠ” ë¬¼íƒ€ê¸° ê¶Œì¥"

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # ğŸ”¢ ìµœëŒ€ íšŸìˆ˜ (Max Count) - í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜ (í”¼ë¼ë¯¸ë”© ì „ìš©)
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  max_count:
    # ê¸°ë³¸ ì •ë³´
    parameter_name: "max_count"
    parameter_type: "integer"
    default_value: "3"
    is_required: true

    # ì œì•½ ì¡°ê±´
    min_value: "1"
    max_value: "10"

    # í‘œì‹œ ì •ë³´
    display_name_ko: "ìµœëŒ€ íšŸìˆ˜"
    display_name_en: "Max Count"
    description: "ìµœëŒ€ í”¼ë¼ë¯¸ë”© íšŸìˆ˜ (1-10íšŒ, ë¦¬ìŠ¤í¬ ê´€ë¦¬)"
    display_order: 4

    # ì¶”ê°€ ì†ì„±
    validation_rules:
      - "must_be_positive_integer"
      - "within_range_1_to_10"

    recommended_values:
      conservative: [2, 3]
      moderate: [3, 4, 5]
      aggressive: [5, 7, 10]

    risk_specific:
      low_risk: [1, 2]
      medium_risk: [3, 4, 5]
      high_risk: [7, 10]

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“ ë§¤ê°œë³€ìˆ˜ ì¡°í•© ê·œì¹™
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
parameter_validation:
  # ì¡°í•© ê·œì¹™
  combination_rules:
    - name: "value_direction_consistency"
      description: "ê°’ê³¼ ë°©í–¥ì˜ ì¼ê´€ì„± í™•ì¸"
      rule: "if trail_direction == 'up' then value should be positive for pyramid buying"

    - name: "count_value_balance"
      description: "íšŸìˆ˜ì™€ ê°’ì˜ ê· í˜• í™•ì¸"
      rule: "if max_count > 5 then abs(value) >= 3 for sufficient spacing"

  # ê²½ê³  ì¡°ê±´
  warnings:
    - condition: "max_count > 5 and abs(value) < 2"
      message: "ë†’ì€ íšŸìˆ˜ì— ì‘ì€ ê°’ì€ ê³¼ë„í•œ í¬ì§€ì…˜ ì¦ê°€ ìœ„í—˜"

    - condition: "abs(value) > 15"
      message: "ë„ˆë¬´ í° ê°’ì€ í”¼ë¼ë¯¸ë”© ê¸°íšŒë¥¼ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"

    - condition: "max_count == 1"
      message: "1íšŒ ì„¤ì •ì€ í”¼ë¼ë¯¸ë”© íš¨ê³¼ê°€ ì œí•œì ì…ë‹ˆë‹¤"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ¨ UI í‘œì‹œ ì„¤ì •
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ui_settings:
  parameter_layout: "vertical"  # vertical, horizontal, grid

  calculation_method:
    widget_type: "combobox"
    group_separator: true
    groups:
      basic: ["entry_price_percent", "percentage_of_tracked"]
      advanced: ["average_price_percent", "static_value_offset"]

  value:
    widget_type: "spinbox"
    step_size: 0.5
    decimal_places: 1
    quick_buttons: [1.0, 3.0, 5.0, 7.0, 10.0]

  trail_direction:
    widget_type: "radiobutton"
    layout: "horizontal"
    icons:
      up: "ğŸ“ˆ"
      down: "ğŸ“‰"

  max_count:
    widget_type: "spinbox"
    step_size: 1
    quick_buttons: [2, 3, 4, 5]
