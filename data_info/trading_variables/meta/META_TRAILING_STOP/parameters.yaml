# β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•
# π― META_TRAILING_STOP (νΈλ μΌλ§ μ¤νƒ‘) - λ§¤κ°λ³€μ μ •μ
# β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•
# λ€μ‘ ν…μ΄λΈ”: tv_variable_parameters
# μ§€ν‘ ID: META_TRAILING_STOP
# β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•

# λ§¤κ°λ³€μ λ©λ΅
parameters:
  # β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
  # π“ κ³„μ‚° λ°©μ‹ (Calculation Method) - ν•„μ λ§¤κ°λ³€μ
  # β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
  calculation_method:
    # κΈ°λ³Έ μ •λ³΄
    parameter_name: "calculation_method"
    parameter_type: "enum"
    default_value: "percentage_of_tracked"
    is_required: true

    # μ„ νƒ μµμ…
    enum_values:
      - "average_price_percent"      # ν‰λ‹¨κ°’ νΌμ„ΌνΈν¬μΈνΈ (%p) - ν‰λ‹¨κ°€ κΈ°μ¤€
      - "entry_price_percent"        # μ§„μ…κ°’ νΌμ„ΌνΈν¬μΈνΈ (%p) - μ§„μ…κ°€ κΈ°μ¤€
      - "static_value_offset"        # μ •μ μ°¨μ΄ (μ›ν™”/μμΉ) - μ λ€κ°’ μ°¨μ΄
      - "percentage_of_tracked"      # κ·Ήκ°’ λΉ„μ¨νΌμ„ΌνΈ (%) - μµκ³ /μµμ €μ  λ€λΉ„

    # ν‘μ‹ μ •λ³΄
    display_name_ko: "κ³„μ‚° λ°©μ‹"
    display_name_en: "Calculation Method"
    description: "νΈλ μΌλ§ μ¤νƒ‘ κ³„μ‚° λ°©μ‹ (ν‰λ‹¨κ°€%p/μ§„μ…κ°€%p/μ •μ μ°¨μ΄/κ·Ήκ°’λΉ„μ¨%)"
    display_order: 1

    # UI λ§¤ν•‘ (ν•κµ­μ–΄ ν‘μ‹μ©)
    display_mapping:
      "average_price_percent": "ν‰λ‹¨κ°’ νΌμ„ΌνΈν¬μΈνΈ (%p)"
      "entry_price_percent": "μ§„μ…κ°’ νΌμ„ΌνΈν¬μΈνΈ (%p)"
      "static_value_offset": "μ •μ μ°¨μ΄ (μ›ν™”/μμΉ)"
      "percentage_of_tracked": "κ·Ήκ°’ λΉ„μ¨νΌμ„ΌνΈ (%)"

    # μ¶”κ°€ μ†μ„±
    validation_rules:
      - "must_be_valid_enum_value"

    recommended_values:
      conservative: ["percentage_of_tracked"]
      aggressive: ["entry_price_percent", "average_price_percent"]

  # β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
  # π’° κ³„μ‚°κ°’ (Value) - ν•„μ λ§¤κ°λ³€μ
  # β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
  value:
    # κΈ°λ³Έ μ •λ³΄
    parameter_name: "value"
    parameter_type: "decimal"
    default_value: "-2.0"
    is_required: true

    # μ μ•½ μ΅°κ±΄
    min_value: "-50.0"
    max_value: "50.0"

    # ν‘μ‹ μ •λ³΄
    display_name_ko: "κ³„μ‚°κ°’"
    display_name_en: "Value"
    description: "κ³„μ‚°μ— μ‚¬μ©λ  κ°’ (νΌμ„ΌνΈ: -2.0=-2%, μ›ν™”: 1000=1000μ›)"
    display_order: 2

    # μ¶”κ°€ μ†μ„±
    validation_rules:
      - "must_be_decimal"
      - "within_range_minus50_to_50"

    recommended_values:
      conservative: [-1.0, -2.0, -3.0]
      moderate: [-3.0, -5.0, -7.0]
      aggressive: [-7.0, -10.0, -15.0]

    context_specific:
      crypto:
        popular: [-2.0, -3.0, -5.0]
        scalping: [-0.5, -1.0, -1.5]
      stocks:
        popular: [-3.0, -5.0, -7.0]
        swing: [-5.0, -7.0, -10.0]

  # β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
  # π― μ¶”μ  λ°©ν–¥ (Trail Direction) - ν•„μ λ§¤κ°λ³€μ
  # β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
  trail_direction:
    # κΈ°λ³Έ μ •λ³΄
    parameter_name: "trail_direction"
    parameter_type: "enum"
    default_value: "up"
    is_required: true

    # μ„ νƒ μµμ…
    enum_values:
      - "up"      # μƒν–¥ μ¶”μ  (κ³ μ  μ¶”μ , ν•λ½ μ‹ μ‹ νΈ)
      - "down"    # ν•ν–¥ μ¶”μ  (μ €μ  μ¶”μ , μƒμΉ μ‹ μ‹ νΈ)

    # ν‘μ‹ μ •λ³΄
    display_name_ko: "μ¶”μ  λ°©ν–¥"
    display_name_en: "Trail Direction"
    description: "νΈλ μΌλ§ λ°©ν–¥ (UP: κ³ μ μ¶”μ β†’ν•λ½μ‹ νΈ, DOWN: μ €μ μ¶”μ β†’μƒμΉμ‹ νΈ)"
    display_order: 3

    # UI λ§¤ν•‘ (ν•κµ­μ–΄ ν‘μ‹μ©)
    display_mapping:
      "up": "μƒν–¥ μ¶”μ  (κ³ μ  μ¶”μ )"
      "down": "ν•ν–¥ μ¶”μ  (μ €μ  μ¶”μ )"

    # μ¶”κ°€ μ†μ„±
    validation_rules:
      - "must_be_valid_enum_value"

    recommended_combinations:
      long_position:
        direction: ["up"]
        description: "λ§¤μ ν¬μ§€μ…μ—λ” μƒν–¥ μ¶”μ  κ¶μ¥"
      short_position:
        direction: ["down"]
        description: "λ§¤λ„ ν¬μ§€μ…μ—λ” ν•ν–¥ μ¶”μ  κ¶μ¥"

# β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
# π“ λ§¤κ°λ³€μ μ΅°ν•© κ·μΉ™
# β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
parameter_validation:
  # μ΅°ν•© κ·μΉ™
  combination_rules:
    - name: "value_direction_consistency"
      description: "κ°’κ³Ό λ°©ν–¥μ μΌκ΄€μ„± ν™•μΈ"
      rule: "if trail_direction == 'up' then value should be negative for stop loss"

    - name: "calculation_method_value_range"
      description: "κ³„μ‚° λ°©μ‹μ— λ”°λ¥Έ κ°’ λ²”μ„ κ²€μ¦"
      rule: "if calculation_method in ['percentage_of_tracked', 'average_price_percent', 'entry_price_percent'] then abs(value) <= 50"

  # κ²½κ³  μ΅°κ±΄
  warnings:
    - condition: "abs(value) < 0.5"
      message: "λ„λ¬΄ μ‘μ€ κ°’μ€ λΉλ²ν• μ‹ νΈλ¥Ό λ°μƒμ‹ν‚¬ μ μμµλ‹λ‹¤"

    - condition: "abs(value) > 20"
      message: "λ„λ¬΄ ν° κ°’μ€ νΈλ μΌλ§ ν¨κ³Όκ°€ μ ν•λ  μ μμµλ‹λ‹¤"

    - condition: "calculation_method == 'static_value_offset' and abs(value) < 100"
      message: "μ •μ μ°¨μ΄ λ¨λ“μ—μ„λ” μ¶©λ¶„ν ν° κ°’μ„ κ¶μ¥ν•©λ‹λ‹¤"

# β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
# π¨ UI ν‘μ‹ μ„¤μ •
# β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
ui_settings:
  parameter_layout: "vertical"  # vertical, horizontal, grid

  calculation_method:
    widget_type: "combobox"
    group_separator: true
    groups:
      basic: ["percentage_of_tracked", "entry_price_percent"]
      advanced: ["average_price_percent", "static_value_offset"]

  value:
    widget_type: "spinbox"
    step_size: 0.1
    decimal_places: 1
    quick_buttons: [-1.0, -2.0, -3.0, -5.0, -10.0]

  trail_direction:
    widget_type: "radiobutton"
    layout: "horizontal"
    icons:
      up: "β¬†οΈ"
      down: "β¬‡οΈ"
