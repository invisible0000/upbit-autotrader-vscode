# ═══════════════════════════════════════════════════════════════
# 🎯 트레일링 스탑 (META_TRAILING_STOP) 포괄적 헬프 가이드
# ═══════════════════════════════════════════════════════════════
# 변수 ID: META_TRAILING_STOP
# 카테고리: 동적 관리 지표 (Dynamic Management)
# 작성일: 2025-08-16
# ═══════════════════════════════════════════════════════════════

META_TRAILING_STOP:
  # ────────────────────────────────────────────────────────────
  # 📖 지표 기본 개념
  # ────────────────────────────────────────────────────────────
  concept:
    title_ko: "트레일링 스탑 (Trailing Stop)"
    title_en: "Trailing Stop"

    overview_ko: |
      트레일링 스탑은 추적 변수의 극값(최고점/최저점)을 실시간으로 기록하고,
      설정된 차이만큼 벗어나면 신호를 발생시킨 후 자동으로 비활성화되는
      동적 위험 관리 도구입니다.

      🔍 **기본 원리:**
      • 상향 추적: 최고점을 지속 갱신하며 하락 감시
      • 하향 추적: 최저점을 지속 갱신하며 상승 감시
      • 임계치 도달 시 즉시 신호 발생 후 비활성화
      • 기본 변수의 타임프레임을 따라 동작

      📊 **동작 방식:**
      상향 추적 시: tracked_high = max(tracked_high, current_value)
      조건 확인: current_value <= tracked_high - threshold
      신호 발생 → 트레일링 스탑 비활성화

    overview_en: |
      Trailing Stop is a dynamic risk management tool that tracks extremes
      (highs/lows) of monitored variables in real-time and triggers signals
      when deviation exceeds the threshold, then automatically deactivates.

    trading_applications_ko: |
      【💼 실전 활용법】

      ✅ **수익 보호 (상향 추적):**
      • 매수 포지션의 최고 수익 지점 추적
      • 설정된 %만큼 하락 시 자동 매도
      • 상승 추세 중 조정 매도로 수익 확정
      • 감정적 욕심을 배제한 기계적 익절

      ✅ **손실 제한 (하향 추적):**
      • 매도 포지션의 최저 손실 지점 추적
      • 설정된 %만큼 상승 시 자동 매수
      • 하락 추세 중 반등 매수로 손실 제한
      • 추가 손실 방지를 위한 안전장치

      ✅ **동적 청산:**
      • 고정 가격 기준이 아닌 변동 기준 적용
      • 시장 상황에 따른 유연한 대응
      • 추세 지속 시 수익 극대화
      • 추세 전환 시 신속한 보호

      ✅ **위험 관리:**
      • 최대 손실 한도 설정 및 자동 집행
      • 감정적 판단 배제한 기계적 실행
      • 포지션 규모에 관계없이 일관된 보호
      • 24시간 지속적인 모니터링

    market_context_ko: |
      【📈 시장 상황별 활용법】

      🔸 **강한 상승 추세:**
      • 극값 비율% 방식으로 고점 추적
      • 3-5% 범위에서 안정적 수익 보호
      • 과도한 조정에서 수익 확정
      • 추세 지속 시 계속 보유

      🔸 **변동성 높은 시장:**
      • 평단가%p 방식으로 안정적 기준
      • 5-7% 넓은 범위로 노이즈 필터링
      • 급락/급등에 대한 보호 강화
      • 잦은 거짓 신호 방지

      🔸 **횡보 시장:**
      • 진입가%p 방식으로 명확한 기준
      • 2-3% 좁은 범위로 민감한 반응
      • 작은 수익이라도 확실히 보호
      • 장기 횡보 구간 탈출 준비

      🔸 **급변하는 시장:**
      • 정적차이 방식으로 절대값 기준
      • 고정 금액 기준의 명확한 보호
      • 퍼센트 기준의 왜곡 방지
      • 극단적 상황에서 안정적 작동

      ⚠️ **주의사항:**
      • 신호 발생 후 즉시 비활성화 (재시작 불가)
      • 추적 변수의 정상 동작 필수
      • 과도하게 민감한 설정 시 빈번한 신호
      • 기본 변수와의 동기화 중요

  # ────────────────────────────────────────────────────────────
  # ⚙️ 매개변수 상세 가이드
  # ────────────────────────────────────────────────────────────
  parameter_guides:
    calculation_method:
      selection_guide_ko: |
        【🎯 계산 방식 선택 완전 가이드】

        📊 **극값 비율퍼센트 (percentage_of_tracked):**
        • 장점: 최고/최저점 기준으로 직관적 이해
        • 단점: 극값 갱신이 없으면 기준점 고정
        • 적합 상황: 강한 추세, 변동성 매매, 수익 보호
        • 권장 설정: 2-5% (보수적), 1-3% (공격적)

        📊 **진입값 퍼센트포인트 (entry_price_percent):**
        • 장점: 명확한 기준점, 계산 용이
        • 단점: 시간 경과시 시장가와 괴리 가능
        • 적합 상황: 단기 매매, 명확한 손익 기준
        • 권장 설정: 3-7%p (보수적), 1-3%p (공격적)

        📊 **평단값 퍼센트포인트 (average_price_percent):**
        • 장점: 추가 매수 반영, 실제 손익 기준
        • 단점: 평단가 계산 복잡성, 변동성
        • 적합 상황: 분할 매수, 장기 보유, 평균 단가 관리
        • 권장 설정: 5-10%p (보수적), 3-5%p (공격적)

        📊 **정적차이 (static_value_offset):**
        • 장점: 절대값 기준으로 명확한 보호
        • 단점: 시장 규모 변화에 둔감
        • 적합 상황: 고정 금액 보호, 극단적 변동성
        • 권장 설정: 1000-5000원 (소액), 5000-20000원 (중액)

      practical_examples_ko: |
        【💡 실전 설정 예시】

        🔹 **BTC 매수 포지션 보호:**
        • 계산방식: percentage_of_tracked (극값 비율%)
        • 값: -3.0 (최고점에서 3% 하락)
        • 방향: up (상향 추적)
        • 효과: 50,000,000원 최고점 → 48,500,000원에서 매도

        🔹 **ETH 스윙 트레이딩:**
        • 계산방식: entry_price_percent (진입가%p)
        • 값: -5.0 (진입가에서 5%p 손실)
        • 방향: up (상향 추적, 하락시 보호)
        • 효과: 3,000,000원 진입 → 2,850,000원에서 손절

        🔹 **분할 매수 전략:**
        • 계산방식: average_price_percent (평단가%p)
        • 값: -7.0 (평단가에서 7%p 손실)
        • 방향: up (상향 추적)
        • 효과: 평단가 2,500,000원 → 2,325,000원에서 전량 매도

        🔹 **고정 금액 보호:**
        • 계산방식: static_value_offset (정적차이)
        • 값: -100000 (10만원 하락)
        • 방향: up (상향 추적)
        • 효과: 현재가에서 정확히 10만원 하락시 매도

      common_mistakes_ko: |
        【⚠️ 흔한 실수와 개선 방법】

        ❌ **실수 1: 과도하게 민감한 설정**
        ✅ 개선: 시장 노이즈보다 큰 값으로 설정 (최소 1-2%)

        ❌ **실수 2: 방향 설정 착각**
        ✅ 개선: 상향 추적 = 고점 추적 후 하락 감지, 하향 추적 = 저점 추적 후 상승 감지

        ❌ **실수 3: 계산 방식과 값의 불일치**
        ✅ 개선: %p 방식은 절댓값, % 방식은 비율값 명확히 구분

        ❌ **실수 4: 재활성화 기대**
        ✅ 개선: 신호 발생 후 완전 비활성화, 새로운 트리거로 재시작 필요

        ❌ **실수 5: 추적 변수 무시**
        ✅ 개선: 기본 변수의 정상 동작 확인 후 메타변수 활용

    value:
      selection_guide_ko: |
        【💰 계산값 선택 가이드】

        🔸 **보수적 설정 (3-7%):**
        • 목적: 안정적 수익 보호, 큰 손실 방지
        • 장점: 거짓 신호 최소화, 감정적 부담 적음
        • 단점: 소액 수익 놓칠 가능성
        • 적합 대상: 초보자, 대액 투자자, 장기 투자

        🔸 **균형 설정 (2-5%):**
        • 목적: 수익성과 안정성의 균형
        • 장점: 적당한 보호와 수익 확보
        • 단점: 상황에 따른 세밀한 조정 필요
        • 적합 대상: 중급자, 스윙 트레이딩, 일반적 매매

        🔸 **공격적 설정 (1-3%):**
        • 목적: 최대 수익 추구, 빠른 손절
        • 장점: 수익 극대화, 신속한 리스크 관리
        • 단점: 빈번한 신호, 거래 비용 증가
        • 적합 대상: 숙련자, 단기 매매, 소액 투자

      practical_examples_ko: |
        【📊 값 설정 실전 예시】

        ⚡ **스칼핑 (-0.5% ~ -1.5%):**
        - 목적: 빠른 소액 수익 확정
        - 리스크: 과도한 거래 빈도
        - 권장: 거래 비용 대비 수익성 검토 필수

        🎯 **데이 트레이딩 (-2% ~ -4%):**
        - 목적: 하루 내 수익 보호
        - 적용: 변동성에 따른 유연한 조정
        - 권장: 시장 상황별 다른 값 적용

        📈 **스윙 트레이딩 (-3% ~ -7%):**
        - 목적: 중기 추세 중 조정 보호
        - 균형: 노이즈 필터링과 수익 보호
        - 권장: 변동성 주기 고려한 설정

        📊 **포지션 트레이딩 (-5% ~ -15%):**
        - 목적: 장기 추세 중 대조정 보호
        - 장점: 안정적 장기 보유
        - 권장: 자산별 특성 고려 필요

    trail_direction:
      selection_guide_ko: |
        【🎯 추적 방향 선택 가이드】

        🔸 **상향 추적 (UP) - 일반적 사용:**
        • 동작: 최고점 지속 갱신 → 하락 감지 시 신호
        • 목적: 수익 보호, 상승 추세 중 조정 대응
        • 적용: 매수 포지션, 수익 실현, 손실 제한
        • 권장: 대부분의 상황에서 기본 선택

        🔸 **하향 추적 (DOWN) - 특수 목적:**
        • 동작: 최저점 지속 갱신 → 상승 감지 시 신호
        • 목적: 반등 포착, 하락 추세 중 바닥 확인
        • 적용: 매도 포지션, 손실 제한, 반등 진입
        • 권장: 특별한 전략이나 헤지 목적

      practical_examples_ko: |
        【🎲 방향별 활용 시나리오】

        ⬆️ **상향 추적 활용:**
        ```
        상황: BTC 5천만원에 매수 → 6천만원까지 상승
        설정: 상향 추적, -5%
        동작: 6천만원 최고점 기록 → 5700만원 하락시 매도
        결과: 14% 수익으로 안전한 익절
        ```

        ⬇️ **하향 추적 활용:**
        ```
        상황: ETH 공매도 300만원 → 250만원까지 하락
        설정: 하향 추적, +10%
        동작: 250만원 최저점 기록 → 275만원 반등시 매수
        결과: 25만원 수익으로 포지션 정리
        ```

        🔄 **복합 전략:**
        ```
        Long 포지션: 상향 추적으로 수익 보호
        Short 포지션: 하향 추적으로 손실 제한
        양방향 헤지: 각각 다른 방향으로 리스크 관리
        ```

  # ────────────────────────────────────────────────────────────
  # 💼 실전 예시 및 사례
  # ────────────────────────────────────────────────────────────
  examples:
    chart_examples: |
      【📊 차트 패턴 예시】

      🟢 **상승 추세 중 트레일링 스탑:**
      ```
      시간: 09:00 → 12:00 → 15:00 → 18:00
      가격: 45,000 → 48,000 → 47,000 → 49,000
      추적고점: 45,000 → 48,000 → 48,000 → 49,000
      임계값: 43,500 → 46,080 → 46,080 → 47,040 (-4%)
      → 47,000에서 임계값(46,080) 유지, 계속 보유
      ```

      🔴 **트레일링 스탑 발동:**
      ```
      시간: 21:00 → 22:00 → 23:00
      가격: 49,000 → 48,500 → 46,800
      추적고점: 49,000 → 49,000 → 49,000
      임계값: 47,040 → 47,040 → 47,040 (-4%)
      → 46,800에서 임계값(47,040) 하회 = 신호 발생!
      ```

      🟡 **하향 추적 반등 포착:**
      ```
      시간: 10:00 → 13:00 → 16:00 → 19:00
      가격: 45,000 → 42,000 → 43,000 → 41,500
      추적저점: 45,000 → 42,000 → 42,000 → 41,500
      임계값: 47,250 → 44,100 → 44,100 → 43,575 (+5%)
      → 43,000에서 임계값(44,100) 미달, 계속 추적
      ```

    backtesting_cases: |
      【🔬 백테스팅 사례 분석】

      📈 **BTC 트레일링 스탑 전략 (2024년 상반기):**
      • 설정: 극값 비율 -3%, 상향 추적
      • 진입: RSI 과매도 구간에서 매수
      • 청산: 트레일링 스탑 신호시 매도
      • 결과: 승률 72%, 평균 수익률 15.2%
      • 분석: 급락장에서 큰 손실 방지, 상승장에서 수익 확보

      📊 **ETH 분할 매수 + 트레일링 전략:**
      • 설정: 평단가 -5%p, 상향 추적
      • 진입: 5차례 분할 매수로 평단가 형성
      • 청산: 평단가 기준 트레일링 스탑
      • 결과: 승률 68%, 평균 수익률 22.8%
      • 분석: 분할 매수로 리스크 분산, 트레일링으로 수익 보호

    combination_strategies: |
      【🤝 다른 지표와의 조합 전략】

      🔸 **RSI + 트레일링 스탑:**
      • 진입: RSI 30 이하에서 매수
      • 보호: 극값 비율 -4% 트레일링 스탑
      • 효과: 과매도 구간 진입 + 자동 수익 보호
      • 장점: 감정 배제한 기계적 매매

      🔸 **볼링거밴드 + 트레일링 스탑:**
      • 진입: 볼링거밴드 하단 터치시 매수
      • 보호: 진입가 -3%p 트레일링 스탑
      • 효과: 반등 구간 포착 + 손실 제한
      • 장점: 명확한 진입과 보호 기준

      🔸 **이동평균 + 다중 트레일링:**
      • 진입: 20일선 상향 돌파시 매수
      • 보호1: 진입가 -5%p (손실 제한)
      • 보호2: 극값 비율 -3% (수익 보호)
      • 효과: 추세 확인 진입 + 이중 보호 시스템

  # ────────────────────────────────────────────────────────────
  # 📝 추가 참고사항
  # ────────────────────────────────────────────────────────────
  additional_notes:
    limitations: |
      【⚠️ 한계점 및 주의사항】
      • 신호 발생 후 즉시 비활성화 (일회성 도구)
      • 추적 변수의 정상 동작에 완전 의존
      • 급격한 갭 변동시 설정값과 다른 체결 가능
      • 시장 유동성 부족시 슬리피지 발생 위험

    best_practices: |
      【✅ 모범 사례】
      • 포지션 규모에 맞는 적절한 임계값 설정
      • 백테스팅을 통한 최적 파라미터 검증
      • 다른 리스크 관리 도구와 함께 활용
      • 시장별, 자산별 특성을 고려한 개별 설정
      • 정기적인 설정값 재검토 및 조정

    related_indicators: |
      【🔗 관련 지표】
      • META_PYRAMID_TARGET: 피라미딩과 함께 사용
      • ATR: 변동성 기반 임계값 설정
      • 볼링거밴드: 변동성 구간과 함께 활용
      • RSI: 과매수/과매도 구간에서 트레일링 시작
      • 이동평균: 추세 확인과 함께 방향 설정
