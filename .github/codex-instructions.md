# Codex Agent 지침 — Korean Response Master v1.0

## 언어 & 톤
- 모든 사용자 응답은 자연스러운 한국어로 작성한다.
- 기술 용어는 필요 시 영문을 병기하되 문장 구조는 한국어를 우선한다.
- 협업하는 동료 개발자에게 설명하듯 간결하고 사실 위주로 답변한다.

## 프로젝트 컨텍스트 준수
- `.github/copilot-instructions.md`의 Golden Rules, Must Do/Must Not Do, DDD 구조 규정을 항상 참고하고 동일하게 따른다.
- Dry-Run을 기본값으로 간주하고, 실거래 지시가 있으면 추가 확인 절차를 사용자에게 다시 묻는다.
- Infrastructure 로깅 사용, 3-DB 분리, DTO 불변성(@dataclass(frozen=True)) 등 핵심 원칙을 위반하지 않는다.

## 작업 프로세스
1. 사용자의 요청을 분석하여 난이도를 판단한다.
2. Ryan-Style 3-Step Vibe Coding 조건에 해당하면 해당 프로세스 진행 여부를 우선 제안한다.
3. 간단한 수정 요청은 즉시 실행하되, 영향 범위와 검증 방법을 간단히 설명한다.
4. 중간 산출물(계획/PRD/태스크 분해/구현/검증)을 단계별로 공유하고, 다음 단계 진행 전 사용자의 확인을 받는다.

## 응답 형식 가이드
- 기본적으로 짧은 문단과 불릿을 활용하여 핵심부터 전달한다.
- 변경 파일은 경로를 `` `파일경로` `` 형태로 표기하고, 필요 시 라인 번호를 `path:라인` 형식으로 덧붙인다.
- 명령어는 PowerShell 기준으로 설명한다. Unix 전용 명령어, `&&`, `grep`, `ls` 등은 사용하지 않는다.
- 테스트, 빌드, 검증 절차가 필요할 때는 실행 명령과 기대 결과를 함께 안내한다.

## 도구 사용 원칙
- PowerShell 전용 명령만 실행하며, `shell` 호출 시 항상 `pwsh -Command`를 사용한다.
- 파일 편집은 Here-String 등 PowerShell 친화적인 방식을 선호한다.
- 테스트 실행, DB 확인, 로깅 설정 등은 `.github/copilot-instructions.md`의 표준 명령 블록을 우선 참고한다.

## 품질 & 검증
- 코드 변경 시 pytest 또는 필요한 자체 검증 단계를 제안하고, 실행이 어려울 경우 이유와 수동 검증 절차를 설명한다.
- 잠재적 리스크, 남은 과제, 후속 작업 아이디어를 한국어로 명확히 남긴다.
- 사용자 요청과 상충되는 정책이 있을 경우, 충돌 사실을 알리고 확인을 구한다.

위 지침은 Codex Agent가 모든 세션에서 우선적으로 참고해야 할 기본 규약이다.
## 트러블슈팅 & 제안
- PowerShell 스크립트로 파일을 작성할 때는 반드시 `-Encoding utf8`을 지정하고, Python 스크립트에서는 `encoding="utf-8", newline="\n"`을 명시합니다.
- 줄바꿈 변환이 필요하면 저장 직전에만 `text.replace('\n', '\r\n')`을 호출하고, 그 전에 반드시 `text = text.replace('\r\n', '\n')`으로 정규화합니다.
- 자동 치환 스크립트는 대량 `re.sub`보다 블록 기반 편집을 사용하고, 실행 직후 `python -m compileall` 및 `git diff --word-diff`로 공백 이상 여부를 확인합니다.
- 예기치 않은 빈 줄이 보이면 `python - <<'PY'` + `repr(line)`을 활용해 바이트 단위로 공백/제어 문자를 점검합니다.

