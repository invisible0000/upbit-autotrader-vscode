# ğŸ¯ WebSocket v6.0 ì„¤ê³„ ì›ì¹™ ë° ì•„í‚¤í…ì²˜

## ğŸ—ï¸ **í•µì‹¬ ì„¤ê³„ ì›ì¹™**

### 1. **Single Source of Truth (ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì›)**
- ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ **í•˜ë‚˜ì˜ WebSocket ì—°ê²°**ë§Œ ì—…ë¹„íŠ¸ ì„œë²„ì™€ í†µì‹ 
- ëª¨ë“  êµ¬ë… ìƒíƒœëŠ” **GlobalWebSocketManager**ì—ì„œ ì¤‘ì•™ ê´€ë¦¬
- ë°ì´í„° ì¤‘ë³µ ìš”ì²­ ë°©ì§€ ë° ì—…ë¹„íŠ¸ API íš¨ìœ¨ì„± ê·¹ëŒ€í™”

### 2. **Graceful Degradation (ìš°ì•„í•œ ì„±ëŠ¥ ì €í•˜)**
- API í‚¤ ì—†ì–´ë„ **Public ê¸°ëŠ¥ ì™„ì „ ë™ì‘**
- Private ê¸°ëŠ¥ ë¶ˆê°€ ì‹œ **REST API í´ë§ìœ¼ë¡œ ìë™ ëŒ€ì²´**
- ì—°ê²° ëŠê¹€ ì‹œì—ë„ **ì‚¬ìš©ì ê²½í—˜ ì¤‘ë‹¨ ì—†ìŒ**

### 3. **Zero Configuration (ì œë¡œ ì„¤ì •)**
- ê¸°ë³¸ ì„¤ì •ë§Œìœ¼ë¡œ **ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥**
- ë³µì¡í•œ WebSocket ì„¤ì •ì„ **ë‚´ë¶€ì ìœ¼ë¡œ ìë™ ìµœì í™”**
- ê°œë°œìëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ë§Œ ì§‘ì¤‘

### 4. **Fail-Safe Design (ì•ˆì „ ì¥ì¹˜ ì„¤ê³„)**
- ì»´í¬ë„ŒíŠ¸ ë¹„ì •ìƒ ì¢…ë£Œ ì‹œ **ìë™ êµ¬ë… ì •ë¦¬**
- Rate Limit ì´ˆê³¼ ì‹œ **ì§€ìˆ˜ ë°±ì˜¤í”„ ìë™ ì ìš©**
- ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ë¥¼ ìœ„í•œ **WeakRef ê¸°ë°˜ ìë™ ê´€ë¦¬**

## ğŸ›ï¸ **ì•„í‚¤í…ì²˜ ì„¤ê³„**

### **ê³„ì¸µë³„ ì±…ì„ ë¶„ë¦¬**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Subsystem Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Chart       â”‚ â”‚ OrderMonitorâ”‚ â”‚ MarketDataAnalyzer     â”‚ â”‚
â”‚  â”‚ Component   â”‚ â”‚ Component   â”‚ â”‚ Component              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Proxy Layer                                â”‚
â”‚           WebSocketClientProxy                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ subscribe_ticker()     â€¢ is_public_available()       â”‚ â”‚
â”‚  â”‚ â€¢ subscribe_orderbook()  â€¢ is_private_available()      â”‚ â”‚
â”‚  â”‚ â€¢ get_snapshot()         â€¢ automatic_cleanup()         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Global Management Layer                      â”‚
â”‚              GlobalWebSocketManager                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ Subscription State Manager                           â”‚ â”‚
â”‚  â”‚ â€¢ Data Routing Engine                                  â”‚ â”‚
â”‚  â”‚ â€¢ Connection Manager                                   â”‚ â”‚
â”‚  â”‚ â€¢ Automatic Recovery System                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                WebSocket Client Layer                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ UpbitWebSocketPublicâ”‚       â”‚ UpbitWebSocketPrivate   â”‚  â”‚
â”‚  â”‚ Client              â”‚       â”‚ Client                  â”‚  â”‚
â”‚  â”‚ â€¢ No API Key Needed â”‚       â”‚ â€¢ JWT Authentication   â”‚  â”‚
â”‚  â”‚ â€¢ Market Data       â”‚       â”‚ â€¢ Order/Asset Data     â”‚  â”‚
â”‚  â”‚ â€¢ Always Available  â”‚       â”‚ â€¢ Conditional Availableâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Upbit WebSocket API                       â”‚
â”‚                    wss://api.upbit.com                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ **ë°ì´í„° íë¦„ ì•„í‚¤í…ì²˜**

### **êµ¬ë… ìš”ì²­ íë¦„**
```
[Subsystem]
    â†’ [WebSocketClientProxy]
    â†’ [GlobalWebSocketManager]
    â†’ [SubscriptionStateManager]
    â†’ [ì‹¤ì œ WebSocket Client]
    â†’ [Upbit API]
```

### **ë°ì´í„° ìˆ˜ì‹  íë¦„**
```
[Upbit API]
    â†’ [ì‹¤ì œ WebSocket Client]
    â†’ [DataRoutingEngine]
    â†’ [ì½œë°± ë¼ìš°í„°]
    â†’ [ê° Subsystem ì½œë°±]
```

## ğŸ§© **í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„**

### **1. GlobalWebSocketManager**
```python
class GlobalWebSocketManager:
    """ì „ì—­ WebSocket ê´€ë¦¬ì - Singleton íŒ¨í„´"""

    # í•µì‹¬ ì„¤ê³„ ê²°ì •:
    # - ì• í”Œë¦¬ì¼€ì´ì…˜ë‹¹ ë‹¨ 1ê°œ ì¸ìŠ¤í„´ìŠ¤
    # - Public/Private í´ë¼ì´ì–¸íŠ¸ í†µí•© ê´€ë¦¬
    # - ë² ì´ìŠ¤ ì—°ê²° ìƒì‹œ ìœ ì§€ (24/7)
    # - ìë™ ì¥ì•  ë³µêµ¬ ë° ìƒíƒœ ë³µì›
    # - upbit_auth.pyì™€ rate_limiter.py ì¤‘ì•™ ì§‘ì¤‘ ì‚¬ìš©
```### **2. WebSocketClientProxy**
```python
class WebSocketClientProxy:
    """ì„œë¸Œì‹œìŠ¤í…œìš© WebSocket í”„ë¡ì‹œ"""

    # í•µì‹¬ ì„¤ê³„ ê²°ì •:
    # - ì„œë¸Œì‹œìŠ¤í…œë³„ ë…ë¦½ì ì¸ ì¸í„°í˜ì´ìŠ¤ ì œê³µ
    # - GlobalWebSocketManagerë¡œ ëª¨ë“  ìš”ì²­ ìœ„ì„
    # - WeakRef ê¸°ë°˜ ìë™ ìƒëª…ì£¼ê¸° ê´€ë¦¬
    # - ì˜¤ë¥˜ ê²©ë¦¬ ë° ë³µêµ¬
    # - upbit_auth.py ì„í¬íŠ¸ ë¶ˆí•„ìš” (ì „ì—­ ê´€ë¦¬ìê°€ JWT ì œê³µ)
```### **3. SubscriptionStateManager**
```python
class SubscriptionStateManager:
    """ì „ì—­ êµ¬ë… ìƒíƒœ ê´€ë¦¬ì"""

    # í•µì‹¬ ì„¤ê³„ ê²°ì •:
    # - ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì˜ êµ¬ë… ìš”êµ¬ì‚¬í•­ í†µí•©
    # - ì—…ë¹„íŠ¸ ë®ì–´ì“°ê¸° ë°©ì‹ì— ìµœì í™”
    # - ìŠ¤ëƒ…ìƒ· ìš”ì²­ ì‹œ ê¸°ì¡´ ì‹¤ì‹œê°„ í¬í•¨
    # - ì¤‘ë³µ êµ¬ë… ìë™ ìµœì í™”
```

### **4. DataRoutingEngine**
```python
class DataRoutingEngine:
    """ë°ì´í„° ë¼ìš°íŒ… ë° ë¶„ë°° ì—”ì§„"""

    # í•µì‹¬ ì„¤ê³„ ê²°ì •:
    # - ìˆ˜ì‹  ë°ì´í„°ë¥¼ ê´€ë ¨ ëª¨ë“  ì½œë°±ì— ë©€í‹°ìºìŠ¤íŠ¸
    # - ì½œë°± ì‹¤í–‰ ì˜¤ë¥˜ ê²©ë¦¬
    # - ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ ë¹„ë™ê¸° ë¶„ë°°
    # - ë©”ëª¨ë¦¬ íš¨ìœ¨ì ì¸ ë°ì´í„° ë³µì‚¬
```

## ğŸ”’ **ë³´ì•ˆ ì„¤ê³„**

### **API í‚¤ ê´€ë¦¬**
- **ì „ì—­ ì¸ì¦**: `upbit_auth.py`ì˜ UpbitAuthenticatorë¥¼ ì „ì—­ ê´€ë¦¬ìì—ì„œë§Œ ì‚¬ìš©
- **í´ë¼ì´ì–¸íŠ¸ ë¶„ë¦¬**: ê°œë³„ í´ë¼ì´ì–¸íŠ¸ëŠ” JWT í† í°ë§Œ ë°›ì•„ì„œ ì‚¬ìš© (upbit_auth ì„í¬íŠ¸ ë¶ˆí•„ìš”)
- **ìë™ ë§Œë£Œ**: JWT í† í° ìë™ ê°±ì‹  (Private í´ë¼ì´ì–¸íŠ¸)
- **ê¶Œí•œ ìµœì†Œí™”**: í•„ìš”í•œ ê¶Œí•œë§Œ ìš”ì²­

### **ì—ëŸ¬ ì •ë³´ ë³´í˜¸**
- API í‚¤ê°€ ë¡œê·¸ì— ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬
- ë¯¼ê°í•œ ì •ë³´ëŠ” ë””ë²„ê·¸ ë¡œê·¸ì—ì„œë„ ì œì™¸
- ì—ëŸ¬ ë©”ì‹œì§€ì—ì„œ ì‹œìŠ¤í…œ ë‚´ë¶€ ì •ë³´ ìˆ¨ê¹€

## âš¡ **ì„±ëŠ¥ ì„¤ê³„**

### **ë©”ëª¨ë¦¬ ìµœì í™”**
```python
# WeakRef ê¸°ë°˜ ìë™ ì •ë¦¬
import weakref

class WebSocketClientProxy:
    def __init__(self, client_id: str):
        # ê°ì²´ ì†Œë©¸ ì‹œ ìë™ ì •ë¦¬ ì½œë°± ë“±ë¡
        weakref.finalize(self, self._cleanup_subscriptions)
```

### **ë„¤íŠ¸ì›Œí¬ ìµœì í™”**
```python
# êµ¬ë… ìš”ì²­ í†µí•© ìµœì í™”
def optimize_subscription_request(self, new_symbols: Set[str],
                                current_symbols: Set[str]) -> List[str]:
    """ê¸°ì¡´ ì‹¤ì‹œê°„ + ìƒˆ ìš”ì²­ì„ í†µí•©í•˜ì—¬ ìµœì í™”ëœ êµ¬ë… ìƒì„±"""
    return list(current_symbols | new_symbols)
```

### **CPU ìµœì í™”**
```python
# ë¹„ë™ê¸° ë°ì´í„° ë¶„ë°°ë¡œ ë¸”ë¡œí‚¹ ë°©ì§€
async def distribute_data(self, data: dict):
    """ëª¨ë“  ì½œë°±ì„ ë³‘ë ¬ ì‹¤í–‰í•˜ì—¬ ì„±ëŠ¥ ìµœì í™”"""
    tasks = [callback(data) for callback in self.callbacks]
    await asyncio.gather(*tasks, return_exceptions=True)
```

## ğŸ›¡ï¸ **ì¥ì•  ë³µêµ¬ ì„¤ê³„**

### **ì—°ê²° ì¥ì•  ëŒ€ì‘**
1. **ìë™ ê°ì§€**: 5ì´ˆë§ˆë‹¤ ì—°ê²° ìƒíƒœ ì²´í¬
2. **ì¦‰ì‹œ ë³µêµ¬**: ì—°ê²° ëŠê¹€ ê°ì§€ ì‹œ 1ì´ˆ ë‚´ ì¬ì—°ê²° ì‹œë„
3. **ìƒíƒœ ë³µì›**: ì¬ì—°ê²° í›„ ëª¨ë“  êµ¬ë… ìƒíƒœ ìë™ ë³µì›
4. **ì•Œë¦¼ ì‹œìŠ¤í…œ**: ì¥ì•  ë°œìƒ/ë³µêµ¬ ì‹œ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ì— ì•Œë¦¼

### **Rate Limit ëŒ€ì‘**
1. **ì§€ìˆ˜ ë°±ì˜¤í”„**: 429 ì˜¤ë¥˜ ì‹œ ëŒ€ê¸° ì‹œê°„ ì ì§„ì  ì¦ê°€
2. **ë™ì  ì¡°ì ˆ**: Rate Limit íŒ¨í„´ í•™ìŠµí•˜ì—¬ ìš”ì²­ ê°„ê²© ìë™ ì¡°ì ˆ
3. **ìš°ì„ ìˆœìœ„ í**: ì¤‘ìš”í•œ ìš”ì²­ë¶€í„° ìš°ì„  ì²˜ë¦¬
4. **í´ë°± ì „ëµ**: WebSocket ë¶ˆê°€ ì‹œ REST APIë¡œ ìë™ ëŒ€ì²´

### **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€**
1. **WeakRef í™œìš©**: ì°¸ì¡° ìˆœí™˜ ë°©ì§€
2. **ì£¼ê¸°ì  ì •ë¦¬**: ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” êµ¬ë… ìë™ í•´ì œ
3. **ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§**: ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ìë™ ìµœì í™”
4. **ê°•ì œ GC**: í•„ìš” ì‹œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ìˆ˜ë™ íŠ¸ë¦¬ê±°

## ğŸ“Š **ëª¨ë‹ˆí„°ë§ ë° ê´€ì°° ê°€ëŠ¥ì„±**

### **ë©”íŠ¸ë¦­ ìˆ˜ì§‘**
```python
# ì‹¤ì‹œê°„ ì„±ëŠ¥ ì§€í‘œ
metrics = {
    'active_connections': int,
    'total_subscriptions': int,
    'messages_per_second': float,
    'average_latency_ms': float,
    'error_rate_percent': float,
    'memory_usage_mb': float
}
```

### **í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸**
```python
async def health_check() -> dict:
    """ì‹œìŠ¤í…œ ê±´ê°•ì„± ì¢…í•© ê²€ì‚¬"""
    return {
        'status': 'healthy|degraded|critical',
        'uptime_seconds': float,
        'last_message_timestamp': datetime,
        'connection_quality': 'excellent|good|poor',
        'active_subscriptions': int
    }
```

## ğŸ”§ **í™•ì¥ì„± ì„¤ê³„**

### **ìƒˆë¡œìš´ ë°ì´í„° íƒ€ì… ì¶”ê°€**
```python
# í”ŒëŸ¬ê·¸ì¸ ë°©ì‹ìœ¼ë¡œ ìƒˆ ë°ì´í„° íƒ€ì… ì§€ì›
class CustomDataTypeHandler:
    def can_handle(self, data_type: str) -> bool:
        return data_type.startswith('custom_')

    async def process_data(self, data: dict) -> dict:
        # ì»¤ìŠ¤í…€ ë°ì´í„° ì²˜ë¦¬ ë¡œì§
        return processed_data

# í•¸ë“¤ëŸ¬ ë“±ë¡
global_manager.register_data_handler(CustomDataTypeHandler())
```

### **ë‹¤ì¤‘ ê±°ë˜ì†Œ ì§€ì› ì¤€ë¹„**
```python
# ì¶”ìƒ ì¸í„°í˜ì´ìŠ¤ë¡œ ë‹¤ë¥¸ ê±°ë˜ì†Œ í™•ì¥ ê°€ëŠ¥
class AbstractWebSocketManager(ABC):
    @abstractmethod
    async def subscribe_ticker(self, symbols: List[str]) -> str:
        pass

    @abstractmethod
    async def subscribe_orderbook(self, symbols: List[str]) -> str:
        pass

# ì—…ë¹„íŠ¸ êµ¬í˜„ì²´
class UpbitWebSocketManager(AbstractWebSocketManager):
    # ì—…ë¹„íŠ¸ ì „ìš© êµ¬í˜„
    pass

# í–¥í›„ ë°”ì´ë‚¸ìŠ¤ ë“± ì¶”ê°€ ê°€ëŠ¥
class BinanceWebSocketManager(AbstractWebSocketManager):
    # ë°”ì´ë‚¸ìŠ¤ ì „ìš© êµ¬í˜„
    pass
```

## ğŸ¯ **í’ˆì§ˆ ë³´ì¦**

### **í…ŒìŠ¤íŠ¸ ì „ëµ**
1. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**: ê° ì»´í¬ë„ŒíŠ¸ë³„ ë…ë¦½ í…ŒìŠ¤íŠ¸ (90% ì»¤ë²„ë¦¬ì§€)
2. **í†µí•© í…ŒìŠ¤íŠ¸**: ì‹¤ì œ ì—…ë¹„íŠ¸ APIì™€ ì—°ë™ í…ŒìŠ¤íŠ¸
3. **ë¶€í•˜ í…ŒìŠ¤íŠ¸**: 100ê°œ ì‹¬ë³¼ ë™ì‹œ êµ¬ë… ì•ˆì •ì„± ê²€ì¦
4. **ì¥ì•  í…ŒìŠ¤íŠ¸**: ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆ, Rate Limit ë“± ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

### **ì½”ë“œ í’ˆì§ˆ**
1. **íƒ€ì… íŒíŠ¸**: ëª¨ë“  public ë©”ì„œë“œì— ì™„ì „í•œ íƒ€ì… ì–´ë…¸í…Œì´ì…˜
2. **ë¬¸ì„œí™”**: Docstring 100% ì‘ì„±
3. **ë¦°íŒ…**: mypy, flake8 ê²€ì‚¬ í†µê³¼
4. **í¬ë§·íŒ…**: black ìë™ í¬ë§·íŒ… ì ìš©

---

**"Simple is better than complex. Complex is better than complicated."** - The Zen of Python
