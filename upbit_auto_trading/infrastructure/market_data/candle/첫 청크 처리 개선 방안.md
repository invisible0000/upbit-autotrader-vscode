## 첫 청크 처리 로직을 process_collection 메서드에 명확히 드러내기

### 배경
- 청크 프로세서에서 `process_collection` 메서드는 겉보기에는 단순해 보이지만 `_create_chunk` 메서드와 `_process_single_chunk` 내부적으로 첫 청크 구분로직이 복잡하게 숨겨져 있습니다. 그런데 첫 청크 로직은 매우 중요해서 `process_collection` 에 명확하게 절차가 드러나 보이는것이 좋습니다.

### 문제점
- 지금 첫 청크 로직을 숨기기 위해 외부적으로는 `candle_business_models.py` 파일의  `_create_first_chunk_params_by_type` 메서드나 `first_chunk_params` 필드가 사용되고 있으며 내부적으로는 first chunk 체크와 관련된 메서드나 상태 변수가 사용되고 있습니다. 이 상황은 중요한 첫 청크 처리의 로직이 숨겨져 가독성이나 유지 관리가 어려우며 불필요한 연산 처리들을 발생시키고 있습니다.

### 제안
- 첫 청크는 수집 상황에 상황에 따라 있거나 없는 것이 아닌 항상 처음에 발생하는 필수적인 과정입니다. 그러니 메인  `process_collection` 에서 다루면 다음 부터는 어디에서도 체크를 할 필요가 없는 깔끔한 코드가 될 수 있습니다. 그러니 `process_collection`에 첫 청크 처리를 명시적으로 드러내어 부가적인 첫 청크 처리를 위한 메서드나 상태 변수가 없도록 처리하는 작업을 계획해 주세요. 아니면 복잡한 첫 청크 구분 로직을 모든 처리에 가져가지 않기 위해 `_process_first_chunk` 같은 별도 메서드를 만들어서 관리하는 방법도 있습니다. `_process_first_chunk`는 코딩 형태적으로 `_process_single_chunk`와 비슷하지만 이 과정만으로 많은 기타 메서드나 상태 변수를 제거할 수 있습니다.

### 구조
#### 개략적
- `process_collection` 메서드에서 첫 청크를 생성하고 처리하는 로직을 명확히 드러내고, 이후 청크들은 반복문을 통해 처리하도록 구조를 변경합니다.
1. 첫 청크 생성: `request_info`와 `chunk_size`를 사용하여 첫 청크를 생성합니다.
2. `_process_first_chunk`는 `request_info`와 `chunk`의 정보를 모두 받아 요청 타입에 따른 처리를 확실하게 합니다.
2. 첫 청크 처리: 생성된 첫 청크를 처리하고 결과를 기록합니다
3. 다음 `_process_single_chunk`를 이용한 반복문은 첫 청크만에 완료 된다면 동작하지 않게 if문으로 처리합니다.
#### 세부적
- `first_chunk_params` 필드와 `_create_first_chunk_params_by_type` 메서드를 제거합니다.
- 첫 청크 처리를 위한 별도의 상태 변수나 메서드를 제거합니다.
- `_process_first_chunk` 메서드를 새로 만들어 첫 청크 처리를 담당하게 합니다.
- `process_collection` 메서드에서 첫 청크를 생성하고 처리하는 로직을 명확히 드러냅니다.
- `_process_single_chunk` 메서드는 첫 청크 이후의 청크 처리에만 사용되도록 합니다.

### 기타
- 현재는 `_fetch_api_data` 메서드에 `chunk`를 그대로 전달하여 복잡한 부가 로직에 의한 상태 확인이나 메서드가 여러 파일에 파편적으로 있습니다. 그러니 `_fetch_api_data` 메서드에 필요한 파라미터만 전달하여 단순화하는 것도 고려해 주세요. 이부분이 단순화 될 수 있는 이유는 첫 청크의 요청 타입에 따라 첫 요청의 파라미터만이 `to`가 있거나 없게 되기 때문입니다. 첫 청크 이후 청크들은 모두 `to`와 `count`를 가지는 같은 파라미터 형태를 가지므로 첫 청크에서만 파라미터를 따로 처리하면 `_fetch_api_data` 메서드의 복잡성을 줄일 수 있습니다.

### 기대효과
- 코드 가독성 향상: 첫 청크 처리 로직이 명확히 드러나 코드 이해가 쉬워집니다.
- 유지보수 용이: 첫 청크 처리 로직이 한 곳에 집중되어 있어 수정이 용이합니다.
- 불필요한 연산 제거: 첫 청크 처리를 위한 부가적인 상태 변수나 메서드가 제거되어 코드가 간결해집니다.
