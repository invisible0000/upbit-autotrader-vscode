# 🎯 바이브 코딩 실전 가이드: 모델 vs 서비스 판단법

> **Quick Reference for Vibe Coders**
> 빠른 판단을 위한 실전 가이드

---

## ⚡ 5초 판단법

### 🟢 **모델에 두세요**
```
- getter/setter만 있나요? ✅
- 상태만 바꾸나요? (대기→처리중) ✅
- 단순 검증인가요? (빈값, 범위체크) ✅
- 타임존 정규화 같은 단순 변환인가요? ✅
```

### 🔴 **서비스로 보내세요**
```
- if-elif가 3개 이상인가요? ❌
- TimeUtils 같은 도구를 쓰나요? ❌
- 여러 필드로 계산하나요? ❌
- 비즈니스 규칙이 들어가나요? ❌
```

---

## 🛠️ Copilot 활용 패턴

### 📝 **분리 요청 패턴**
```
"이 메서드가 서비스로 가야 하는지 확인해주세요:
[메서드 코드 붙여넣기]

조건:
- DDD 아키텍처 준수
- 모델은 데이터 저장만
- 복잡한 로직은 서비스로"
```

### 📝 **서비스 생성 요청 패턴**
```
"다음 모델 메서드를 서비스로 분리해주세요:
[메서드 코드]

요구사항:
1. ChunkAnalysisService 클래스 생성
2. 정적 메서드로 구현
3. 모델은 단순 getter/setter로 변경
4. 기존 기능 유지"
```

---

## 🎯 현재 프로젝트 적용 우선순위

### 🚨 **즉시 분리 대상**
1. `ChunkInfo.calculate_effective_candle_count()` - 복잡한 겹침 계산
2. `ChunkInfo.get_effective_end_time()` - 다중 조건 로직
3. 시간 계산 관련 복잡한 메서드들

### ⏳ **미래 고려 대상**
1. `ChunkInfo.get_time_source()` - 단순하지만 확장 가능성
2. TimeUtils 의존성들 - 현재는 허용, 향후 분리 고려

### ✅ **모델 유지**
1. 모든 `mark_*()`, `is_*()` 메서드들
2. 단순 필드 반환 메서드들
3. 기본 검증 로직들

---

## 📋 실전 체크리스트

### ✅ **분리 전 확인사항**
- [ ] 해당 메서드가 정말 복잡한가?
- [ ] 테스트하기 어려운가?
- [ ] 비즈니스 로직이 포함되어 있나?
- [ ] 다른 곳에서도 사용할 가능성이 있나?

### ✅ **분리 후 확인사항**
- [ ] 모델이 단순해졌는가?
- [ ] 서비스가 독립적으로 테스트 가능한가?
- [ ] 기존 기능이 정상 동작하는가?
- [ ] 코드 가독성이 향상되었는가?

---

*"복잡하면 서비스로, 단순하면 모델로!" 🎯*
