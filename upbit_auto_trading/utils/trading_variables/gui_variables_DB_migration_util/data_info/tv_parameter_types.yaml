# 트레이딩 변수 파라미터 타입 정의
# ===============================
# 통일된 ID 기반 딕셔너리 구조
# 각 파라미터 타입별 기본 설정과 검증 규칙

parameter_types:
  # 정수형 파라미터
  integer:
    type_id: "integer"
    description: "정수형 파라미터"
    validation_rules:
      type_check: "int"
      range_check: true
      allow_negative: false
    default_range:
      min: 1
      max: 240
      step: 1
    ui_control: "number_input"
    common_uses:
      - "RSI 기간: 14"
      - "SMA 기간: 20"
      - "MACD 빠른선: 12"
      
  # 소수형 파라미터
  float:
    type_id: "float"
    description: "소수형 파라미터"
    validation_rules:
      type_check: "float"
      range_check: true
      precision: 2
      allow_negative: false
    default_range:
      min: 0.1
      max: 100.0
      step: 0.1
    ui_control: "decimal_input"
    common_uses:
      - "볼린저밴드 표준편차: 2.0"
      - "ATR 배수: 1.5"
      - "EMA 지수계수: 2.0"
      
  # 선택형 파라미터
  enum:
    type_id: "enum"
    description: "선택형 파라미터"
    validation_rules:
      options_check: true
      allow_empty: false
      custom_options: false
    default_range:
      options: []
      min_options: 2
      max_options: 20
    ui_control: "dropdown"
    common_uses:
      - "타임프레임 선택"
      - "계산 방식 선택"
      - "표시 통화 선택"

# 지표별 필수/권장 파라미터 패턴
parameter_patterns:
  # 이동평균 지표 패턴
  moving_average_indicators:
    pattern_id: "moving_average_indicators"
    description: "이동평균 계열 지표의 공통 파라미터"
    required_parameters:
      period:
        type: "integer"
        range: "1-240"
        default: 20
        description: "계산 기간"
      timeframe:
        type: "enum"
        options: ["포지션 설정 따름", "1분", "3분", "5분", "15분", "30분", "1시간", "4시간", "1일"]
        default: "포지션 설정 따름"
        description: "봉 단위"
    optional_parameters:
      smoothing_factor:
        type: "float"
        range: "0.1-10.0"
        default: 2.0
        description: "평활화 계수"
    applies_to: ["SMA", "EMA", "WMA", "HULL_MA"]

  # 오실레이터 지표 패턴
  oscillator_indicators:
    pattern_id: "oscillator_indicators"
    description: "오실레이터 계열 지표의 공통 파라미터"
    required_parameters:
      period:
        type: "integer"
        range: "2-100"
        default: 14
        description: "계산 기간"
      timeframe:
        type: "enum"
        options: ["포지션 설정 따름", "1분", "3분", "5분", "15분", "30분", "1시간", "4시간", "1일"]
        default: "포지션 설정 따름"
        description: "봉 단위"
    optional_parameters:
      overbought_level:
        type: "integer"
        range: "50-100"
        default: 70
        description: "과매수 기준선"
      oversold_level:
        type: "integer"
        range: "0-50"
        default: 30
        description: "과매도 기준선"
    applies_to: ["RSI", "STOCHASTIC", "CCI", "MFI", "WILLIAMS_R"]

  # 변동성 지표 패턴
  volatility_indicators:
    pattern_id: "volatility_indicators"
    description: "변동성 계열 지표의 공통 파라미터"
    required_parameters:
      period:
        type: "integer"
        range: "5-100"
        default: 14
        description: "계산 기간"
      multiplier:
        type: "float"
        range: "0.5-5.0"
        default: 2.0
        description: "변동성 배수"
    optional_parameters:
      timeframe:
        type: "enum"
        options: ["포지션 설정 따름", "1분", "3분", "5분", "15분", "30분", "1시간", "4시간", "1일"]
        default: "포지션 설정 따름"
        description: "봉 단위"
    applies_to: ["ATR", "BOLLINGER_BAND", "STANDARD_DEVIATION"]

  # 거래량 지표 패턴
  volume_indicators:
    pattern_id: "volume_indicators"
    description: "거래량 계열 지표의 공통 파라미터"
    required_parameters:
      period:
        type: "integer"
        range: "5-200"
        default: 20
        description: "계산 기간"
    optional_parameters:
      volume_type:
        type: "enum"
        options: ["거래량", "거래대금"]
        default: "거래량"
        description: "거래량 타입"
      timeframe:
        type: "enum"
        options: ["포지션 설정 따름", "1분", "3분", "5분", "15분", "30분", "1시간", "4시간", "1일"]
        default: "포지션 설정 따름"
        description: "봉 단위"
    applies_to: ["VOLUME_SMA", "OBV"]

  # 가격 지표 패턴
  price_indicators:
    pattern_id: "price_indicators"
    description: "가격 계열 지표의 공통 파라미터"
    required_parameters:
      timeframe:
        type: "enum"
        options: ["포지션 설정 따름", "1분", "3분", "5분", "15분", "30분", "1시간", "4시간", "1일"]
        default: "포지션 설정 따름"
        description: "봉 단위"
    optional_parameters:
      price_type:
        type: "enum"
        options: ["현재가", "매수호가", "매도호가", "중간가"]
        default: "현재가"
        description: "가격 타입"
    applies_to: ["CURRENT_PRICE", "OPEN_PRICE", "HIGH_PRICE", "LOW_PRICE"]

  # 잔고 지표 패턴
  balance_indicators:
    pattern_id: "balance_indicators"
    description: "잔고 계열 지표의 공통 파라미터"
    required_parameters:
      currency:
        type: "enum"
        options: ["KRW", "USD", "BTC"]
        default: "KRW"
        description: "표시 통화"
      scope:
        type: "enum"
        options: ["포지션제한", "계좌전체"]
        default: "포지션제한"
        description: "계산 범위"
    applies_to: ["CASH_BALANCE", "COIN_BALANCE", "TOTAL_BALANCE"]

  # 수익 지표 패턴
  profit_indicators:
    pattern_id: "profit_indicators"
    description: "수익 계열 지표의 공통 파라미터"
    required_parameters:
      calculation_method:
        type: "enum"
        options: ["미실현", "실현", "전체"]
        default: "미실현"
        description: "계산 방식"
      include_fees:
        type: "enum"
        options: ["포함", "제외"]
        default: "포함"
        description: "수수료 포함 여부"
    optional_parameters:
      currency:
        type: "enum"
        options: ["KRW", "USD", "BTC"]
        default: "KRW"
        description: "표시 통화"
      scope:
        type: "enum"
        options: ["현재포지션", "전체포지션", "포트폴리오"]
        default: "현재포지션"
        description: "계산 범위"
    applies_to: ["PROFIT_PERCENT", "PROFIT_AMOUNT"]

# 파라미터 생성 가이드라인
parameter_creation_guidelines:
  # 명명 규칙
  naming_rules:
    korean_label:
      rule: "사용자가 볼 한글 라벨 (간결하고 직관적)"
      examples: ["기간", "배수", "타임프레임"]
      max_length: 10
    parameter_name:
      rule: "코드에서 사용할 영문 이름 (snake_case)"
      examples: ["period", "multiplier", "timeframe"]
      pattern: "^[a-z][a-z0-9_]*$"
      
  # 설명 규칙
  description_rules:
    help_text:
      rule: "파라미터의 용도와 추천값 설명"
      format: "용도 설명 + 권장값"
      examples: ["계산에 사용할 기간 (권장: 14)", "변동성 배수 (권장: 2.0)"]
    examples:
      rule: "구체적인 사용 예시 제공"
      format: "지표명(값) → 결과"
      examples: ["RSI(14) → 14일 RSI", "SMA(20) → 20일 이동평균"]
      
  # 기본값 규칙
  default_rules:
    common_values:
      rule: "일반적으로 많이 사용되는 값"
      sources: ["트레이딩뷰 기본값", "업계 표준", "교육자료 권장값"]
    beginner_friendly:
      rule: "초보자도 사용하기 쉬운 값"
      criteria: ["이해하기 쉬운 값", "안전한 범위", "설명이 간단한 값"]
      
  # 검증 규칙
  validation_rules:
    reasonable_ranges:
      rule: "실용적인 최소/최대 범위"
      examples: ["기간: 1-240", "배수: 0.1-10.0", "퍼센트: 0-100"]
    step_values:
      rule: "float 타입의 경우 적절한 step 값"
      recommendations: ["배수: 0.1", "퍼센트: 0.01", "가격: 1.0"]

# 자주 사용되는 파라미터 템플릿
common_parameter_templates:
  # 기본 기간 템플릿
  period_basic:
    template_id: "period_basic"
    label: "기간"
    type: "integer"
    min: 1
    max: 240
    default: 14
    step: 1
    suffix: " 봉"
    help: "계산에 사용할 기간 (봉 개수)"
    ui_widget: "number_spinner"
    
  # 기본 타임프레임 템플릿
  timeframe_basic:
    template_id: "timeframe_basic"
    label: "타임프레임"
    type: "enum"
    options: ["포지션 설정 따름", "1분", "3분", "5분", "15분", "30분", "1시간", "4시간", "1일"]
    default: "포지션 설정 따름"
    help: "봉 단위 시간"
    ui_widget: "dropdown"
    
  # 기본 배수 템플릿
  multiplier_basic:
    template_id: "multiplier_basic"
    label: "배수"
    type: "float"
    min: 0.1
    max: 10.0
    default: 2.0
    step: 0.1
    help: "기준값에 곱할 배수"
    ui_widget: "decimal_spinner"
    
  # 기본 통화 템플릿
  currency_basic:
    template_id: "currency_basic"
    label: "표시 통화"
    type: "enum"
    options: ["KRW", "USD", "BTC"]
    default: "KRW"
    help: "금액 표시 기준 통화"
    ui_widget: "radio_buttons"

# UI 위젯 매핑
ui_widget_mapping:
  integer:
    default: "number_spinner"
    alternatives: ["number_input", "slider"]
    
  float:
    default: "decimal_spinner"
    alternatives: ["decimal_input", "slider"]
    
  enum:
    small_options: "radio_buttons"  # 2-4개 옵션
    medium_options: "dropdown"      # 5-10개 옵션
    large_options: "combobox"       # 10개 이상 옵션
