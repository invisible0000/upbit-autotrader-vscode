# LLM 에이전트 워크플로우 가이드

> **📋 개발 문서**: 이 파일은 LLM 에이전트와 사용자가 효율적으로 협업하기 위한 워크플로우 가이드입니다.  
> **⚠️ 주의**: 이 파일은 DB 마이그레이션 대상이 아닌 개발 문서입니다.

## 📖 워크플로우 개요

**제목**: 지표 정보 관리 워크플로우  
**설명**: 사용자 요청 → data_info 편집 → DB 마이그레이션 → 코드 동기화

### 🔄 주요 단계

1. **요구사항 분석 및 data_info 파일 편집**
2. **GUI 마이그레이션 도구로 DB 반영** 
3. **DB → Code 동기화로 variable_definitions.py 생성**
4. **검증 및 배포**

---

## 🚀 Phase 1: 요구사항 분석 및 data_info 편집

### LLM 에이전트 작업

#### 📊 요구사항 분석
**설명**: 사용자 요청을 분석하여 필요한 작업 파악

**단계**:
- 새 지표 추가인지, 기존 지표 수정인지 판단
- 어떤 카테고리에 속하는지 분류
- 필요한 파라미터 타입 확인
- 관련된 data_info 파일들 식별

#### 📁 참조 파일 확인
**설명**: 관련 data_info 파일들을 읽어 현재 상태 파악

**확인할 파일들**:
- `tv_indicator_categories.yaml`
- `tv_parameter_types.yaml`
- `tv_indicator_library.yaml`
- `tv_help_texts.yaml`
- `tv_placeholder_texts.yaml`

#### ✏️ data_info 편집
**설명**: 요구사항에 맞게 data_info 파일들을 편집

**베스트 프랙티스**:
- 기존 패턴과 일관성 유지
- 표준화된 명명 규칙 준수
- 충분한 설명과 예시 포함
- 카테고리 간 관계 고려

---

## 🖥️ Phase 2: GUI 마이그레이션 도구 사용

### 사용자 작업

#### 🚀 GUI 실행
**명령어**: `python trading_variables_DB_migration_main_gui.py`  
**위치**: `upbit_auto_trading/utils/trading_variables/gui_variables_DB_migration_util/`

#### 📝 마이그레이션 단계
1. **DB 선택 탭**에서 settings.sqlite3 로드
2. **마이그레이션 미리보기**에서 변경사항 확인
3. **마이그레이션 실행**으로 DB에 반영
4. **백업 관리**에서 안전성 확인

---

## 🔄 Phase 3: DB → Code 동기화

### 동기화 프로세스

#### 🎯 동기화 탭 접근
**설명**: GUI의 '🔄 DB → Code 동기화' 탭 사용

#### 📋 동기화 단계
1. DB 파일 경로 확인 (자동 연동)
2. 출력 폴더 설정 (기본: utils/trading_variables/)
3. 🔄 동기화 실행 버튼 클릭
4. 진행 상황 모니터링
5. 생성된 `variable_definitions_new_YYYYMMDD_HHMMSS.py` 확인

#### ✅ 출력 검증
**확인 항목**:
- 총 지표 수 확인
- 카테고리별 분포 확인
- 파라미터 정의 완전성 확인
- 도움말 텍스트 품질 확인

---

## 🔍 Phase 4: 검증 및 배포

### 유효성 검사

#### 📊 파일 비교
**설명**: 기존 파일과 새 파일 비교

**도구**:
- GUI의 비교 기능 활용
- 텍스트 에디터 diff 기능
- 코드 검토 도구

#### 🧪 테스트
- **단위 테스트**: 개별 메서드 동작 확인
- **통합 테스트**: 전체 시스템과의 호환성 확인
- **사용자 수용 테스트**: 실제 사용 시나리오 테스트

#### 🚀 배포
- **기존 백업**: 기존 variable_definitions.py 백업
- **파일 교체**: 새 파일로 교체
- **참조 업데이트**: 관련 코드의 참조 업데이트
- **기능 검증**: 전체 시스템 동작 확인

---

## 👥 역할 분담

### 🤖 LLM 에이전트 책임사항

#### 📋 요구사항 분석
- 사용자 요청의 기술적 요구사항 추출
- 기존 시스템과의 호환성 고려
- 필요한 데이터 구조 설계

#### 🏗️ 데이터 구조 설계
- 적절한 카테고리 분류
- 파라미터 타입 및 범위 결정
- 도움말 및 플레이스홀더 작성

#### 📝 파일 편집
- YAML 파일 구조 준수
- 기존 패턴과 일관성 유지
- 완전하고 정확한 정보 제공

#### 🔍 품질 보증
- 편집된 내용의 논리적 일관성 확인
- 누락된 정보 식별 및 보완
- 사용자 친화적인 설명 제공

### 👤 사용자 책임사항

#### 📋 요구사항 명세
- 명확한 요구사항 전달
- 사용 목적 및 맥락 설명
- 우선순위 및 제약사항 명시

#### 🖥️ GUI 운영
- 마이그레이션 GUI 도구 실행
- 미리보기를 통한 변경사항 검토
- 마이그레이션 실행 및 결과 확인

#### ✅ 검증 및 피드백
- 생성된 결과물 검토
- 실제 사용 환경에서 테스트
- 문제점 발견 시 피드백 제공

---

## ⚡ 협업 효율성 증대 방안

### 🎯 토큰 사용량 절약
- 구조화된 데이터로 정보 밀도 증가
- 반복적인 설명 최소화
- 표준화된 패턴으로 예측 가능성 향상

### 💬 명확한 소통
- 명확한 역할 분담
- 단계별 체크포인트
- 표준화된 용어 사용

### 🚀 빠른 반복
- 자동화된 동기화 프로세스
- 실시간 미리보기 기능
- 즉시 적용 가능한 결과물

---

## 📋 일반적인 사용 시나리오

### 🆕 새로운 지표 추가
**설명**: 새로운 기술적 지표 추가

**편집할 파일들**:
- `tv_indicator_categories.yaml` (카테고리 추가)
- `tv_indicator_library.yaml` (지표 정의 추가)
- `tv_parameter_types.yaml` (필요시 새 타입 추가)
- `tv_help_texts.yaml` (도움말 추가)
- `tv_placeholder_texts.yaml` (플레이스홀더 추가)

### ⚙️ 파라미터 수정
**설명**: 기존 지표의 파라미터 수정

**편집할 파일들**:
- `tv_parameter_types.yaml` (타입 정의 수정)
- `tv_help_texts.yaml` (도움말 업데이트)
- `tv_placeholder_texts.yaml` (예시 업데이트)

### 🗂️ 카테고리 재구성
**설명**: 지표 카테고리 체계 개편

**편집할 파일들**:
- `tv_indicator_categories.yaml` (카테고리 구조 변경)
- `tv_indicator_library.yaml` (지표 분류 변경)

### 🌐 다국어 지원
**설명**: 다국어 지원 추가

**편집할 파일들**:
- `tv_help_texts.yaml` (다국어 텍스트 추가)
- `tv_placeholder_texts.yaml` (다국어 예시 추가)

---

## ✅ 품질 관리 가이드라인

### 🔄 일관성
- 명명 규칙 일관성
- 설명 스타일 통일
- 데이터 구조 표준화

### 📋 완전성
- 필수 정보 누락 방지
- 충분한 설명 제공
- 다양한 사용 사례 고려

### 🎯 정확성
- 기술적 정확성 확보
- 실제 사용 가능한 값 범위
- 올바른 카테고리 분류

### 👤 사용성
- 사용자 친화적 설명
- 실용적인 예시 제공
- 직관적인 구조

---

## 🛠️ 트러블슈팅 가이드

### ❌ YAML 구문 오류
**증상**: YAML 파싱 오류

**해결책**:
- 들여쓰기 확인 (공백 사용)
- 특수문자 이스케이프 처리
- 리스트/딕셔너리 구조 검증

### 💥 마이그레이션 실패
**증상**: DB 마이그레이션 실패

**해결책**:
- 스키마 호환성 확인
- 데이터 타입 일치성 검증
- 외래키 제약조건 확인

### 🔄 동기화 문제
**증상**: 코드 동기화 문제

**해결책**:
- DB 연결 상태 확인
- 파일 권한 확인
- 출력 경로 접근성 확인

---

## 📊 성공 지표

### ⚡ 효율성
- 요청부터 완성까지 소요 시간
- LLM 토큰 사용량
- 재작업 횟수

### 🎯 품질
- 생성된 코드의 오류율
- 사용자 만족도
- 시스템 안정성

### 🤝 협업
- 의사소통 명확성
- 역할 분담 효과성
- 학습 곡선 개선

---

*이 문서는 지속적으로 업데이트되는 살아있는 문서입니다.*
