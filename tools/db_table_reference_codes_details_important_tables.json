{
  "analysis_info": {
    "total_tables": 28,
    "analyzed_tables": 3,
    "total_files": 274,
    "suspect_tables": [
      "trading_conditions",
      "chart_variables",
      "chart_layout_templates"
    ],
    "analyzer_version": "Super_v5.0_precise",
    "total_references_found": 73
  },
  "table_references": {
    "trading_conditions": {
      "code_reference_analyzer.py": [
        {
          "line_number": 37,
          "line_content": "'chart_layout_templates', 'chart_variables', 'trading_conditions'",
          "match_type": "quoted_strings_pattern",
          "table_name": "trading_conditions",
          "pattern": "[\"\\']trading_conditions[\"\\']"
        }
      ],
      "code_reference_analyzer_v4.py": [
        {
          "line_number": 46,
          "line_content": "# 'trading_conditions',   # ❌ 제외 (확실히 사용)",
          "match_type": "quoted_strings_pattern",
          "table_name": "trading_conditions",
          "pattern": "[\"\\']trading_conditions[\"\\']"
        },
        {
          "line_number": 59,
          "line_content": "'chart_layout_templates', 'chart_variables', 'trading_conditions'",
          "match_type": "quoted_strings_pattern",
          "table_name": "trading_conditions",
          "pattern": "[\"\\']trading_conditions[\"\\']"
        }
      ],
      "db_analysis_tool.py": [
        {
          "line_number": 132,
          "line_content": "'trading_conditions', 'execution_history', 'chart_layout_templates',",
          "match_type": "quoted_strings_pattern",
          "table_name": "trading_conditions",
          "pattern": "[\"\\']trading_conditions[\"\\']"
        }
      ],
      "upbit_auto_trading\\component_system\\__init__.py": [
        {
          "line_number": 46,
          "line_content": "from .conditions.trading_conditions import (",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        }
      ],
      "upbit_auto_trading\\component_system\\strategies\\pyramiding_example.py": [
        {
          "line_number": 20,
          "line_content": "from ..conditions.trading_conditions import (",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        }
      ],
      "upbit_auto_trading\\config\\database_paths.py": [
        {
          "line_number": 63,
          "line_content": "'trading_conditions': 'settings.sqlite3',",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 209,
          "line_content": "test_tables = ['trading_conditions', 'strategies', 'tv_trading_variables', 'market_data']",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        }
      ],
      "upbit_auto_trading\\ui\\desktop\\screens\\strategy_management\\strategy_maker\\components\\condition_storage.py": [
        {
          "line_number": 47,
          "line_content": "return get_db_connection('trading_conditions')",
          "match_type": "quoted_strings_pattern",
          "table_name": "trading_conditions",
          "pattern": "[\"\\']trading_conditions[\"\\']"
        },
        {
          "line_number": 70,
          "line_content": "if 'trading_conditions' not in existing_tables:",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 81,
          "line_content": "def _create_trading_conditions_table(self, cursor):",
          "match_type": "class_table_names_pattern",
          "table_name": "trading_conditions",
          "pattern": "def\\s+.*trading_conditions.*\\("
        },
        {
          "line_number": 84,
          "line_content": "CREATE TABLE IF NOT EXISTS trading_conditions (",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 110,
          "line_content": "cursor.execute(\"CREATE INDEX IF NOT EXISTS idx_trading_conditions_name ON trading_conditions(name)\")",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 111,
          "line_content": "cursor.execute(\"CREATE INDEX IF NOT EXISTS idx_trading_conditions_active ON trading_conditions(is_active)\")",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 112,
          "line_content": "cursor.execute(\"CREATE INDEX IF NOT EXISTS idx_trading_conditions_category ON trading_conditions(category)\")",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 121,
          "line_content": "CREATE TABLE IF NOT EXISTS trading_conditions (",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 183,
          "line_content": "\"SELECT id, name FROM trading_conditions WHERE id = ?\",",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 191,
          "line_content": "UPDATE trading_conditions SET",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 221,
          "line_content": "\"SELECT id FROM trading_conditions WHERE name = ?\",",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 233,
          "line_content": "UPDATE trading_conditions SET",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 259,
          "line_content": "INSERT INTO trading_conditions (",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 295,
          "line_content": "\"SELECT * FROM trading_conditions WHERE id = ?\",",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 316,
          "line_content": "\"SELECT * FROM trading_conditions WHERE name = ?\",",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 336,
          "line_content": "query = \"SELECT * FROM trading_conditions\"",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 358,
          "line_content": "\"SELECT * FROM trading_conditions WHERE category = ? AND is_active = 1 ORDER BY created_at DESC\",",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 398,
          "line_content": "query = f\"UPDATE trading_conditions SET {', '.join(set_clauses)} WHERE id = ?\"",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 417,
          "line_content": "\"UPDATE trading_conditions SET is_active = 0, updated_at = CURRENT_TIMESTAMP WHERE id = ?\",",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 438,
          "line_content": "SELECT * FROM trading_conditions",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 461,
          "line_content": "cursor.execute(\"SELECT COUNT(*) FROM trading_conditions WHERE is_active = 1\")",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 467,
          "line_content": "FROM trading_conditions",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 476,
          "line_content": "FROM trading_conditions",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        }
      ],
      "upbit_auto_trading\\ui\\desktop\\screens\\strategy_management\\trigger_builder\\components\\core\\condition_storage.py": [
        {
          "line_number": 41,
          "line_content": "return get_db_connection('trading_conditions')",
          "match_type": "quoted_strings_pattern",
          "table_name": "trading_conditions",
          "pattern": "[\"\\']trading_conditions[\"\\']"
        },
        {
          "line_number": 60,
          "line_content": "if 'trading_conditions' not in existing_tables:",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 71,
          "line_content": "def _create_trading_conditions_table(self, cursor):",
          "match_type": "class_table_names_pattern",
          "table_name": "trading_conditions",
          "pattern": "def\\s+.*trading_conditions.*\\("
        },
        {
          "line_number": 74,
          "line_content": "CREATE TABLE IF NOT EXISTS trading_conditions (",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 100,
          "line_content": "cursor.execute(\"CREATE INDEX IF NOT EXISTS idx_trading_conditions_name ON trading_conditions(name)\")",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 101,
          "line_content": "cursor.execute(\"CREATE INDEX IF NOT EXISTS idx_trading_conditions_active ON trading_conditions(is_active)\")",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 102,
          "line_content": "cursor.execute(\"CREATE INDEX IF NOT EXISTS idx_trading_conditions_category ON trading_conditions(category)\")",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 167,
          "line_content": "\"SELECT id, name FROM trading_conditions WHERE id = ?\",",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 175,
          "line_content": "UPDATE trading_conditions SET",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 206,
          "line_content": "\"SELECT id FROM trading_conditions WHERE name = ?\",",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 218,
          "line_content": "UPDATE trading_conditions SET",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 245,
          "line_content": "INSERT INTO trading_conditions (",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 284,
          "line_content": "\"SELECT * FROM trading_conditions WHERE id = ?\",",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 306,
          "line_content": "\"SELECT * FROM trading_conditions WHERE name = ?\",",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 327,
          "line_content": "query = \"SELECT * FROM trading_conditions\"",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 350,
          "line_content": "\"SELECT * FROM trading_conditions WHERE category = ? AND is_active = 1 ORDER BY created_at DESC\",",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 391,
          "line_content": "query = f\"UPDATE trading_conditions SET {', '.join(set_clauses)} WHERE id = ?\"",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 411,
          "line_content": "cursor.execute(\"SELECT id, name FROM trading_conditions WHERE id = ?\", (condition_id,))",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 420,
          "line_content": "cursor.execute(\"DELETE FROM trading_conditions WHERE id = ?\", (condition_id,))",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 442,
          "line_content": "SELECT * FROM trading_conditions",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 466,
          "line_content": "cursor.execute(\"SELECT COUNT(*) FROM trading_conditions WHERE is_active = 1\")",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 472,
          "line_content": "FROM trading_conditions",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        },
        {
          "line_number": 481,
          "line_content": "FROM trading_conditions",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        }
      ],
      "upbit_auto_trading\\utils\\global_db_manager.py": [
        {
          "line_number": 40,
          "line_content": "conn = db_manager.get_connection('trading_conditions')",
          "match_type": "quoted_strings_pattern",
          "table_name": "trading_conditions",
          "pattern": "[\"\\']trading_conditions[\"\\']"
        },
        {
          "line_number": 164,
          "line_content": "'trading_conditions': 'settings',",
          "match_type": "sql_context",
          "table_name": "trading_conditions"
        }
      ]
    },
    "chart_variables": {
      "code_reference_analyzer.py": [
        {
          "line_number": 37,
          "line_content": "'chart_layout_templates', 'chart_variables', 'trading_conditions'",
          "match_type": "quoted_strings_pattern",
          "table_name": "chart_variables",
          "pattern": "[\"\\']chart_variables[\"\\']"
        }
      ],
      "code_reference_analyzer_v4.py": [
        {
          "line_number": 11,
          "line_content": "python code_reference_analyzer_v4.py --tables app_settings,backup_info,chart_variables",
          "match_type": "sql_context",
          "table_name": "chart_variables"
        },
        {
          "line_number": 36,
          "line_content": "'chart_variables',        # ✅ 분석 대상 - 차트 변수",
          "match_type": "quoted_strings_pattern",
          "table_name": "chart_variables",
          "pattern": "[\"\\']chart_variables[\"\\']"
        },
        {
          "line_number": 59,
          "line_content": "'chart_layout_templates', 'chart_variables', 'trading_conditions'",
          "match_type": "quoted_strings_pattern",
          "table_name": "chart_variables",
          "pattern": "[\"\\']chart_variables[\"\\']"
        },
        {
          "line_number": 435,
          "line_content": "python code_reference_analyzer_v4.py --tables \"chart_variables,execution_history\"",
          "match_type": "sql_context",
          "table_name": "chart_variables"
        },
        {
          "line_number": 438,
          "line_content": "app_settings, backup_info, chart_variables,",
          "match_type": "sql_context",
          "table_name": "chart_variables"
        }
      ],
      "db_analysis_tool.py": [
        {
          "line_number": 133,
          "line_content": "'chart_variables', 'backup_info'",
          "match_type": "quoted_strings_pattern",
          "table_name": "chart_variables",
          "pattern": "[\"\\']chart_variables[\"\\']"
        }
      ],
      "upbit_auto_trading\\config\\database_paths.py": [
        {
          "line_number": 68,
          "line_content": "'chart_variables': 'settings.sqlite3',",
          "match_type": "sql_context",
          "table_name": "chart_variables"
        }
      ],
      "upbit_auto_trading\\data_layer\\chart_variable_models.py": [
        {
          "line_number": 50,
          "line_content": "__tablename__ = 'chart_variables'",
          "match_type": "sql_context",
          "table_name": "chart_variables"
        }
      ],
      "upbit_auto_trading\\utils\\global_db_manager.py": [
        {
          "line_number": 41,
          "line_content": "conn = db_manager.get_connection('chart_variables')",
          "match_type": "quoted_strings_pattern",
          "table_name": "chart_variables",
          "pattern": "[\"\\']chart_variables[\"\\']"
        },
        {
          "line_number": 165,
          "line_content": "'chart_variables': 'settings',",
          "match_type": "sql_context",
          "table_name": "chart_variables"
        }
      ]
    },
    "chart_layout_templates": {
      "code_reference_analyzer.py": [
        {
          "line_number": 37,
          "line_content": "'chart_layout_templates', 'chart_variables', 'trading_conditions'",
          "match_type": "quoted_strings_pattern",
          "table_name": "chart_layout_templates",
          "pattern": "[\"\\']chart_layout_templates[\"\\']"
        }
      ],
      "code_reference_analyzer_v4.py": [
        {
          "line_number": 37,
          "line_content": "'chart_layout_templates', # ✅ 분석 대상 - 차트 레이아웃",
          "match_type": "quoted_strings_pattern",
          "table_name": "chart_layout_templates",
          "pattern": "[\"\\']chart_layout_templates[\"\\']"
        },
        {
          "line_number": 59,
          "line_content": "'chart_layout_templates', 'chart_variables', 'trading_conditions'",
          "match_type": "quoted_strings_pattern",
          "table_name": "chart_layout_templates",
          "pattern": "[\"\\']chart_layout_templates[\"\\']"
        }
      ],
      "db_analysis_tool.py": [
        {
          "line_number": 132,
          "line_content": "'trading_conditions', 'execution_history', 'chart_layout_templates',",
          "match_type": "quoted_strings_pattern",
          "table_name": "chart_layout_templates",
          "pattern": "[\"\\']chart_layout_templates[\"\\']"
        }
      ],
      "upbit_auto_trading\\config\\database_paths.py": [
        {
          "line_number": 69,
          "line_content": "'chart_layout_templates': 'settings.sqlite3',",
          "match_type": "sql_context",
          "table_name": "chart_layout_templates"
        }
      ],
      "upbit_auto_trading\\data_layer\\chart_variable_models.py": [
        {
          "line_number": 107,
          "line_content": "__tablename__ = 'chart_layout_templates'",
          "match_type": "sql_context",
          "table_name": "chart_layout_templates"
        }
      ]
    }
  },
  "summary": {
    "trading_conditions": {
      "total_references": 56,
      "affected_files": 9,
      "avg_refs_per_file": 6.22
    },
    "chart_variables": {
      "total_references": 11,
      "affected_files": 6,
      "avg_refs_per_file": 1.83
    },
    "chart_layout_templates": {
      "total_references": 6,
      "affected_files": 5,
      "avg_refs_per_file": 1.2
    }
  }
}