# π“‹ TASK_02: μ”μ²­ μ •κ·ν™” λ° μ²­ν¬ μƒμ„± λ΅μ§

## π― νƒμ¤ν¬ λ©ν‘
- **μ£Όμ” λ©ν‘**: CandleDataProviderμ ν•µμ‹¬ λ΅μ§μΈ μ”μ²­ μ •κ·ν™”μ™€ μ²­ν¬ μƒμ„± λ©”μ»¤λ‹μ¦ κµ¬ν„
- **μ™„λ£ κΈ°μ¤€**:
  - normalize_request: λ¨λ“  νλΌλ―Έν„° μ΅°ν•©μ„ ν‘μ¤€ ν•νƒλ΅ λ³€ν™
  - create_chunks: λ€λ‰ μ”μ²­μ„ μµμ  ν¬κΈ°λ΅ λ¶„ν• 
  - μ—…λΉ„νΈ API μ μ•½μ‚¬ν•­ μ™„λ²½ μ¤€μ (count 1~200, νλΌλ―Έν„° μ΅°ν•© κ·μΉ™)

## π“ ν„μ¬ μƒν™© λ¶„μ„
### λ¬Έμ μ 
1. **νλΌλ―Έν„° μ΅°ν•© λ³µμ΅μ„±**: count, count+to, to+end, end 4κ°€μ§€ μ΅°ν•© κ°κ° λ‹¤λ¥Έ μ²λ¦¬ ν•„μ”
2. **μ²­ν¬ ν¬κΈ° μµμ ν™”**: API μ ν•(200κ°)κ³Ό μ„±λ¥μ„ κ³ λ ¤ν• μµμ  λ¶„ν•  ν•„μ”
3. **μ‹κ°„ λ²”μ„ κ³„μ‚°**: νƒ€μ„ν”„λ μ„λ³„ μ •ν™•ν• μ‹κ°„ κ°„κ²© κ³„μ‚° ν•„μ”

### μ‚¬μ© κ°€λ¥ν• λ¦¬μ†μ¤
- β… **TASK_01 μ™„μ„±**: RequestInfo, ChunkPlan, ChunkInfo λ°μ΄ν„° λ¨λΈ
- β… **TimeUtils**: μ‹κ°„ λ³€ν™ λ° κ³„μ‚° μ ν‹Έλ¦¬ν‹° (6κ° λ©”μ„λ“)
- β… **μ—…λΉ„νΈ API μ¤ν™**: κ³µμ‹ νλΌλ―Έν„° μ μ•½μ‚¬ν•­
- β… **κΈ°μ΅΄ OverlapAnalyzer**: μ‹κ°„ λ²”μ„ λ¶„μ„ κΈ°λ¥

## π”„ μ²΄κ³„μ  μ‘μ—… μ μ°¨ (ν•„μ μ¤€μ)
### 8λ‹¨κ³„ μ‘μ—… μ μ°¨
1. **π“‹ μ‘μ—… ν•­λ© ν™•μΈ**: νƒμ¤ν¬ λ¬Έμ„μ—μ„ κµ¬μ²΄μ  μ‘μ—… λ‚΄μ© νμ•…
2. **π” κ²€ν†  ν›„ μ„Έλ¶€ μ‘μ—… ν•­λ© μƒμ„±**: μ‘μ—…μ„ λ” μ‘μ€ λ‹¨μ„λ΅ λ¶„ν•΄
3. **[-] μ‘μ—…μ¤‘ λ§ν‚Ή**: ν•΄λ‹Ή μ‘μ—… ν•­λ©μ„ `[-]` μƒνƒλ΅ λ³€κ²½
4. **β™οΈ μ‘μ—… ν•­λ© μ§„ν–‰**: μ‹¤μ  μ‘μ—… μν–‰
5. **β… μ‘μ—… λ‚΄μ© ν™•μΈ**: κ²°κ³Όλ¬Ό κ²€μ¦ λ° ν’μ§ ν™•μΈ
6. **π“ μƒμ„Έ μ‘μ—… λ‚΄μ© μ—…λ°μ΄νΈ**: νƒμ¤ν¬ λ¬Έμ„μ— μ§„ν–‰μ‚¬ν•­ κΈ°λ΅
7. **[x] μ‘μ—… μ™„λ£ λ§ν‚Ή**: ν•΄λ‹Ή μ‘μ—… ν•­λ©μ„ μ™„λ£ μƒνƒλ΅ λ³€κ²½
8. **β³ μ‘μ—… μΉμΈ λ€κΈ°**: λ‹¤μ λ‹¨κ³„ μ§„ν–‰ μ „ κ²€ν†  λ° μΉμΈ

### μ‘μ—… μƒνƒ λ§μ»¤
- **[ ]**: λ―Έμ™„λ£ (λ―Έμ‹μ‘)
- **[-]**: μ§„ν–‰ μ¤‘ (ν„μ¬ μ‘μ—…)
- **[x]**: μ™„λ£

## β™οΈ μ‘μ—… κ³„ν
### Phase 1: normalize_request λ©”μ„λ“ κµ¬ν„
- [ ] 4κ°€μ§€ νλΌλ―Έν„° μ΅°ν•© κ²€μ¦ λ΅μ§
- [ ] λ„λ½λ μ‹κ°„ λ²”μ„ κ³„μ‚° (count β†’ to/end λ³€ν™)
- [ ] νλΌλ―Έν„° μ ν¨μ„± κ²€μ¦ (count 1~200, μ‹κ°„ ν•μ‹)
- [ ] RequestInfo κ°μ²΄ μƒμ„± λ° λ°ν™

### Phase 2: create_chunks λ©”μ„λ“ κµ¬ν„
- [ ] μ „μ²΄ μ”μ²­ ν¬κΈ° λ¶„μ„ (μμƒ μΊ”λ“¤ κ°μ κ³„μ‚°)
- [ ] 200κ° λ‹¨μ„ κ³ μ • μ²­ν¬ λ¶„ν•  (μ—…λΉ„νΈ API μµλ€ μ ν• ν™μ©)
- [ ] μ‹κ°„ λ²”μ„λ³„ μ²­ν¬ λ¶„ν•  μ•κ³ λ¦¬μ¦
- [ ] ChunkPlan λ° ChunkInfo λ¦¬μ¤νΈ μƒμ„±

### Phase 3: TimeUtils ν™μ© λ° μ—£μ§€ μΌ€μ΄μ¤ κ²€μ¦
- [ ] TimeUtils λ©”μ„λ“ ν™μ© κ²€μ¦ (κΈ°μ΅΄ κµ¬ν„ ν™μ©)
- [ ] μ—£μ§€ μΌ€μ΄μ¤ ν…μ¤νΈ (μ›”λ§, μ—°λ§, νƒ€μ„ν”„λ μ„ κ²½κ³„)
- [ ] μ‹κ°„ λ²”μ„ κ²½κ³„ μ²λ¦¬ μ •ν™•μ„± ν™•μΈ
- [ ] μ²­ν¬ κ°„ μ‹κ°„ μ—°μ†μ„± κ²€μ¦

### Phase 4: κ²€μ¦ λ° ν…μ¤νΈ
- [ ] κ° νλΌλ―Έν„° μ΅°ν•©λ³„ κΈ°λ³Έ ν…μ¤νΈ μΌ€μ΄μ¤
- [ ] μ²­ν¬ λ¶„ν•  μ •ν™•μ„± κ²€μ¦
- [ ] TimeUtils μ—£μ§€ μΌ€μ΄μ¤ λ™μ‘ ν™•μΈ
- [ ] μ—λ¬ μ²λ¦¬ κ°•ν™”

## π› οΈ κ°λ°ν•  λ„κµ¬
- `candle_data_provider.py`: normalize_request, create_chunks λ©”μ„λ“ κµ¬ν„

## π― μ„±κ³µ κΈ°μ¤€
- β… normalize_request: λ¨λ“  νλΌλ―Έν„° μ΅°ν•© μ •ν™• μ²λ¦¬, RequestInfo μ™„λ²½ μƒμ„±
- β… create_chunks: 200κ° λ‹¨μ„ κ³ μ • λ¶„ν• , ChunkPlan μ •ν™• μƒμ„±
- β… μ—…λΉ„νΈ API μ μ•½μ‚¬ν•­ 100% μ¤€μ (count 1~200, νλΌλ―Έν„° μ΅°ν•©)
- β… νƒ€μ„ν”„λ μ„λ³„ μ •ν™•ν• μ‹κ°„ κ³„μ‚° (μ •λ°€λ„ 1μ΄ μ΄λ‚΄)
- β… OverlapAnalyzer μ—°λ™μΌλ΅ μλ™ μµμ ν™” (API νΈμ¶ μµμ†ν™”)

## π’΅ μ‘μ—… μ‹ μ£Όμμ‚¬ν•­
### API μ μ•½μ‚¬ν•­ μ¤€μ
- **count**: 1~200 λ²”μ„ μ—„κ²© μ¤€μ
- **νλΌλ―Έν„° μ΅°ν•©**: μ—…λΉ„νΈ API κ³µμ‹ κ·μΉ™ μ •ν™• κµ¬ν„
- **μ‹κ°„ ν•μ‹**: ISO 8601 (YYYY-MM-DDTHH:mm:ss) μ •ν™• μ‚¬μ©
- **Rate Limit**: κΈ°μ΅΄ μ‹μ¤ν… ν™μ©, μ¶”κ°€ λ¶€ν• μµμ†ν™”

### μ„±λ¥ μµμ ν™”
- **μ²­ν¬ ν¬κΈ°**: 200κ° κ³ μ • (μ—…λΉ„νΈ API μµλ€ μ ν• ν™μ©)
- **κΈ°μ΅΄ TimeUtils ν™μ©**: μ™„μ „ κµ¬ν„λ μ‹κ°„ κ³„μ‚° λ©”μ„λ“ ν™μ©
- **λ©”λ¨λ¦¬ ν¨μ¨**: λ€λ‰ μ²­ν¬ μƒμ„± μ‹ λ©”λ¨λ¦¬ μ‚¬μ©λ‰ μµμ ν™”
- **μλ™ μµμ ν™”**: OverlapAnalyzerκ°€ μ‹¤μ  API νΈμ¶ μµμ ν™” λ‹΄λ‹Ή

### μ •ν™•μ„± λ³΄μ¥
- **TimeUtils ν™μ©**: μ™„μ „ κµ¬ν„λ μ‹κ°„ κ³„μ‚° λ©”μ„λ“ ν™μ©
- **μ—£μ§€ μΌ€μ΄μ¤**: μ›”λ§, μ—°λ§, νƒ€μ„ν”„λ μ„ κ²½κ³„ λ“± νΉμ μƒν™© ν…μ¤νΈ
- **λ°μ΄ν„° μΌκ΄€μ„±**: μ²­ν¬ κ°„ μ¤‘λ³µ/λ„λ½ λ°©μ§€

## π€ μ¦‰μ‹ μ‹μ‘ν•  μ‘μ—…
1. TASK_01 μ™„μ„± μƒνƒ ν™•μΈ (RequestInfo, ChunkPlan, ChunkInfo λ¨λΈ)
2. μ—…λΉ„νΈ API νλΌλ―Έν„° μ΅°ν•© κ·μΉ™ μƒμ„Έ λ¶„μ„
3. normalize_request λ©”μ„λ“ κΈ°λ³Έ κµ¬μ΅° μƒμ„±

```powershell
# λ°μ΄ν„° λ¨λΈ μ™„μ„± ν™•μΈ
python -c "
from upbit_auto_trading.infrastructure.market_data.candle.candle_models import RequestInfo, ChunkPlan, ChunkInfo
print('β… λ°μ΄ν„° λ¨λΈ λ΅λ”© μ„±κ³µ')
print(f'RequestInfo ν•„λ“: {RequestInfo.__dataclass_fields__.keys()}')
print(f'ChunkPlan ν•„λ“: {ChunkPlan.__dataclass_fields__.keys()}')
print(f'ChunkInfo ν•„λ“: {ChunkInfo.__dataclass_fields__.keys()}')
"

# TimeUtils κΈ°λ¥ ν™•μΈ
python -c "
from upbit_auto_trading.infrastructure.market_data.candle.time_utils import TimeUtils
print('β… TimeUtils μ‚¬μ© κ°€λ¥ λ©”μ„λ“:')
for method in dir(TimeUtils):
    if not method.startswith('_'):
        print(f'  - {method}')
"
```

---
**λ‹¤μ μ—μ΄μ „νΈ μ‹μ‘μ **: Phase 1 - normalize_request λ©”μ„λ“ κµ¬ν„λ¶€ν„° μ‹μ‘
**μμ΅΄μ„±**: TASK_01 (λ°μ΄ν„° λ¨λΈ) μ™„λ£ ν•„μ
**ν›„μ† νƒμ¤ν¬**: TASK_03 (μμ°¨μ²λ¦¬+μ—°μ†μ„± λ΅μ§)
