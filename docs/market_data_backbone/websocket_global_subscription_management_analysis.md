# WebSocket ì „ì—­ êµ¬ë… ê´€ë¦¬ ì‹œìŠ¤í…œ ë¶„ì„ ë° ì„¤ê³„

## ğŸ“‹ ë¬¸ì œ ìƒí™© ë¶„ì„

### ğŸ¯ í•µì‹¬ ë¬¸ì œ
1. **ì—…ë¹„íŠ¸ WebSocket íŠ¹ì„±**: í‹°ì¼“ë³„ ë¶„ë¦¬ ê´€ë¦¬ê°€ ì•„ë‹Œ ë‹¨ì¼ ì—°ê²°ì˜ í†µí•© êµ¬ë… ê´€ë¦¬
2. **GUI ë‹¤ì¤‘ ì»´í¬ë„ŒíŠ¸**: ì°¨íŠ¸ë·°ì–´ì˜ ì½”ì¸ë¦¬ìŠ¤íŠ¸, í˜¸ê°€ì°½, ì°¨íŠ¸ê°€ ê°ê° ë…ë¦½ì ìœ¼ë¡œ WebSocket ìš”ì²­
3. **ë™ì  êµ¬ë… ë³€ê²½**: ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ì— ë”°ë¥¸ ì‹¤ì‹œê°„ êµ¬ë… ëª©ë¡ ë³€ê²½ í•„ìš”
4. **êµ¬ë… ì •ë¦¬ ë¬¸ì œ**: ì»´í¬ë„ŒíŠ¸ ì¢…ë£Œ ì‹œ í•´ë‹¹ êµ¬ë…ì˜ ìë™ ì •ë¦¬ í•„ìš”

### ğŸ”„ ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ì°¨íŠ¸ë·° íƒ­ í´ë¦­ (ì´ˆê¸° ìƒíƒœ)
```
ê¸°ë³¸ê°’: KRW-BTC, 1ì‹œê°„ë´‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì»´í¬ë„ŒíŠ¸         ìš”ì²­                ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¼ ëª©ë¡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì½”ì¸ë¦¬ìŠ¤íŠ¸       KRW ë§ˆì¼“ ëª¨ë“  ì½”ì¸ í˜„ì¬ê°€   â†’ KRW ë§ˆì¼“ í˜„ì¬ê°€ (ticker)
í˜¸ê°€ì°½           KRW-BTC í˜¸ê°€             â†’ KRW-BTC í˜¸ê°€ (orderbook)
ì°¨íŠ¸             KRW-BTC 1ì‹œê°„ë´‰ ìº”ë“¤       â†’ KRW-BTC 1ì‹œê°„ë´‰ (minute60)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… í†µí•© êµ¬ë… ìƒíƒœ:
   - ticker: [KRW-*] (ì „ì²´ KRW ë§ˆì¼“)
   - orderbook: [KRW-BTC]
   - minute60: [KRW-BTC]
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ì½”ì¸ë¦¬ìŠ¤íŠ¸ì—ì„œ KRW-ETH í´ë¦­
```
ë³€ê²½: í˜¸ê°€ì°½ê³¼ ì°¨íŠ¸ê°€ ETHë¡œ ì „í™˜
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì»´í¬ë„ŒíŠ¸         ë³€ê²½ì‚¬í•­                ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¼ ëª©ë¡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì½”ì¸ë¦¬ìŠ¤íŠ¸       ë³€ê²½ì—†ìŒ (KRW ë§ˆì¼“ ìœ ì§€)   â†’ KRW ë§ˆì¼“ í˜„ì¬ê°€ (ticker)
í˜¸ê°€ì°½           KRW-ETHë¡œ ë³€ê²½            â†’ KRW-ETH í˜¸ê°€ (orderbook)
ì°¨íŠ¸             KRW-ETH 1ì‹œê°„ë´‰ìœ¼ë¡œ ë³€ê²½   â†’ KRW-ETH 1ì‹œê°„ë´‰ (minute60)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… í†µí•© êµ¬ë… ìƒíƒœ:
   - ticker: [KRW-*] (ì „ì²´ KRW ë§ˆì¼“)
   - orderbook: [KRW-ETH] (KRW-BTC â†’ KRW-ETH)
   - minute60: [KRW-ETH] (KRW-BTC â†’ KRW-ETH)

âš ï¸ ì¤‘ìš”: KRW-BTC ê´€ë ¨ ìº”ë“¤ê³¼ í˜¸ê°€ëŠ” ìë™ ì •ë¦¬ë˜ì–´ì•¼ í•¨(ì½”ì¸ ë¦¬ìŠ¤íŠ¸ í´ë¦­ì— ëŒ€ì‘)
```

#### ì‹œë‚˜ë¦¬ì˜¤ 3: ë§ˆì¼“ì„ BTCë¡œ ë³€ê²½
```
ë³€ê²½: ì½”ì¸ë¦¬ìŠ¤íŠ¸ ë§ˆì¼“ ë³€ê²½ (ì½”ì¸ ë¯¸í´ë¦­)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì»´í¬ë„ŒíŠ¸         ë³€ê²½ì‚¬í•­                ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¼ ëª©ë¡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì½”ì¸ë¦¬ìŠ¤íŠ¸       BTC ë§ˆì¼“ ì „ì²´ ì½”ì¸        â†’ BTC ë§ˆì¼“ í˜„ì¬ê°€ (ticker)
í˜¸ê°€ì°½           ë³€ê²½ì—†ìŒ (KRW-ETH ìœ ì§€)   â†’ KRW-ETH í˜¸ê°€ (orderbook)
ì°¨íŠ¸             ë³€ê²½ì—†ìŒ (KRW-ETH ìœ ì§€)   â†’ KRW-ETH 1ì‹œê°„ë´‰ (minute60)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… í†µí•© êµ¬ë… ìƒíƒœ:
   - ticker: [BTC-*] (KRW-* â†’ BTC-*)
   - orderbook: [KRW-ETH] (ìœ ì§€)
   - minute60: [KRW-ETH] (ìœ ì§€)

âš ï¸ ì¤‘ìš”: KRW ë§ˆì¼“ ticker êµ¬ë…ì€ ìë™ ì •ë¦¬ë˜ì–´ì•¼ í•¨(ì½”ì¸ ë¦¬ìŠ¤íŠ¸ ê¸°ëŠ¥, ì½¤ë³´ë°•ìŠ¤ ë³€ê²½ì— ëŒ€ì‘)
```

### ğŸš¨ í•µì‹¬ ê¸°ìˆ ì  ë„ì „ê³¼ì œ

#### 1. **ì—…ë¹„íŠ¸ WebSocket ì œì•½ì‚¬í•­**
```yaml
ì—…ë¹„íŠ¸_WebSocket_íŠ¹ì„±:
  - í‹°ì¼“ë³„_ë¶„ë¦¬ê´€ë¦¬: false  # í‹°ì¼“ì€ ë‹¨ìˆœ ì‹ë³„ì, êµ¬ë… ë¶„ë¦¬ ì•ˆë¨
  - í†µí•©_êµ¬ë…ê´€ë¦¬: true     # í•˜ë‚˜ì˜ ì—°ê²°ì—ì„œ ëª¨ë“  êµ¬ë… í†µí•© ê´€ë¦¬
  - ë®ì–´ì“°ê¸°_ì›ë¦¬: true     # ìƒˆ êµ¬ë… ì‹œ ê¸°ì¡´ êµ¬ë… ëŒ€ì²´
  - ë‹¤ì¤‘_ë°ì´í„°íƒ€ì…: true   # ticker, orderbook, candle ë™ì‹œ êµ¬ë… ê°€ëŠ¥

ì œì•½ì‚¬í•­:
  - ê°_ìš”ì²­ë§ˆë‹¤_ì „ì²´_êµ¬ë…ëª©ë¡_ì¬ì „ì†¡_í•„ìš”
  - ë¶€ë¶„_êµ¬ë…í•´ì œ_ë¶ˆê°€ëŠ¥ (ì „ì²´ ì¬êµ¬ë… í•„ìš”)
  - ì—°ê²°_ì•ˆì •ì„±_ì˜ì¡´ì„±_ë†’ìŒ
```

#### 2. **ë‹¤ì¤‘ í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš© ì‹œ êµ¬ë… ì¶©ëŒ**
```python
# ë¬¸ì œ ìƒí™© ì˜ˆì‹œ
websocket_client_1.subscribe_ticker(["KRW-BTC"])     # êµ¬ë… 1
websocket_client_2.subscribe_ticker(["KRW-ETH"])     # êµ¬ë… 2 (êµ¬ë… 1 ë®ì–´ì“°ê¸°ë¨!)

# ê²°ê³¼: KRW-BTC êµ¬ë…ì´ ì‚¬ë¼ì§€ê³  KRW-ETHë§Œ êµ¬ë…ë¨
# ì´ëŠ” ì—…ë¹„íŠ¸ WebSocketì˜ ë®ì–´ì“°ê¸° íŠ¹ì„± ë•Œë¬¸ì„
```

#### 3. **Market Data Backboneê³¼ì˜ ë³µì¡í•œ ìƒí˜¸ì‘ìš©**
```yaml
í˜„ì¬_ì•„í‚¤í…ì²˜:
  SmartDataProvider:
    - ì—­í• : í†µí•© ë°ì´í„° ì œê³µ ì¸í„°í˜ì´ìŠ¤
    - ì˜ì¡´ì„±: SmartRouter (ì‹¤ì œ API í†µì‹ )

  SmartRouter:
    - ì—­í• : ìµœì  ì±„ë„ ì„ íƒ (REST vs WebSocket)
    - ì˜ì¡´ì„±: REST/WebSocket í´ë¼ì´ì–¸íŠ¸ë“¤

  ë¬¸ì œì :
    - WebSocket_êµ¬ë…_ìƒíƒœê°€_SmartRouterì—_ë¶„ì‚°
    - ì‹¤ì‹œê°„_êµ¬ë…ê³¼_ì¼íšŒì„±_ìš”ì²­ì˜_ê²½ê³„_ëª¨í˜¸
    - êµ¬ë…_ì •ë¦¬_ì‹œì _íŒë‹¨_ì–´ë ¤ì›€
```

## ğŸ—ï¸ í•´ê²° ë°©ì•ˆ ì„¤ê³„

### ğŸ“ ì„¤ê³„ ì˜µì…˜ ë¶„ì„

#### ì˜µì…˜ 1: Market Data Backbone ìˆœìˆ˜ REST ì „ìš©
```yaml
ì¥ì :
  - êµ¬í˜„_ë³µì¡ë„_ìµœì†Œí™”
  - WebSocket_êµ¬ë…_ì¶©ëŒ_ë¬¸ì œ_ì—†ìŒ
  - ê°_ì»´í¬ë„ŒíŠ¸_ë…ë¦½ì _API_ì‚¬ìš©

ë‹¨ì :
  - ì‹¤ì‹œê°„ì„±_ë¶€ì¡± (íŠ¹íˆ í˜„ì¬ê°€, í˜¸ê°€)
  - API_Rate_Limit_ë¶€ë‹´_ì¦ê°€
  - ë„¤íŠ¸ì›Œí¬_íŠ¸ë˜í”½_ì¦ê°€
  - ì‚¬ìš©ì_ê²½í—˜_ì €í•˜

ì ìš©_ë²”ìœ„:
  - MarketDataBackbone: ìº”ë“¤ ë°ì´í„°ë§Œ ê´€ë¦¬
  - UI_ì»´í¬ë„ŒíŠ¸: ê°ì WebSocket í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš©
  - êµ¬ë…_ê´€ë¦¬: ì „ì—­ GlobalSubscriptionManager í•„ìš”
```

#### ì˜µì…˜ 2: í†µí•© WebSocket ê´€ë¦¬ (ê¶Œì¥)
```yaml
ì¥ì :
  - ìµœê³ ì˜_ì‹¤ì‹œê°„ì„±_ë³´ì¥
  - WebSocket_êµ¬ë…_íš¨ìœ¨ì„±_ê·¹ëŒ€í™”
  - í†µí•©ëœ_êµ¬ë…_ê´€ë¦¬
  - API_Rate_Limit_ìµœì í™”

ë‹¨ì :
  - êµ¬í˜„_ë³µì¡ë„_ì¦ê°€
  - GlobalSubscriptionManager_ê°œë°œ_í•„ìš”
  - ì»´í¬ë„ŒíŠ¸ê°„_ì˜ì¡´ì„±_ì¦ê°€

í•µì‹¬_êµ¬ì„±ìš”ì†Œ:
  - GlobalWebSocketSubscriptionManager (ì „ì—­ êµ¬ë… ê´€ë¦¬)
  - ComponentSubscriptionTracker (ì»´í¬ë„ŒíŠ¸ë³„ êµ¬ë… ì¶”ì )
  - AutoCleanupService (ìë™ ì •ë¦¬ ì„œë¹„ìŠ¤)
```

### ğŸ¯ ê¶Œì¥ ì•„í‚¤í…ì²˜: í†µí•© WebSocket ê´€ë¦¬

#### í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

##### 1. GlobalWebSocketSubscriptionManager
```python
class GlobalWebSocketSubscriptionManager:
    """ì „ì—­ WebSocket êµ¬ë… ê´€ë¦¬ì

    ğŸ¯ í•µì‹¬ ì±…ì„:
    - í”„ë¡œê·¸ë¨ ì „ì²´ì˜ WebSocket êµ¬ë… í†µí•© ê´€ë¦¬
    - ì»´í¬ë„ŒíŠ¸ë³„ êµ¬ë… ìš”ì²­ ë³‘í•©
    - ìë™ êµ¬ë… ì •ë¦¬
    - êµ¬ë… ì¶©ëŒ ë°©ì§€
    """

    def __init__(self):
        # ì „ì—­ êµ¬ë… ìƒíƒœ (ë°ì´í„°íƒ€ì…ë³„)
        self.global_subscriptions = {
            "ticker": set(),      # í˜„ì¬ê°€ êµ¬ë… ì‹¬ë³¼ë“¤
            "orderbook": set(),   # í˜¸ê°€ êµ¬ë… ì‹¬ë³¼ë“¤
            "trade": set(),       # ì²´ê²° êµ¬ë… ì‹¬ë³¼ë“¤
            "minute1": set(),     # 1ë¶„ë´‰ êµ¬ë… ì‹¬ë³¼ë“¤
            "minute60": set(),    # 1ì‹œê°„ë´‰ êµ¬ë… ì‹¬ë³¼ë“¤
        }

        # ì»´í¬ë„ŒíŠ¸ë³„ êµ¬ë… ì¶”ì 
        self.component_subscriptions = {}  # {component_id: {data_type: symbols}}

        # ì‹¤ì œ WebSocket í´ë¼ì´ì–¸íŠ¸ (ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤)
        self.websocket_client = None

    async def subscribe(self, component_id: str, data_type: str, symbols: List[str]):
        """ì»´í¬ë„ŒíŠ¸ì˜ êµ¬ë… ìš”ì²­ ì²˜ë¦¬"""

    async def unsubscribe(self, component_id: str, data_type: str, symbols: List[str]):
        """ì»´í¬ë„ŒíŠ¸ì˜ êµ¬ë… í•´ì œ ìš”ì²­ ì²˜ë¦¬"""

    async def cleanup_component(self, component_id: str):
        """ì»´í¬ë„ŒíŠ¸ ì¢…ë£Œ ì‹œ ê´€ë ¨ êµ¬ë… ëª¨ë‘ ì •ë¦¬"""

    async def _rebuild_websocket_subscriptions(self):
        """ì „ì—­ êµ¬ë… ìƒíƒœë¥¼ WebSocketì— ë°˜ì˜ (ì „ì²´ ì¬êµ¬ë…)"""
```

##### 2. ComponentSubscriptionTracker
```python
class ComponentSubscriptionTracker:
    """ì»´í¬ë„ŒíŠ¸ë³„ êµ¬ë… ì¶”ì ê¸°

    ğŸ¯ í•µì‹¬ ì±…ì„:
    - ê° UI ì»´í¬ë„ŒíŠ¸ì˜ êµ¬ë… ìƒíƒœ ì¶”ì 
    - ì»´í¬ë„ŒíŠ¸ ìƒëª…ì£¼ê¸°ì™€ ì—°ë™
    - ìë™ ì •ë¦¬ íŠ¸ë¦¬ê±°
    """

    def register_component(self, component_id: str, component_type: str):
        """ì»´í¬ë„ŒíŠ¸ ë“±ë¡ (ìƒì„± ì‹œ)"""

    def unregister_component(self, component_id: str):
        """ì»´í¬ë„ŒíŠ¸ í•´ì œ (ì¢…ë£Œ ì‹œ)"""

    def update_component_subscriptions(self, component_id: str, subscriptions: Dict):
        """ì»´í¬ë„ŒíŠ¸ êµ¬ë… ìƒíƒœ ì—…ë°ì´íŠ¸"""
```

##### 3. SmartDataProvider Integration
```python
class SmartDataProvider:
    """ê¸°ì¡´ SmartDataProvider í™•ì¥

    ğŸ¯ í™•ì¥ ì‚¬í•­:
    - GlobalWebSocketSubscriptionManager í†µí•©
    - ì‹¤ì‹œê°„ vs ì¼íšŒì„± ìš”ì²­ ëª…í™•í•œ ë¶„ë¦¬
    - êµ¬ë… ìƒëª…ì£¼ê¸° ìë™ ê´€ë¦¬
    """

    def __init__(self):
        # ê¸°ì¡´ ì´ˆê¸°í™”...
        self.global_ws_manager = GlobalWebSocketSubscriptionManager()

    async def subscribe_realtime(self, component_id: str, data_type: str, symbols: List[str]):
        """ì‹¤ì‹œê°„ êµ¬ë… ìš”ì²­ (ì»´í¬ë„ŒíŠ¸ë³„ ì¶”ì  í¬í•¨)"""
        return await self.global_ws_manager.subscribe(component_id, data_type, symbols)

    async def get_snapshot(self, data_type: str, symbols: List[str]):
        """ì¼íšŒì„± ìŠ¤ëƒ…ìƒ· ìš”ì²­ (êµ¬ë… ì—†ìŒ)"""
        return await self.smart_router.get_data(...)

    async def cleanup_component_subscriptions(self, component_id: str):
        """ì»´í¬ë„ŒíŠ¸ ì¢…ë£Œ ì‹œ êµ¬ë… ì •ë¦¬"""
        return await self.global_ws_manager.cleanup_component(component_id)
```

## ğŸ”¬ ê¸°ìˆ ì  êµ¬í˜„ ê°€ëŠ¥ì„± ë¶„ì„

### âœ… í˜„ì¬ WebSocket v5 ì‹œìŠ¤í…œì˜ ì§€ì› ëŠ¥ë ¥

#### 1. **SubscriptionManager v4.0 í™œìš©**
```python
# í˜„ì¬ SubscriptionManagerì˜ í•µì‹¬ ê¸°ëŠ¥
from upbit_auto_trading.infrastructure.external_apis.upbit.websocket_v5.subscription_manager import SubscriptionManager

# ğŸ¯ í™œìš© ê°€ëŠ¥í•œ ê¸°ëŠ¥ë“¤:
subscription_manager = SubscriptionManager()

# ì‹¤ì‹œê°„ êµ¬ë… (ì»´í¬ë„ŒíŠ¸ë³„ ì¶”ì  ê°€ëŠ¥)
await subscription_manager.request_realtime_data(
    symbols=["KRW-BTC", "KRW-ETH"],
    data_type="ticker",
    callback=callback_function,
    client_id="chart_viewer_coinlist",  # ğŸ‘ˆ ì»´í¬ë„ŒíŠ¸ IDë¡œ í™œìš© ê°€ëŠ¥
    connection_type="public"
)

# êµ¬ë… ì¤‘ë‹¨ (ì»´í¬ë„ŒíŠ¸ë³„)
await subscription_manager.stop_realtime_data(
    symbols=["KRW-BTC"],
    data_type="ticker",
    client_id="chart_viewer_coinlist"
)

# ì „ì²´ êµ¬ë… í•´ì œ (ì»´í¬ë„ŒíŠ¸ ì¢…ë£Œ ì‹œ)
await subscription_manager.unsubscribe_all(connection_type="public")
```

#### 2. **WebSocket v5 í´ë¼ì´ì–¸íŠ¸ì˜ Rate Limiter í†µí•©**
```python
# ì´ë¯¸ êµ¬í˜„ëœ ë™ì  Rate Limiter í™œìš©
from upbit_auto_trading.infrastructure.external_apis.upbit.websocket_v5.upbit_websocket_public_client import UpbitWebSocketPublicV5

# ğŸš€ Rate Limiterê°€ í†µí•©ëœ WebSocket í´ë¼ì´ì–¸íŠ¸
ws_client = UpbitWebSocketPublicV5(enable_dynamic_rate_limiter=True)

# GlobalSubscriptionManagerì—ì„œ í™œìš© ê°€ëŠ¥
global_manager = GlobalWebSocketSubscriptionManager(websocket_client=ws_client)
```

### ğŸš§ í•„ìš”í•œ ì¶”ê°€ ê°œë°œ ì‚¬í•­

#### 1. **GlobalWebSocketSubscriptionManager êµ¬í˜„**
```yaml
ê°œë°œ_í•„ìš”ë„: HIGH
ë³µì¡ë„: MEDIUM
ì˜ˆìƒ_ê°œë°œì‹œê°„: 3-5ì¼

í•µì‹¬_ê¸°ëŠ¥:
  - ì „ì—­ êµ¬ë… ìƒíƒœ í†µí•© ê´€ë¦¬
  - ì»´í¬ë„ŒíŠ¸ë³„ êµ¬ë… ì¶”ì 
  - ìë™ êµ¬ë… ë³‘í•©/ì •ë¦¬
  - WebSocket v5 í´ë¼ì´ì–¸íŠ¸ ì—°ë™
```

#### 2. **ComponentLifecycleManager êµ¬í˜„**
```yaml
ê°œë°œ_í•„ìš”ë„: MEDIUM
ë³µì¡ë„: LOW
ì˜ˆìƒ_ê°œë°œì‹œê°„: 1-2ì¼

í•µì‹¬_ê¸°ëŠ¥:
  - UI ì»´í¬ë„ŒíŠ¸ ìƒëª…ì£¼ê¸° ì¶”ì 
  - ì»´í¬ë„ŒíŠ¸ ì¢…ë£Œ ì‹œ ìë™ ì •ë¦¬
  - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€
```

#### 3. **SmartDataProvider ì¸í„°í˜ì´ìŠ¤ í™•ì¥**
```yaml
ê°œë°œ_í•„ìš”ë„: HIGH
ë³µì¡ë„: MEDIUM
ì˜ˆìƒ_ê°œë°œì‹œê°„: 2-3ì¼

í•µì‹¬_ê¸°ëŠ¥:
  - subscribe_realtime() ë©”ì„œë“œ ì¶”ê°€
  - get_snapshot() ë©”ì„œë“œ ëª…í™•í™”
  - component_id ê¸°ë°˜ êµ¬ë… ê´€ë¦¬
  - ê¸°ì¡´ API í˜¸í™˜ì„± ìœ ì§€
```

## ğŸ“Š ìµœì¢… ê¶Œì¥ì‚¬í•­

### ğŸ¯ ê¶Œì¥ êµ¬í˜„ ë°©ì•ˆ: **ì˜µì…˜ 2 (í†µí•© WebSocket ê´€ë¦¬)**

#### í•µì‹¬ ì´ìœ :
1. **ì‹¤ì‹œê°„ì„± ë³´ì¥**: ì°¨íŠ¸ë·°ì–´ì˜ í•µì‹¬ ìš”êµ¬ì‚¬í•­ ì¶©ì¡±
2. **ê¸°ì¡´ ì¸í”„ë¼ í™œìš©**: WebSocket v5ì™€ SubscriptionManager v4.0 ìµœëŒ€ í™œìš©
3. **í™•ì¥ì„±**: í–¥í›„ ë” ë§ì€ ì‹¤ì‹œê°„ ê¸°ëŠ¥ ì§€ì› ê°€ëŠ¥
4. **ì„±ëŠ¥ ìµœì í™”**: Rate Limiter í†µí•©ìœ¼ë¡œ API íš¨ìœ¨ì„± ê·¹ëŒ€í™”

#### êµ¬í˜„ ë‹¨ê³„:
```yaml
Phase_1: GlobalWebSocketSubscriptionManager í•µì‹¬ êµ¬í˜„ (1ì£¼)
  - ì „ì—­ êµ¬ë… ìƒíƒœ ê´€ë¦¬
  - ê¸°ë³¸ êµ¬ë…/í•´ì œ ê¸°ëŠ¥
  - WebSocket v5 í´ë¼ì´ì–¸íŠ¸ ì—°ë™

Phase_2: Component ìƒëª…ì£¼ê¸° ê´€ë¦¬ (3ì¼)
  - ComponentLifecycleManager êµ¬í˜„
  - ìë™ ì •ë¦¬ ë©”ì»¤ë‹ˆì¦˜
  - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€

Phase_3: SmartDataProvider í†µí•© (1ì£¼)
  - ì‹¤ì‹œê°„/ìŠ¤ëƒ…ìƒ· API ë¶„ë¦¬
  - ê¸°ì¡´ API í˜¸í™˜ì„± ìœ ì§€
  - ì „ì²´ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸

Phase_4: UI ì»´í¬ë„ŒíŠ¸ ì—°ë™ (1ì£¼)
  - ì°¨íŠ¸ë·°ì–´ ì»´í¬ë„ŒíŠ¸ ì—°ë™
  - ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ ê²€ì¦
  - ì„±ëŠ¥ ìµœì í™”
```

### ğŸ ì˜ˆìƒ íš¨ê³¼:
1. **ê°œë°œì ê²½í—˜ ê°œì„ **: ê°„ë‹¨í•œ APIë¡œ ë³µì¡í•œ WebSocket êµ¬ë… ê´€ë¦¬
2. **ì„±ëŠ¥ í–¥ìƒ**: ì „ì—­ êµ¬ë… ìµœì í™”ë¡œ ë¶ˆí•„ìš”í•œ ì¤‘ë³µ êµ¬ë… ì œê±°
3. **ì•ˆì •ì„± í–¥ìƒ**: ìë™ ì •ë¦¬ë¡œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë° ì¢€ë¹„ êµ¬ë… ë°©ì§€
4. **ìœ ì§€ë³´ìˆ˜ì„±**: ì¤‘ì•™ì§‘ì¤‘ì‹ ê´€ë¦¬ë¡œ ë””ë²„ê¹… ë° ëª¨ë‹ˆí„°ë§ ìš©ì´

### âš ï¸ ì£¼ì˜ì‚¬í•­:
1. **ë³µì¡ë„ ì¦ê°€**: ì´ˆê¸° êµ¬í˜„ ë³µì¡ë„ ë†’ìŒ (í•˜ì§€ë§Œ ì¥ê¸°ì  ì´ë“)
2. **ì˜ì¡´ì„± ê´€ë¦¬**: ì»´í¬ë„ŒíŠ¸ê°„ ì˜ì¡´ì„± ì‹ ì¤‘í•œ ì„¤ê³„ í•„ìš”
3. **í…ŒìŠ¤íŠ¸ ì „ëµ**: ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤ì— ëŒ€í•œ ì² ì €í•œ í…ŒìŠ¤íŠ¸ í•„ìš”

## ğŸš€ ê²°ë¡ 

**í˜„ì¬ Market Data Backboneì˜ ê¸°ë°˜ êµ¬ì¡°ëŠ” í›Œë¥­í•˜ë©°, GlobalWebSocketSubscriptionManager ì¶”ê°€ êµ¬í˜„ì„ í†µí•´ ì™„ì „í•œ í†µí•© ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.**

ì´ëŠ” ê¸°ì¡´ SmartRouterì™€ SubscriptionManager v4.0ì˜ ê°•ë ¥í•œ ê¸°ëŠ¥ì„ í™œìš©í•˜ë©´ì„œë„, ì‹¤ì œ GUI ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³µì¡í•œ êµ¬ë… ê´€ë¦¬ ìš”êµ¬ì‚¬í•­ì„ ì™„ë²½í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ì‹¤í˜„ ê°€ëŠ¥í•œ ë°©ì•ˆì…ë‹ˆë‹¤.
