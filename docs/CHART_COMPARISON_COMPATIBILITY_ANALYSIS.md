# ğŸ“Š ì°¨íŠ¸ ì§€í‘œ ë¹„êµ í˜¸í™˜ì„± ë¶„ì„

## ğŸ¯ **í•µì‹¬ ì•„ì´ë””ì–´: ë¹„êµ ê°€ëŠ¥ì„± ê¸°ì¤€ ì¹´í…Œê³ ë¦¬ ì¬ì„¤ê³„**

### **ë¬¸ì œ ì¸ì‹**
- **ì˜¤ë²„ë ˆì´ ì§€í‘œ**: ëª¨ë“  ì§€í‘œê°€ ì›í™” ë‹¨ìœ„ë¡œ ë¹„êµ ê°€ëŠ¥
- **ì„œë¸Œí”Œë¡¯ ì§€í‘œ**: ìŠ¤ì¼€ì¼ê³¼ ì˜ë¯¸ê°€ ë‹¬ë¼ì„œ ë¹„êµ ë¶ˆê°€ëŠ¥í•œ ê²½ìš° å¤š

---

## ğŸ“ˆ **ë¹„êµ ê°€ëŠ¥ì„± ë§¤íŠ¸ë¦­ìŠ¤**

### **âœ… ì™„ì „ ë¹„êµ ê°€ëŠ¥**

#### **1. ì˜¤ë²„ë ˆì´ ê·¸ë£¹ (ì›í™” ë‹¨ìœ„)**
| ì§€í‘œ | ì˜ˆì‹œ ê°’ | ë¹„êµ ê°€ëŠ¥ ëŒ€ìƒ |
|------|---------|---------------|
| SMA | 50,000ì› | EMA, ë³¼ë¦°ì €ë°´ë“œ, í˜„ì¬ê°€ |
| EMA | 51,000ì› | SMA, ë³¼ë¦°ì €ë°´ë“œ, í˜„ì¬ê°€ |
| í˜„ì¬ê°€ | 50,500ì› | ëª¨ë“  ì˜¤ë²„ë ˆì´ ì§€í‘œ |
| VWAP | 49,800ì› | ëª¨ë“  ì˜¤ë²„ë ˆì´ ì§€í‘œ |

**ğŸ’¡ íŠ¹ì§•**: ëª¨ë‘ ì›í™” ìŠ¤ì¼€ì¼ì´ë¯€ë¡œ ì§ì ‘ í¬ê¸° ë¹„êµ ê°€ëŠ¥

#### **2. í¼ì„¼íŠ¸ ê·¸ë£¹ (0-100% ë²”ìœ„)**
| ì§€í‘œ | ì˜ˆì‹œ ê°’ | ë¹„êµ ê°€ëŠ¥ ëŒ€ìƒ |
|------|---------|---------------|
| RSI | 65% | STOCH, CCI, Williams %R, MFI |
| STOCH | 75% | RSI, CCI, Williams %R, MFI |
| MFI | 45% | RSI, STOCH, CCI, Williams %R |

**ğŸ’¡ íŠ¹ì§•**: ëª¨ë‘ 0-100% ì •ê·œí™”ë˜ì–´ ê³¼ë§¤ìˆ˜/ê³¼ë§¤ë„ ìˆ˜ì¤€ ë¹„êµ ê°€ëŠ¥

#### **3. ê±°ë˜ëŸ‰ ê·¸ë£¹ (ì£¼/ì½”ì¸ ë‹¨ìœ„)**
| ì§€í‘œ | ì˜ˆì‹œ ê°’ | ë¹„êµ ê°€ëŠ¥ ëŒ€ìƒ |
|------|---------|---------------|
| VOLUME | 1,000,000ì£¼ | ê±°ë˜ëŸ‰ ì´ë™í‰ê·  |
| VOLUME_MA | 850,000ì£¼ | í˜„ì¬ ê±°ë˜ëŸ‰ |

**ğŸ’¡ íŠ¹ì§•**: ê±°ë˜ëŸ‰ ë‹¨ìœ„ê°€ ë™ì¼í•˜ë¯€ë¡œ í¬ê¸° ë¹„êµ ê°€ëŠ¥

---

### **ğŸ”¶ ì¡°ê±´ë¶€ ë¹„êµ ê°€ëŠ¥**

#### **4. ì‹ í˜¸ì„  ê·¸ë£¹ (ì¤‘ì•™ì„  ê¸°ì¤€, ìƒì´í•œ ë²”ìœ„)**
| ì§€í‘œ | ì¼ë°˜ì  ë²”ìœ„ | íŠ¹ì§• | ë¹„êµ ì¡°ê±´ |
|------|-------------|------|----------|
| MACD | -500 ~ +500 | ë¹ ë¥¸ ì‹ í˜¸ | ê°™ì€ ê¸°ê°„ ì„¤ì • ì‹œë§Œ |
| AO | -1000 ~ +1000 | ëŠë¦° ì‹ í˜¸ | ê³„ì‚° ë°©ì‹ ê³ ë ¤ í•„ìš” |
| ROC | -10% ~ +10% | ë¹„ìœ¨ ê¸°ë°˜ | í¼ì„¼íŠ¸ ë³€í™˜ ì‹œ ê°€ëŠ¥ |

**ğŸ’¡ íŠ¹ì§•**: ì¤‘ì•™ì„ (0) ê¸°ì¤€ì€ ë™ì¼í•˜ì§€ë§Œ ë²”ìœ„ê°€ ë‹¬ë¼ ì •ê·œí™” í•„ìš”

#### **5. ë³€ë™ì„± ê·¸ë£¹ (ì ˆëŒ€ê°’, ì›í™” ë‹¨ìœ„)**
| ì§€í‘œ | ì˜ˆì‹œ ê°’ | íŠ¹ì§• | ë¹„êµ ì¡°ê±´ |
|------|---------|------|----------|
| ATR | 800ì› | í‰ê·  ë³€ë™í­ | ê°™ì€ ì›í™” ë‹¨ìœ„ |
| ë³¼ë¦°ì €ë°´ë“œí­ | 1,200ì› | ë°´ë“œ ê°„ê²© | ê°™ì€ ì›í™” ë‹¨ìœ„ |
| í‘œì¤€í¸ì°¨ | 600ì› | ê°€ê²© ë¶„ì‚° | ê°™ì€ ì›í™” ë‹¨ìœ„ |

**ğŸ’¡ íŠ¹ì§•**: ì›í™” ë‹¨ìœ„ëŠ” ë™ì¼í•˜ì§€ë§Œ ê³„ì‚° ë°©ì‹ì´ ë‹¬ë¼ ì˜ë¯¸ í•´ì„ ì£¼ì˜

---

### **âŒ ë¹„êµ ë¶ˆê°€ëŠ¥**

#### **6. ê³ ìœ  ìŠ¤ì¼€ì¼ ê·¸ë£¹**
| ì§€í‘œ | ìŠ¤ì¼€ì¼ | ë¹„êµ ë¶ˆê°€ ì´ìœ  |
|------|--------|---------------|
| OBV | ëˆ„ì  ê±°ë˜ëŸ‰ | ëˆ„ì ê°’ì´ë¼ ì ˆëŒ€ì  í¬ê¸° ì˜ë¯¸ ì—†ìŒ |
| ìƒê´€ê³„ìˆ˜ | -1 ~ +1 | ìƒê´€ê´€ê³„ ìˆ˜ì¹˜ë¡œ í¬ê¸° ë¹„êµ ë¬´ì˜ë¯¸ |
| ì§€ê·¸ì¬ê·¸ | ê°€ê²© í¬ì¸íŠ¸ | ì¤‘ìš” ê³ ì /ì €ì ë§Œ í‘œì‹œ |
| ADX | 0 ~ 100 | ì¶”ì„¸ ê°•ë„(ë°©í–¥ ì—†ìŒ)ë¡œ ë‹¤ë¥¸ ì§€í‘œì™€ ë¹„êµ ë¬´ì˜ë¯¸ |

---

## ğŸ”§ **ê°œì„ ëœ ì°¨íŠ¸ ì¹´í…Œê³ ë¦¬ ì œì•ˆ**

### **ìƒˆë¡œìš´ ì°¨íŠ¸ ì¹´í…Œê³ ë¦¬ ì‹œìŠ¤í…œ**
```python
IMPROVED_CHART_CATEGORIES = {
    # ì™„ì „ ë¹„êµ ê°€ëŠ¥ ê·¸ë£¹
    "overlay_comparable": [
        "SMA", "EMA", "WMA", "BOLLINGER_BAND", 
        "CURRENT_PRICE", "OPEN_PRICE", "HIGH_PRICE", "LOW_PRICE", "VWAP"
    ],
    
    "percentage_comparable": [
        "RSI", "STOCH", "CCI", "WILLIAMS_R", "MFI"
    ],
    
    "volume_comparable": [
        "VOLUME", "VOLUME_MA"
    ],
    
    # ì¡°ê±´ë¶€ ë¹„êµ ê°€ëŠ¥ ê·¸ë£¹
    "signal_conditional": [
        "MACD", "AO", "ROC", "MOMENTUM"
    ],
    
    "volatility_conditional": [
        "ATR", "BOLLINGER_WIDTH", "STANDARD_DEVIATION"
    ],
    
    # ë¹„êµ ë¶ˆê°€ëŠ¥ ê·¸ë£¹
    "unique_scale": [
        "OBV", "ADX", "CORRELATION", "ZIGZAG"
    ]
}
```

### **ë¹„êµ í˜¸í™˜ì„± ê²€ì¦ ë¡œì§**
```python
def is_chart_comparable(base_var_id: str, external_var_id: str) -> tuple[bool, str]:
    """
    ì°¨íŠ¸ ìŠ¤ì¼€ì¼ ê¸°ì¤€ ë¹„êµ ê°€ëŠ¥ì„± ê²€ì¦
    Returns: (ë¹„êµ ê°€ëŠ¥ ì—¬ë¶€, ì„¤ëª… ë©”ì‹œì§€)
    """
    
    base_chart_group = get_chart_comparison_group(base_var_id)
    external_chart_group = get_chart_comparison_group(external_var_id)
    
    # 1. ì™„ì „ ë¹„êµ ê°€ëŠ¥ ê·¸ë£¹
    if base_chart_group == external_chart_group:
        if base_chart_group in ["overlay_comparable", "percentage_comparable", "volume_comparable"]:
            return True, f"âœ… ê°™ì€ {get_group_name(base_chart_group)} ìŠ¤ì¼€ì¼ë¡œ ì§ì ‘ ë¹„êµ ê°€ëŠ¥"
    
    # 2. ì¡°ê±´ë¶€ ë¹„êµ ê°€ëŠ¥ ê·¸ë£¹
    if base_chart_group == external_chart_group:
        if base_chart_group in ["signal_conditional", "volatility_conditional"]:
            return True, f"ğŸ”¶ ê°™ì€ {get_group_name(base_chart_group)} ê·¸ë£¹ì´ì§€ë§Œ ì •ê·œí™” í•„ìš”"
    
    # 3. ë¹„êµ ë¶ˆê°€ëŠ¥
    if base_chart_group == "unique_scale" or external_chart_group == "unique_scale":
        return False, "âŒ ê³ ìœ  ìŠ¤ì¼€ì¼ ì§€í‘œë¡œ ë¹„êµ ë¶ˆê°€ëŠ¥"
    
    # 4. ë‹¤ë¥¸ ê·¸ë£¹ ê°„ ë¹„êµ ë¶ˆê°€
    return False, f"âŒ ë‹¤ë¥¸ ì°¨íŠ¸ ê·¸ë£¹ ê°„ ë¹„êµ ë¶ˆê°€ ({get_group_name(base_chart_group)} â‰  {get_group_name(external_chart_group)})"

def get_group_name(group_key: str) -> str:
    group_names = {
        "overlay_comparable": "ì›í™” ë‹¨ìœ„",
        "percentage_comparable": "í¼ì„¼íŠ¸ ë²”ìœ„", 
        "volume_comparable": "ê±°ë˜ëŸ‰ ë‹¨ìœ„",
        "signal_conditional": "ì‹ í˜¸ì„  ê¸°ì¤€",
        "volatility_conditional": "ë³€ë™ì„± ë‹¨ìœ„",
        "unique_scale": "ê³ ìœ  ìŠ¤ì¼€ì¼"
    }
    return group_names.get(group_key, "ì•Œ ìˆ˜ ì—†ìŒ")
```

---

## ğŸ¨ **UI ê°œì„  ì•„ì´ë””ì–´**

### **ì½¤ë³´ë°•ìŠ¤ í‘œì‹œ ê°œì„ **
```python
def populate_comparison_aware_combo(self):
    """ë¹„êµ ê°€ëŠ¥ì„±ì„ ê³ ë ¤í•œ ì½¤ë³´ë°•ìŠ¤ êµ¬ì„±"""
    
    combos = {
        "ğŸ“ˆ ì›í™” ë¹„êµ ê°€ëŠ¥": [
            ("SMA", "ğŸ”— ë‹¨ìˆœì´ë™í‰ê· "),
            ("EMA", "ğŸ”— ì§€ìˆ˜ì´ë™í‰ê· "), 
            ("CURRENT_PRICE", "ğŸ”— í˜„ì¬ê°€")
        ],
        "ğŸ“Š í¼ì„¼íŠ¸ ë¹„êµ ê°€ëŠ¥": [
            ("RSI", "ğŸ“ˆ RSI ì§€í‘œ"),
            ("STOCH", "ğŸ“ˆ ìŠ¤í† ìºìŠ¤í‹±"),
            ("MFI", "ğŸ“ˆ ìê¸ˆíë¦„ì§€ìˆ˜")
        ],
        "âš¡ ì‹ í˜¸ì„  (ì¡°ê±´ë¶€ ë¹„êµ)": [
            ("MACD", "âš¡ MACD ì§€í‘œ"),
            ("AO", "âš¡ ì–´ì¸ ì˜¤ì‹¤ë ˆì´í„°")
        ],
        "ğŸš« ë¹„êµ ë¶ˆê°€": [
            ("OBV", "ğŸ’½ ì˜¨ë°¸ëŸ°ìŠ¤ë³¼ë¥¨"),
            ("ADX", "ğŸ“Š ADX ì§€í‘œ")
        ]
    }
```

### **í˜¸í™˜ì„± ìƒíƒœ í‘œì‹œ ê°œì„ **
```
[í˜„ì¬] âœ… í˜¸í™˜ ê°€ëŠ¥
[ê°œì„ ] âœ… ì›í™” ë‹¨ìœ„ë¡œ ì§ì ‘ ë¹„êµ ê°€ëŠ¥ (SMA: 50,000ì› vs EMA: 51,000ì›)

[í˜„ì¬] âŒ í˜¸í™˜ ë¶ˆê°€
[ê°œì„ ] âŒ ë‹¤ë¥¸ ìŠ¤ì¼€ì¼ë¡œ ë¹„êµ ë¶ˆê°€ (RSI: 0-100% vs VOLUME: ê±°ë˜ëŸ‰ ë‹¨ìœ„)
```

---

## ğŸ¯ **ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**

### **ì‹œë‚˜ë¦¬ì˜¤ 1: ì¶”ì„¸ ì§€í‘œ ë¹„êµ**
```
ì‚¬ìš©ì: "SMA 50ì¼ì„ ì´ í˜„ì¬ê°€ë³´ë‹¤ ë†’ì€ê°€?"
ì‹œìŠ¤í…œ: âœ… ë‘˜ ë‹¤ ì›í™” ë‹¨ìœ„ë¡œ ì§ì ‘ ë¹„êµ ê°€ëŠ¥
ê²°ê³¼: SMA(50,000ì›) vs í˜„ì¬ê°€(50,500ì›) â†’ í˜„ì¬ê°€ê°€ 500ì› ë†’ìŒ
```

### **ì‹œë‚˜ë¦¬ì˜¤ 2: ëª¨ë©˜í…€ ì§€í‘œ ë¹„êµ**
```
ì‚¬ìš©ì: "RSIê°€ ìŠ¤í† ìºìŠ¤í‹±ë³´ë‹¤ ë†’ì€ê°€?"
ì‹œìŠ¤í…œ: âœ… ë‘˜ ë‹¤ 0-100% ë²”ìœ„ë¡œ ì§ì ‘ ë¹„êµ ê°€ëŠ¥
ê²°ê³¼: RSI(65%) vs STOCH(75%) â†’ ìŠ¤í† ìºìŠ¤í‹±ì´ 10% ë†’ìŒ
```

### **ì‹œë‚˜ë¦¬ì˜¤ 3: ë¶ˆê°€ëŠ¥í•œ ë¹„êµ**
```
ì‚¬ìš©ì: "RSIê°€ ê±°ë˜ëŸ‰ë³´ë‹¤ ë†’ì€ê°€?"
ì‹œìŠ¤í…œ: âŒ ë‹¤ë¥¸ ìŠ¤ì¼€ì¼ë¡œ ë¹„êµ ë¶ˆê°€ (RSI: 0-100% vs ê±°ë˜ëŸ‰: 1,000,000ì£¼)
ê²°ê³¼: ë¹„êµ ì¡°ê±´ ìƒì„± ë¶ˆê°€ëŠ¥
```

---

## ğŸ’¡ **ì¶”ê°€ ì•„ì´ë””ì–´**

### **1. ìŠ¤ë§ˆíŠ¸ ì •ê·œí™” ê¸°ëŠ¥**
```python
def smart_normalize_for_comparison(var1_id: str, var1_value: float, 
                                  var2_id: str, var2_value: float) -> tuple[float, float]:
    """ìŠ¤ì¼€ì¼ì´ ë‹¤ë¥¸ ì§€í‘œë“¤ì„ ë¹„êµ ê°€ëŠ¥í•˜ë„ë¡ ì •ê·œí™”"""
    
    group1 = get_chart_comparison_group(var1_id)
    group2 = get_chart_comparison_group(var2_id)
    
    # ì‹ í˜¸ì„  ê·¸ë£¹ ê°„ ë¹„êµ ì‹œ 0 ê¸°ì¤€ ìƒëŒ€ì  ìœ„ì¹˜ë¡œ ì •ê·œí™”
    if group1 == "signal_conditional" and group2 == "signal_conditional":
        range1 = get_typical_range(var1_id)
        range2 = get_typical_range(var2_id)
        
        normalized1 = var1_value / range1  # -1 ~ +1 ì •ê·œí™”
        normalized2 = var2_value / range2  # -1 ~ +1 ì •ê·œí™”
        
        return normalized1, normalized2
    
    return var1_value, var2_value  # ì •ê·œí™” ë¶ˆê°€ëŠ¥
```

### **2. ë¹„êµ ê°€ëŠ¥ì„± ë¯¸ë¦¬ë³´ê¸°**
```python
def preview_comparison_compatibility(base_var_id: str, external_var_id: str) -> str:
    """ë¹„êµ ì„ íƒ ì „ì— í˜¸í™˜ì„± ë¯¸ë¦¬ë³´ê¸°"""
    
    is_compatible, message = is_chart_comparable(base_var_id, external_var_id)
    
    if is_compatible:
        example = get_comparison_example(base_var_id, external_var_id)
        return f"{message}\nì˜ˆì‹œ: {example}"
    else:
        suggestion = get_alternative_suggestion(base_var_id, external_var_id)
        return f"{message}\nğŸ’¡ ëŒ€ì•ˆ: {suggestion}"
```

---

## ğŸš€ **ê²°ë¡  ë° ì œì•ˆ**

### **í•µì‹¬ ì•„ì´ë””ì–´ ìš”ì•½**
1. **ì˜¤ë²„ë ˆì´**: ëª¨ë“  ì§€í‘œ ë¹„êµ ê°€ëŠ¥ (ì›í™” ë‹¨ìœ„)
2. **í¼ì„¼íŠ¸ ì„œë¸Œí”Œë¡¯**: 0-100% ì§€í‘œë“¤ë¼ë¦¬ ë¹„êµ ê°€ëŠ¥
3. **ì‹ í˜¸ì„  ì„œë¸Œí”Œë¡¯**: ì¡°ê±´ë¶€ ë¹„êµ ê°€ëŠ¥ (ì •ê·œí™” í•„ìš”)
4. **ê³ ìœ  ìŠ¤ì¼€ì¼**: ë¹„êµ ë¶ˆê°€ëŠ¥í•œ ì§€í‘œë“¤ ë³„ë„ ë¶„ë¥˜

### **êµ¬í˜„ ìš°ì„ ìˆœìœ„**
1. **1ì°¨**: ì˜¤ë²„ë ˆì´ + í¼ì„¼íŠ¸ ê·¸ë£¹ ì™„ì „ ì§€ì›
2. **2ì°¨**: ì‹ í˜¸ì„  ê·¸ë£¹ ì¡°ê±´ë¶€ ë¹„êµ ì§€ì›
3. **3ì°¨**: ìŠ¤ë§ˆíŠ¸ ì •ê·œí™” ê¸°ëŠ¥ ì¶”ê°€

ì´ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ìê°€ **ì˜ë¯¸ ìˆëŠ” ë¹„êµë§Œ** í•  ìˆ˜ ìˆë„ë¡ ì•ˆë‚´í•˜ë©´ì„œ, **í˜¼ë€ì„ ë°©ì§€**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸ¯
