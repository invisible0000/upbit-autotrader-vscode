# 🏗️ 설정 화면 탭 구조 재설계 기획

## 🎯 설계 목표
- 프로파일 전환 + 로깅을 1순위 탭으로 배치
- API키, 데이터베이스 탭 유지 (2, 3순위)
- 기능 중복 제거 및 명확한 분리
- 2단계 탭 구조 지양

## 📊 최종 탭 구조 (7개 탭)

```
┌─────────────────────────────────────────────────────────────────┐
│  ⚙️ 설정                                                        │
├─────────────────────────────────────────────────────────────────┤
│ [환경&로깅] [API 키] [데이터베이스] [매매설정] [UI설정] [시스템] [고급] │
└─────────────────────────────────────────────────────────────────┘
```

### 1️⃣ **환경 & 로깅** (최우선 탭) 🌍📊
**목적**: 전체 시스템 프로파일 관리 + 로깅 설정
**배치**: 좌우 6:4 분할

```
┌─────────────────────┬─────────────────────────┐
│ 🏗️ 환경 프로파일    │ 📊 로깅 설정            │
│                     │                         │
│ ○ Development      │ 로그 레벨: [INFO ▼]     │
│ ○ Testing          │ 콘솔 출력: [✓]          │
│ ● Production       │ 파일 저장: [✓]          │
│                     │ 컨텍스트: [development] │
│ [환경 전환]         │ 스코프: [normal ▼]      │
│                     │                         │
│ 📋 현재 환경 정보   │ 🔧 고급 로깅            │
│ - Config: prod.yaml │ 컴포넌트 포커스:        │
│ - DB: prod_db       │ [TradingEngine]         │
│ - API: prod_keys    │ 기능 개발: [✓]          │
│                     │ LLM 브리핑: [✓]         │
└─────────────────────┴─────────────────────────┘
```

**데이터 소스**:
- 환경 프로파일: config/*.yaml + DatabaseProfileManagementUseCase
- 로깅: UPBIT_LOG_* 환경변수 + config logging 섹션

### 2️⃣ **API 키** (현재 유지) 🔑
**목적**: Upbit API 인증 관리
**현재 상태**: ✅ 완성도 높음, 그대로 유지

### 3️⃣ **데이터베이스** (현재 유지) 💾
**목적**: 3-DB 아키텍처 관리
**현재 상태**: ✅ MVP 패턴 완성, 그대로 유지

### 4️⃣ **매매 설정** (신규) 💰
**목적**: trading YAML 섹션 + 매매 관련 환경변수

```
┌─────────────────────────────────────────────────────────────────┐
│ 💰 매매 설정                                                    │
├─────────────────────────────────────────────────────────────────┤
│ 📊 기본 매매 설정                                               │
│ 최대 포지션 크기: [3,000,000] KRW                               │
│ 최소 주문 금액:   [5,000] KRW                                   │
│ 분당 최대 주문:   [10] 건                                       │
│ 모의거래 모드:    [✓] 활성화                                     │
│                                                                 │
│ 🎯 허용 마켓                                                    │
│ [✓] KRW-BTC  [✓] KRW-ETH  [✓] KRW-XRP                          │
│ [ ] KRW-ADA  [ ] KRW-DOT  [ ] KRW-SOL                          │
│                                                                 │
│ ⚠️ 리스크 관리                                                  │
│ 기본 수수료:     [0.0005] (0.05%)                               │
│ 기본 슬리피지:   [0.001] (0.1%)                                 │
│ 기본 리스크율:   [0.02] (2%)                                    │
│ 스탑로스:       [✓] 활성화                                       │
│ 익절 설정:      [✓] 활성화                                       │
└─────────────────────────────────────────────────────────────────┘
```

**데이터 소스**: config trading 섹션

### 5️⃣ **UI 설정** (기존 개선) 🎨
**목적**: 순수 UI 관련 설정만 (환경변수와 분리)

```
┌─────────────────────────────────────────────────────────────────┐
│ 🎨 UI 설정                                                      │
├─────────────────────────────────────────────────────────────────┤
│ 🌈 테마 설정                                                    │
│ 테마: [라이트 ▼]                                                │
│                                                                 │
│ 🪟 창 설정                                                      │
│ 기본 창 크기: [1600] × [1000]                                   │
│ 창 상태 저장: [✓] 자동 저장                                      │
│                                                                 │
│ ✨ 애니메이션 & 효과                                             │
│ UI 애니메이션:    [✓] 활성화                                     │
│ 부드러운 스크롤:  [✓] 활성화                                     │
│                                                                 │
│ 📈 차트 설정                                                    │
│ 차트 스타일:     [캔들스틱 ▼]                                   │
│ 업데이트 간격:   [5] 초                                         │
│ 최대 캔들 수:    [200] 개                                       │
└─────────────────────────────────────────────────────────────────┘
```

**데이터 소스**: config ui 섹션 + user_settings.json

### 6️⃣ **시스템** (신규) ⚙️
**목적**: database/event_bus YAML 섹션 + 시스템 환경변수

```
┌─────────────────────────────────────────────────────────────────┐
│ ⚙️ 시스템 설정                                                  │
├─────────────────────────────────────────────────────────────────┤
│ 🗄️ 데이터베이스 연결                                            │
│ 연결 타임아웃:   [30] 초                                        │
│ 최대 연결 수:    [10] 개                                        │
│ WAL 모드:       [✓] 활성화                                       │
│ 자동 백업:      [✓] 활성화 (24시간마다)                          │
│                                                                 │
│ 🚌 Event Bus                                                   │
│ 워커 스레드:     [4] 개                                         │
│ 배치 크기:      [10] 건                                         │
│ 최대 큐 크기:    [10,000] 건                                    │
│ 재시도 횟수:     [3] 회                                         │
│                                                                 │
│ 🌐 Upbit API                                                   │
│ 초당 요청 수:    [10] 건                                        │
│ 분당 요청 수:    [600] 건                                       │
│ 타임아웃:       [30] 초                                         │
│ 재시도 횟수:     [3] 회                                         │
└─────────────────────────────────────────────────────────────────┘
```

**데이터 소스**: config database/event_bus/upbit_api 섹션

### 7️⃣ **고급** (향후 확장) 🔧
**목적**: 개발자 도구, 성능 모니터링, 실험적 기능

```
┌─────────────────────────────────────────────────────────────────┐
│ 🔧 고급 설정                                                    │
├─────────────────────────────────────────────────────────────────┤
│ 👨‍💻 개발자 모드                                                │
│ 디버그 모드:     [ ] 활성화                                     │
│ 실험적 기능:     [ ] 활성화                                     │
│ API 로깅:       [ ] 상세 로깅                                   │
│                                                                 │
│ 📊 성능 모니터링                                                │
│ 프로파일링:      [ ] 활성화                                     │
│ 메모리 모니터:   [ ] 활성화                                     │
│ CPU 모니터:     [ ] 활성화                                      │
│                                                                 │
│ 🔄 설정 관리                                                    │
│ [설정 내보내기] [설정 가져오기] [초기화]                        │
│                                                                 │
│ 📋 시스템 정보                                                  │
│ Python: 3.11.4, PyQt6: 6.5.0                                  │
│ 메모리: 156MB / 8GB                                            │
│ CPU: 12% (4 cores)                                             │
└─────────────────────────────────────────────────────────────────┘
```

**데이터 소스**: 개발자 설정 + 시스템 메트릭

## 🔄 기존 → 신규 마이그레이션 계획

### 변경 사항:
```
기존 5탭:                    신규 7탭:
1. UI 설정                   1. 환경&로깅 (신규 통합)
2. API 키           →        2. API 키 (유지)
3. 데이터베이스      →        3. 데이터베이스 (유지)
4. 환경 관리                 4. 매매설정 (신규)
5. 알림                      5. UI설정 (기존에서 축소)
                            6. 시스템 (신규)
                            7. 고급 (향후 확장)
```

### 기능 재배치:
- **환경 프로파일** (기존 환경관리) → **환경&로깅** 탭 좌측
- **로깅 설정** (기존 환경변수 내) → **환경&로깅** 탭 우측
- **매매 설정** (Config YAML) → **매매설정** 탭 (신규)
- **시스템 설정** (Config YAML) → **시스템** 탭 (신규)
- **알림** → **고급** 탭으로 통합 (향후)

## 📋 구현 우선순위

### Phase 1: 핵심 재구성
1. **환경&로깅** 탭 생성 (프로파일 + 로깅 통합)
2. **매매설정** 탭 생성 (trading YAML)
3. 기존 환경관리 탭 제거

### Phase 2: 시스템 확장
1. **시스템** 탭 생성 (database/event_bus/api YAML)
2. **UI설정** 탭 정리 (중복 제거)

### Phase 3: 고급 기능
1. **고급** 탭 생성 (개발자 도구)
2. 알림 기능 고급 탭 통합

## 🎨 UI 코드 구조 예시

```python
class SettingsScreen(QWidget):
    def setup_ui(self):
        # 7개 탭 구성
        self.tab_widget.addTab(self.environment_logging, "환경&로깅")    # 1순위
        self.tab_widget.addTab(self.api_key_manager, "API 키")          # 유지
        self.tab_widget.addTab(self.database_settings, "데이터베이스")   # 유지
        self.tab_widget.addTab(self.trading_settings, "매매설정")       # 신규
        self.tab_widget.addTab(self.ui_settings, "UI설정")             # 축소
        self.tab_widget.addTab(self.system_settings, "시스템")         # 신규
        self.tab_widget.addTab(self.advanced_settings, "고급")         # 향후
```

## ✅ 기획 완료 요약

**최종 구조**: 7개 탭으로 명확한 기능 분리
**핵심 변화**: 환경 프로파일 + 로깅을 1순위 탭으로 통합
**기존 보존**: API키, 데이터베이스 탭 유지
**중복 제거**: UI설정과 환경변수 시스템 설정 분리
**확장성**: 고급 탭으로 향후 기능 수용
