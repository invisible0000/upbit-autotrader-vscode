# 테스트 모범 사례 및 디버깅 지침

## 개별 테스트 실행 및 디버깅

1. **개별 테스트 파일 실행**
   - 각 테스트 파일은 독립적으로 실행하여 세부적인 기능을 점검합니다.
   - 명령어 예시: `python -m unittest upbit_auto_trading/tests/unit/test_05_2_basic_trading_strategies.py`
   - 또는 IDE의 테스트 러너를 사용하여 개별 테스트 메서드 단위로 실행합니다.

2. **테스트 출력 분석**
   - 테스트 실행 시 출력되는 로그와 오류 메시지를 주의 깊게 분석합니다.
   - 실패한 테스트의 경우, 실제 값과 기대 값의 차이를 확인합니다.
   - 스택 트레이스를 따라가며 오류 발생 지점을 정확히 파악합니다.

3. **단계별 디버깅**
   - 복잡한 테스트의 경우, 중간 단계에 `print` 문이나 로깅을 추가하여 상태를 확인합니다.
   - IDE의 디버거를 활용하여 중단점(breakpoint)을 설정하고 변수 값을 검사합니다.
   - 조건부 중단점을 사용하여 특정 조건에서만 실행을 중지합니다.

4. **테스트 격리**
   - 각 테스트는 독립적으로 실행될 수 있어야 합니다.
   - 테스트 간 의존성이 있는 경우, 명확히 문서화하고 필요한 설정을 `setUp` 메서드에서 처리합니다.
   - 외부 의존성(데이터베이스, API 등)은 모의 객체(mock)로 대체하여 테스트 환경을 격리합니다.

## 테스트 실패 시 대응 방법

1. **오류 메시지 분석**
   - 오류 메시지와 스택 트레이스를 주의 깊게 읽고 문제의 원인을 파악합니다.
   - 테스트 실패 유형(AssertionError, TypeError 등)에 따라 적절한 대응 방법을 선택합니다.

2. **회귀 테스트**
   - 버그를 수정한 후에는 해당 테스트뿐만 아니라 관련된 다른 테스트도 실행하여 회귀 문제가 없는지 확인합니다.
   - 버그 수정이 다른 기능에 영향을 미치지 않는지 검증합니다.

3. **테스트 케이스 개선**
   - 테스트 실패가 발견되면, 해당 케이스를 더 명확하게 테스트할 수 있도록 테스트 케이스를 개선합니다.
   - 엣지 케이스와 예외 상황에 대한 테스트를 추가합니다.

4. **문서화**
   - 발견된 버그와 해결 방법을 문서화하여 향후 유사한 문제 발생 시 참조할 수 있도록 합니다.
   - 테스트 케이스에 주석을 추가하여 테스트의 목적과 검증 대상을 명확히 합니다.

## 컨텍스트 관리 및 효율적인 디버깅

1. **컨텍스트 양 최소화**
   - 테스트 출력이 너무 길어지지 않도록 필요한 정보만 출력합니다.
   - 디버깅 시 관련 없는 정보는 필터링하여 중요한 정보에 집중합니다.

2. **로그 레벨 조정**
   - 디버깅 시에는 로그 레벨을 DEBUG로 설정하여 상세한 정보를 확인합니다.
   - 일반 테스트 실행 시에는 INFO 또는 WARNING 레벨로 설정하여 중요한 정보만 출력합니다.

3. **테스트 환경 설정**
   - 테스트 환경 변수를 사용하여 테스트 모드와 프로덕션 모드를 구분합니다.
   - 테스트 데이터베이스와 프로덕션 데이터베이스를 분리하여 관리합니다.

4. **점진적 테스트**
   - 복잡한 기능은 작은 단위로 나누어 테스트합니다.
   - 기본 기능이 정상 작동하는지 확인한 후 점진적으로 복잡한 케이스를 테스트합니다.

## 테스트 자동화 및 지속적 통합

1. **자동화된 테스트 실행**
   - 코드 변경 시 자동으로 테스트가 실행되도록 CI 환경을 구성합니다.
   - 테스트 실패 시 즉시 알림을 받을 수 있도록 설정합니다.

2. **테스트 커버리지 모니터링**
   - 정기적으로 테스트 커버리지를 확인하여 테스트가 충분한지 평가합니다.
   - 커버리지가 낮은 부분은 추가 테스트를 작성하여 보완합니다.

3. **성능 테스트**
   - 주요 기능에 대한 성능 테스트를 실행하여 성능 저하가 없는지 확인합니다.
   - 성능 병목 지점을 식별하고 최적화합니다.

4. **보안 테스트**
   - 보안 취약점을 테스트하여 시스템의 안전성을 검증합니다.
   - 입력 검증, 인증, 권한 부여 등의 보안 기능을 철저히 테스트합니다.