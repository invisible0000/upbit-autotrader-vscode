# 개발 워크플로우 지침

## 기능 개발 프로세스

1. **요구사항 분석**
   - `requirements.md` 문서를 검토하여 구현할 기능의 요구사항을 명확히 이해합니다.
   - 관련된 사용자 스토리와 수용 기준을 식별합니다.

2. **설계 검토**
   - `design.md` 문서를 참조하여 구현할 기능의 설계 방향을 확인합니다.
   - 컴포넌트 인터페이스, 데이터 모델, 오류 처리 방식 등을 검토합니다.

3. **태스크 확인**
   - `tasks.md` 문서에서 현재 구현할 태스크를 확인합니다.
   - 태스크의 세부 항목과 관련 요구사항을 검토합니다.

4. **테스트 작성**
   - 태스크 번호와 일치하는 테스트 파일을 생성합니다. (예: `test_05_2_basic_trading_strategies.py`)
   - 구현할 기능의 요구사항을 검증하는 테스트 케이스를 작성합니다.
   - 테스트가 실패하는 것을 확인합니다.

5. **기능 구현**
   - 테스트를 통과하도록 기능을 구현합니다.
   - 코드 품질과 성능을 고려하여 구현합니다.
   - 설계 문서에 명시된 인터페이스와 데이터 모델을 준수합니다.

6. **테스트 실행 및 디버깅**
   - 구현한 기능에 대한 테스트를 실행합니다.
   - 테스트 실패 시 디버깅하고 수정합니다.
   - 모든 테스트가 통과할 때까지 반복합니다.

7. **코드 리뷰 및 리팩토링**
   - 코드를 검토하고 필요한 경우 리팩토링합니다.
   - 코드 중복을 제거하고 가독성을 개선합니다.
   - 성능 최적화가 필요한 부분을 식별하고 개선합니다.

8. **태스크 완료 표시**
   - 모든 테스트가 통과하고 기능이 완성되면 `tasks.md` 문서에서 해당 태스크를 완료로 표시합니다.

9. **문서 업데이트**
   - 구현한 기능에 대한 정보를 관련 문서에 업데이트합니다:
     - `README.md`: 개발 현황 및 작업 로그 섹션 업데이트
     - `.kiro/specs/upbit-auto-trading/design.md`: 필요한 경우 설계 문서 업데이트
     - `upbit_auto_trading/docs/`: 관련 API 문서 또는 사용 가이드 업데이트
   - 문서 업데이트는 구현된 기능의 사용 방법, 주요 클래스 및 메서드, 매개변수 등을 포함해야 합니다.

10. **GitHub 커밋 및 푸시**
   - 구현된 코드와 업데이트된 문서를 함께 커밋합니다.
   - 커밋 메시지는 CONTRIBUTING.md에 정의된 컨벤션을 따릅니다.
   - 변경 사항을 원격 저장소에 푸시합니다.
   - 필요한 경우 Pull Request를 생성합니다.

## 개발 규칙

1. **테스트 주도 개발**
   - 모든 기능은 테스트 코드를 먼저 작성한 후 구현합니다.
   - 테스트 없이 기능을 구현하지 않습니다.

2. **단위 테스트 필수 실행**
   - 기능 개발이 완료되면 반드시 단위 테스트를 실행하여 검증합니다.
   - `run_tests_in_order.py` 스크립트를 사용하여 테스트를 순서대로 실행합니다.

3. **테스트 파일 명명 규칙 준수**
   - 모든 테스트 파일은 `tasks.md`의 태스크 번호와 일치하도록 명명합니다.
   - 형식: `test_[태스크번호]_[기능명].py`

4. **패키지 의존성 관리**
   - 새로운 패키지를 설치할 때마다 반드시 `requirements.txt` 파일을 업데이트해야 합니다.
   - 패키지 설치 명령어: `pip install <패키지명>`
   - `requirements.txt` 업데이트 명령어: `pip freeze > requirements.txt` 또는 수동으로 추가
   - 프로젝트별 `requirements.txt` 파일(예: `upbit_auto_trading/requirements.txt`)이 있는 경우, 해당 파일도 함께 업데이트해야 합니다.
   - 패키지 버전을 명시하여 의존성 충돌을 방지합니다 (예: `pandas==2.0.3`).
   - 패키지 설치 시 가상 환경을 사용하여 시스템 환경과 분리합니다.

5. **코드 품질 유지**
   - PEP 8 스타일 가이드를 준수합니다.
   - 모든 함수와 클래스에 적절한 docstring을 작성합니다.
   - 복잡한 로직에는 주석을 추가하여 의도를 명확히 합니다.

6. **버전 관리**
   - 각 기능 개발은 별도의 브랜치에서 진행합니다.
   - 커밋 메시지는 명확하고 일관된 형식으로 작성합니다.
   - 기능 개발이 완료되면 메인 브랜치에 병합합니다.

## 문제 해결 및 디버깅

1. **오류 로깅**
   - 모든 예외와 오류는 적절한 로그 레벨로 기록합니다.
   - 로그 메시지는 문제 원인과 해결 방법을 파악하는 데 도움이 되도록 작성합니다.

2. **디버깅 도구 활용**
   - Python 디버거(pdb, IDE 디버거 등)를 활용하여 문제를 해결합니다.
   - 복잡한 문제는 단계적으로 분석하고 해결합니다.

3. **테스트 케이스 추가**
   - 발견된 버그에 대해서는 재발 방지를 위해 테스트 케이스를 추가합니다.
   - 엣지 케이스와 예외 상황에 대한 테스트를 강화합니다.

## 코드 리뷰 체크리스트

1. **기능 요구사항 충족**
   - 구현된 기능이 요구사항을 충족하는지 확인합니다.
   - 모든 수용 기준이 만족되었는지 검증합니다.

2. **테스트 커버리지**
   - 핵심 비즈니스 로직에 대한 테스트 커버리지가 충분한지 확인합니다.
   - 예외 처리와 엣지 케이스에 대한 테스트가 있는지 확인합니다.

3. **코드 품질**
   - 코드가 가독성이 좋고 유지보수하기 쉬운지 확인합니다.
   - 불필요한 복잡성이나 중복이 없는지 확인합니다.
   - 명명 규칙과 코딩 스타일이 일관되게 적용되었는지 확인합니다.

4. **성능 및 확장성**
   - 코드가 효율적으로 구현되었는지 확인합니다.
   - 향후 확장 가능성을 고려했는지 확인합니다.
   - 메모리 사용량과 실행 시간이 요구사항을 충족하는지 확인합니다.