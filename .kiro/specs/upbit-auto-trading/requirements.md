# 요구사항 문서

## 소개

이 프로젝트는 한국 업비트 거래소의 KRW 마켓 코인들을 대상으로 하는 자동매매 시스템입니다. 초단타(1시간 이내)부터 스윙(1주일 단위)까지 다양한 거래 주기를 지원하며, 종목 스크리닝, 백테스팅, 실시간 거래 기능을 제공합니다. 사용자는 종목을 선택하고, 매매 전략을 설정하며, 백테스팅을 통해 전략의 효과를 검증한 후 실제 거래를 진행할 수 있습니다.

## 비기능적 요구사항

### 성능 요구사항
1. [MUST] 백테스팅은 1년치 분봉 데이터(약 525,600개 데이터 포인트)에 대해 5분 이내에 완료되어야 한다.
2. [MUST] 실시간 거래 시 시장 데이터 갱신은 1초 이내의 지연시간으로 처리되어야 한다.
3. [SHOULD] 사용자 인터페이스는 사용자 입력에 대해 0.5초 이내에 반응해야 한다.
4. [SHOULD] 시스템은 최소 10개의 동시 백테스팅 작업을 지원해야 한다.

### 보안 요구사항
1. [MUST] 사용자의 API 키는 AES-256 암호화 표준을 사용하여 안전하게 저장되어야 한다.
2. [MUST] 모든 외부 API 통신은 HTTPS/SSL을 통해 암호화되어야 한다.
3. [SHOULD] 시스템은 API 키 권한 분리를 지원하여, 조회 전용 작업과 거래 작업에 서로 다른 키를 사용할 수 있어야 한다.
4. [MUST] 로그 파일에는 민감한 정보(API 키, 개인 식별 정보 등)가 평문으로 저장되지 않아야 한다.

### 사용성 요구사항
1. [SHOULD] 초보 사용자도 도움말 없이 핵심 기능의 80%를 사용할 수 있어야 한다.
2. [MUST] 모든 오류 메시지는 명확하고 사용자가 이해할 수 있는 언어로 제공되어야 한다.
3. [COULD] 시스템은 다크 모드와 라이트 모드를 지원해야 한다.
4. [MUST] 사용자 인터페이스는 최소 1280x720 해상도에서 모든 기능에 접근 가능해야 한다.

### 신뢰성 요구사항
1. [SHOULD] 시스템은 99% 이상의 가동 시간을 유지해야 한다.
2. [MUST] 예기치 않은 종료 시에도 데이터 손실이 발생하지 않아야 한다.
3. [MUST] 시스템은 네트워크 연결 문제 발생 시 자동으로 재연결을 시도해야 한다.
4. [MUST] 모든 거래 작업은 원자적으로 처리되어야 하며, 부분적인 실행이 발생하지 않아야 한다.

### 데이터 관리 정책
1. [MUST] 분봉 데이터는 최대 90일까지 원본 형태로 저장한다.
2. [SHOULD] 90일이 지난 분봉 데이터는 일봉 데이터로 요약 후 원본을 삭제한다.
3. [COULD] 1년이 지난 일봉 데이터는 주봉 또는 월봉 데이터로 요약 후 원본을 삭제한다.
4. [MUST] 데이터베이스 크기가 설정된 임계값(기본값: 10GB)을 초과하면 자동 정리 프로세스가 실행된다.

## 기능적 요구사항

### 요구사항 1: 종목 스크리닝 [MUST]

**사용자 스토리:** 사용자로서, 나는 거래량 추세와 변동성을 기반으로 적합한 코인을 스크리닝하고 싶다. 그래서 잠재적으로 수익성 있는 거래 기회를 식별할 수 있다.

#### 수용 기준

1. WHEN 사용자가 스크리너를 실행하면 THEN 시스템은 업비트 KRW 마켓의 모든 코인에 대한 거래량 데이터를 수집해야 한다.
2. WHEN 스크리닝이 진행 중이면 THEN 시스템은 사용자가 직접 입력한 기준(예: '최근 24시간 거래대금 100억 이상', '최근 7일 변동성 5% 이상')에 따라 코인을 필터링해야 한다.
3. WHEN 스크리닝이 완료되면 THEN 시스템은 필터링된 코인 목록을 사용자에게 표시해야 한다.
4. WHEN 사용자가 코인 목록에서 특정 코인을 선택하면 THEN 시스템은 해당 코인의 상세 정보(가격 차트, 거래량, 시가총액 등)를 표시해야 한다.
5. WHEN 사용자가 코인을 선택하면 THEN 시스템은 선택된 코인을 관심 목록에 추가할 수 있어야 한다.

### 요구사항 2: 데이터 관리 [MUST]

**사용자 스토리:** 사용자로서, 나는 백테스팅과 실시간 거래에 필요한 시장 데이터가 효율적으로 저장되고 관리되기를 원한다. 그래서 API 호출을 최소화하고 빠른 분석이 가능하다.

#### 수용 기준

1. WHEN 시스템이 시장 데이터를 수집하면 THEN 해당 데이터는 로컬 데이터베이스에 저장되어야 한다.
2. WHEN 백테스팅이 실행되면 THEN 시스템은 가능한 한 로컬 데이터베이스의 데이터를 사용해야 한다.
3. IF 필요한 데이터가 로컬 데이터베이스에 없으면 THEN 시스템은 업비트 API를 통해 데이터를 요청하고 데이터베이스에 저장해야 한다.
4. WHEN 데이터베이스 크기가 설정된 임계값을 초과하면 THEN 시스템은 오래된 데이터를 자동으로 정리해야 한다.
5. WHEN 사용자가 데이터 관리 옵션에 접근하면 THEN 시스템은 데이터베이스 상태와 관리 옵션을 제공해야 한다.

### 요구사항 3: 매매 전략 관리 [MUST]

**사용자 스토리:** 사용자로서, 나는 다양한 매매 전략을 생성, 수정, 저장하고 싶다. 그래서 다양한 시장 상황에 맞는 전략을 테스트하고 적용할 수 있다.

#### 수용 기준

1. WHEN 사용자가 새 매매 전략을 생성하면 THEN 시스템은 전략 이름, 설명, 매개변수를 입력할 수 있는 인터페이스를 제공해야 한다.
2. WHEN 사용자가 기존 전략을 수정하면 THEN 시스템은 전략의 매개변수를 조정할 수 있는 인터페이스를 제공해야 한다.
3. WHEN 사용자가 전략을 저장하면 THEN 시스템은 해당 전략을 데이터베이스에 저장하고 나중에 불러올 수 있어야 한다.
4. WHEN 사용자가 전략 목록을 요청하면 THEN 시스템은 저장된 모든 전략을 표시해야 한다.
5. WHEN 사용자가 전략을 삭제하면 THEN 시스템은 해당 전략을 데이터베이스에서 제거해야 한다.

### 요구사항 4: 포트폴리오 구성 [SHOULD]

**사용자 스토리:** 사용자로서, 나는 여러 코인과 전략을 조합하여 포트폴리오를 구성하고 싶다. 그래서 위험을 분산하고 수익을 최적화할 수 있다.

#### 수용 기준

1. WHEN 사용자가 포트폴리오를 생성하면 THEN 시스템은 여러 코인을 선택할 수 있는 인터페이스를 제공해야 한다.
2. WHEN 사용자가 포트폴리오에 코인을 추가하면 THEN 시스템은 해당 코인에 적용할 전략과 가중치를 설정할 수 있어야 한다.
3. WHEN 사용자가 포트폴리오 구성을 완료하면 THEN 시스템은 포트폴리오에 포함된 각 자산(코인+전략)의 과거 백테스트 결과를 가중 평균하여 포트폴리오의 '기대 수익률'과 '변동성'을 계산해서 보여줘야 한다.
4. WHEN 사용자가 포트폴리오를 저장하면 THEN 시스템은 해당 포트폴리오를 데이터베이스에 저장하고 나중에 불러올 수 있어야 한다.
5. WHEN 사용자가 포트폴리오를 수정하면 THEN 시스템은 코인 구성, 전략, 가중치를 조정할 수 있는 인터페이스를 제공해야 한다.

### 요구사항 5: 백테스팅 [MUST]

**사용자 스토리:** 사용자로서, 나는 선택한 전략과 포트폴리오를 과거 데이터로 테스트하고 싶다. 그래서 실제 거래 전에 성능을 평가할 수 있다.

#### 수용 기준

1. WHEN 사용자가 백테스팅을 시작하면 THEN 시스템은 테스트 기간, 초기 자본, 수수료 설정을 입력할 수 있는 인터페이스를 제공해야 한다.
2. WHEN 백테스팅이 진행 중이면 THEN 시스템은 다른 백테스팅 작업과 독립적으로 실행되어야 한다.
3. WHEN 백테스팅이 완료되면 THEN 시스템은 수익률, 최대 손실폭, 승률 등의 성과 지표를 계산하고 표시해야 한다.
4. WHEN 백테스팅 결과가 표시되면 THEN 시스템은 가격 차트와 거래 시점을 시각적으로 표시해야 한다.
5. WHEN 사용자가 백테스팅 결과를 저장하면 THEN 시스템은 해당 결과를 데이터베이스에 저장하고 나중에 비교할 수 있어야 한다.

### 요구사항 6: 실시간 거래 [MUST]

**사용자 스토리:** 사용자로서, 나는 검증된 전략을 사용하여 실시간으로 자동 거래를 실행하고 싶다. 그래서 시장 기회를 놓치지 않고 효율적으로 거래할 수 있다.

#### 수용 기준

1. WHEN 사용자가 실시간 거래를 시작하면 THEN 시스템은 API 키, 거래 금액, 위험 관리 설정을 입력할 수 있는 인터페이스를 제공해야 한다.
2. WHEN 실시간 거래가 활성화되면 THEN 시스템은 사용자가 전략별로 설정한 주기(예: 1분, 5분, 1시간)에 따라 시장 데이터를 모니터링하고 매매 신호를 생성해야 한다.
3. WHEN 매매 신호가 발생하면 THEN 시스템은 업비트 API를 통해 주문을 실행해야 한다.
4. WHEN 주문이 체결되면 THEN 시스템은 거래 내역을 기록하고 사용자에게 알림을 보내야 한다.
5. WHEN 사용자가 거래 상태를 확인하면 THEN 시스템은 현재 포지션, 수익/손실, 주문 내역을 표시해야 한다.
6. WHEN 사용자가 실시간 거래를 중지하면 THEN 시스템은 안전하게 모든 거래 활동을 중단해야 한다.

### 요구사항 7: 모니터링 및 알림 [SHOULD]

**사용자 스토리:** 사용자로서, 나는 시장 상황과 거래 활동을 모니터링하고 중요한 이벤트에 대한 알림을 받고 싶다. 그래서 시장 변화에 신속하게 대응할 수 있다.

#### 수용 기준

1. WHEN 시스템이 실행 중이면 THEN 선택된 코인의 가격, 거래량, 호가 정보를 실시간으로 표시해야 한다.
2. WHEN 가격이 설정된 임계값을 초과하거나 미만이면 THEN 시스템은 사용자에게 알림을 보내야 한다.
3. WHEN 주문이 체결되면 THEN 시스템은 사용자에게 알림을 보내야 한다.
4. WHEN 시스템 오류가 발생하면 THEN 시스템은 사용자에게 알림을 보내고 오류 로그를 기록해야 한다.
5. WHEN 사용자가 알림 설정을 변경하면 THEN 시스템은 알림 유형, 빈도, 전달 방법을 조정할 수 있어야 한다.

### 요구사항 8: 사용자 인터페이스 [SHOULD]

**사용자 스토리:** 사용자로서, 나는 직관적이고 사용하기 쉬운 인터페이스를 통해 시스템의 모든 기능에 접근하고 싶다. 그래서 효율적으로 시스템을 운영하고 관리할 수 있다.

#### 수용 기준

1. WHEN 시스템이 실행 중이면 THEN 선택된 코인의 가격, 거래량, 호가 정보를 설정된 주기(예: 5초)에 따라 갱신하여 표시해야 한다.
2. WHEN 사용자가 차트를 보면 THEN 시스템은 다양한 시간대와 지표를 선택할 수 있는 옵션을 제공해야 한다.
3. WHEN 사용자가 설정을 변경하면 THEN 시스템은 변경사항을 즉시 적용하고 저장해야 한다.
4. WHEN 사용자가 도움말을 요청하면 THEN 시스템은 기능별 사용 지침과 FAQ를 제공해야 한다.
5. WHEN 사용자가 시스템을 종료하면 THEN 시스템은 마지막으로 열었던 화면, 창 크기 및 위치, 관심 종목 목록 등 주요 UI 상태를 저장하고 다음 시작 시 복원해야 한다.