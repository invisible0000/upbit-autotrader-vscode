# upbit-autotrader-vscode 개발 지침 (자동 검토용)

이 문서는 GitHub Copilot이 새로운 세션을 시작할 때마다 반드시 검토하는 통합 개발 지침입니다.


## [자동 검토 대상 문서 목록]
아래의 모든 문서는 Copilot이 세션 시작 시 자동으로 검토합니다. 각 문서의 위치와 역할을 참고하여, 최신 개발 현황과 규칙을 항상 반영합니다.

### 1. 핵심 개발 지침 및 워크플로우
- `.kiro/specs/upbit-auto-trading/requirements.md` : 기능 요구사항
- `.kiro/specs/upbit-auto-trading/design.md` : 시스템 설계, 구조, 데이터 흐름, UI/UX, 보안 등
- `.kiro/specs/upbit-auto-trading/tasks.md` : 태스크별 개발 계획 및 진행 현황
- `.kiro/steering/development_workflow.md` : 전체 개발 프로세스 및 워크플로우
- `.kiro/steering/unit_test_guidelines.md` : 단위 테스트 작성 및 관리 지침
- `.kiro/steering/testing_best_practices.md` : 테스트 및 디버깅 모범 사례
- `.kiro/steering/korean-language.md` : 한글 문서화 및 언어 규칙

### 2. 프로젝트 및 서비스 문서
- `README.md` (루트, 각 주요 폴더) : 프로젝트 개요, 설치 및 사용법, 주요 기능
- `CONTRIBUTING.md` : 외부 기여자 및 팀원 개발/기여 지침
- `GEMINI.md` : Gemini 관련 문서

### 3. 시스템/기능/보안/운영/참고 문서
- `reference/*.md` : 시스템 아키텍처, 데이터베이스, API, 배포/운영, 보안, UI/UX, 각종 기능별 상세 명세

### 4. 서비스별 상세 가이드 및 개선 내역
- `upbit_auto_trading/docs/*.md` : UI 가이드, 백테스팅, 실시간 거래, 시스템 모니터링, 알림, 코드 품질 개선, 개발 진행 상황, API 문서 등

### 5. 기타
- `sample_QA_Automation/README.md` : QA 자동화 샘플 및 테스트 가이드

각 문서의 최신 내용과 변경 내역을 반드시 확인하고, 개발/테스트/배포/운영 시 일관성 있게 적용합니다.

## 1. 요구사항 및 설계

## 2. 개발 워크플로우
- TDD(테스트 우선 개발) 원칙 적용: 기능 개발 전 테스트 케이스 작성
- 태스크 번호와 일치하는 테스트 파일명 사용 (예: `test_05_2_basic_trading_strategies.py`)
- 기능 개발 → 단위/통합 테스트 → 코드 리뷰 → 병합 및 배포 순으로 진행
- 모든 변경 사항은 PR(Pull Request)로 제안, 리뷰 후 병합

## 3. 테스트 및 디버깅
- 테스트 파일은 `test_`로 시작, 태스크와 기능명 snake_case로 작성
- 개별 테스트 실행 및 전체 테스트 순차 실행(`run_tests_in_order.py` 활용)
- 테스트 실패 시 즉시 디버깅 및 수정, 원인 분석 후 문서화
- 테스트 커버리지 목표: 비즈니스 로직 80% 이상, 데이터/유틸리티 70% 이상
- Mock 객체 활용, 외부 API/DB 등은 테스트 환경 분리

## 4. 코드 품질 및 문서화
- 중복 코드 제거, 성능 최적화, 명확한 변수/함수명 사용
- 주요 변경 시 `.kiro/specs` 및 `docs/` 폴더의 관련 문서 업데이트
- 모든 문서는 Git으로 버전 관리, 변경 내역 기록
- 한글/영문 혼용 시 일관성 유지, 사용자 안내 메시지는 명확하게 작성
---
**중요 지침: 본 프로젝트의 사용자는 비개발자 출신의 코딩 초보입니다. 모든 설명, 예시, 가이드, 코드 주석은 반드시 초보자가 이해할 수 있도록 쉽고 상세하게 작성해야 합니다. 어려운 용어는 풀어서 설명하고, 단계별로 따라할 수 있도록 안내합니다.**
---

## 5. 보안 및 신뢰성

## 6. 기타
 [필수 종속성 및 환경설정]
 주요 파이썬 패키지: pandas, requests, python-dotenv, cryptography, pyyaml, pyjwt
 jwt 관련 기능을 위해 반드시 pyjwt 패키지 설치 필요 (pip install pyjwt)
 requirements.txt 및 setup.py에 pyjwt 명시
 테스트/실행 환경에서 ImportError 발생 시, 해당 패키지 설치 여부 확인
 
 [패키지 관리 지침]
 개발 중간에 새로 설치되는 모든 모듈/패키지는 반드시 requirements.txt에 추가하여 전체 개발 환경이 일관성 있게 유지되도록 한다.
 (예: pip install로 설치한 후 requirements.txt에 직접 추가)

### 테스트 코드 스타일 지침
- 모든 단위 테스트는 독립 함수로 작성하며, 직접 실행 구조를 따른다.
- 각 하위 기능별로 테스트 ID(예: [테스트 1/2])와 결과([성공], [실패])를 명확하게 출력한다.
- 환경 변수 등 외부 설정 누락 시, 사용자가 즉시 알 수 있도록 안내 메시지를 출력한다.
- 예외 발생 시 원인, 해결 방법, 추가 안내를 로그로 남긴다.
- 테스트 성공/실패에 따라 종료 코드를 반환한다.
- 모든 테스트는 실제 동작 결과를 사용자가 확인할 수 있도록 로그/메시지 중심으로 작성한다.

---

이 문서는 Copilot이 세션 시작 시 자동으로 검토합니다. 추가/수정 요청 시 언제든 말씀해 주세요.

## [핵심 아키텍처 및 기능 요약]
업비트 자동매매 시스템은 데이터 계층(수집/저장/관리), 비즈니스 로직 계층(스크리닝/전략/백테스팅/거래/포트폴리오), 사용자 인터페이스 계층(GUI/차트/대시보드)으로 구성됩니다.
각 계층별 주요 컴포넌트와 인터페이스는 `.kiro/specs/upbit-auto-trading/design.md`에 상세 명세되어 있습니다.

### 데이터 계층
- 시장 데이터 수집(OHLCV, 호가, 시세), 정제/가공/지표 계산, 데이터 저장/정리/관리
- 데이터 모델: OHLCV, OrderBook, Trade, Strategy, Backtest, Portfolio 등

### 비즈니스 로직 계층
- 종목 스크리닝(거래량/변동성/추세), 전략 생성/수정/저장/관리, 백테스팅, 실시간 거래, 포트폴리오 관리
- 각 기능별 인터페이스 및 반환값 구조 명확화

### 사용자 인터페이스 계층
- 대시보드, 차트 뷰, 설정 화면, 알림 센터 등
- 직관적 UI, 다크/라이트 모드, 1280x720 이상 해상도 지원, 마지막 UI 상태 복원

### 사용자 인터페이스 계층
1. 컴포넌트 분리 및 명세 기반 설계
- 대시보드, 차트 뷰, 종목 스크리너, 전략 관리, 백테스팅, 실시간 거래, 포트폴리오, 모니터링/알림 등 각 화면을 독립 컴포넌트로 분리
- 각 UI 요소는 고유 ID, 기능 설명, 연동 클래스/메서드, 관련 코드 경로를 명세서에서 확인

2. 데이터 흐름 및 백엔드 연동
- 사용자 입력(코인 선택, 전략 설정 등)은 이벤트로 처리
- 데이터 요청/갱신은 백엔드 API(UpbitAPI, DataCollector, StrategyManager 등)와 직접 연동
- 실시간 데이터(가격, 거래내역 등)는 주기적 폴링 또는 웹소켓으로 갱신

3. UX 및 반응성
- 모든 UI는 0.5초 이내 반응, 실시간 데이터는 1초 이내 갱신(성능 요구사항 반영)
- 주요 액션(저장, 실행, 중지 등)은 즉각적 피드백(로딩 스피너, 토스트 메시지 등) 제공
- UI 상태(설정, 마지막 화면 등)는 저장/복원 기능 포함

4. 테스트 및 유지보수
- 각 컴포넌트별 단위/통합 테스트 작성
- UI/비즈니스/데이터 계층 분리로 유지보수 용이
- 명세서와 실제 코드(클래스/메서드/경로) 일치 여부 지속 검증

5. 개발 워크플로우
- 화면 명세서 기반 UI 설계 → 컴포넌트/이벤트/데이터 연동 구현 → 테스트/디버깅 → 문서화
- 주요 변경 시 명세서와 코드 동시 업데이트, PR 리뷰 필수

### 성능/보안/신뢰성/데이터 정책
- 백테스팅 1년치 데이터 5분 이내 처리, 실시간 거래 1초 이내 데이터 갱신, UI 0.5초 이내 반응
- API 키 AES-256 암호화, HTTPS/SSL 통신, 민감정보 로그 저장 금지, API 키 권한 분리
- 99% 이상 가동 시간, 예기치 않은 종료 시 데이터 손실 방지, 네트워크 장애 자동 복구, 거래 원자성 보장
- 분봉 데이터 90일 원본 저장, 이후 요약/삭제, DB 10GB 초과 시 자동 정리

### 오류 처리 및 테스트 전략
- API/데이터/거래/시스템 오류별 재시도·예외·알림·자동 복구
- 단위/통합/백테스팅/UI 테스트, mock 객체 활용, 경계/예외/성능/사용성/반응성 테스트

### 기술 스택
- Python 3.8+, SQLite/PostgreSQL, requests/aiohttp, 병렬/비동기 처리 지원

상세 내용 및 인터페이스/데이터 모델/테스트 전략은 `.kiro/specs/upbit-auto-trading/design.md`와 `requirements.md`, `tasks.md`를 참고하여 구현 및 테스트 시 반드시 반영합니다.
