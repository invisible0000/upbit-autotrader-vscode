# 업비트 자동 거래 시스템 (Upbit Auto Trading System)

업비트 API를 활용한 암호화폐 자동 거래 시스템입니다. 이 시스템은 시장 데이터 수집, 기술적 지표 계산, 거래 전략 실행, 포트폴리오 관리 등의 기능을 제공합니다.

## 프로젝트 구조

```
upbit_auto_trading/
├── business_logic/       # 비즈니스 로직 (거래 전략, 포트폴리오 관리 등)
├── config/               # 설정 파일
├── data_layer/           # 데이터 계층
│   ├── collectors/       # 데이터 수집기 (API 클라이언트, 데이터 수집)
│   ├── models/           # 데이터 모델
│   ├── processors/       # 데이터 처리기 (기술적 지표 계산, 데이터 정규화)
│   └── storage/          # 데이터 저장소 (데이터베이스 관리, 백업, 마이그레이션)
├── docs/                 # 문서
├── tests/                # 테스트
│   ├── integration/      # 통합 테스트
│   └── unit/             # 단위 테스트
└── ui/                   # 사용자 인터페이스
```

## 주요 기능

### 1. 데이터 계층 (구현 완료)

#### 1.1 업비트 API 클라이언트
- API 요청 제한 및 오류 처리 로직
- 시장 데이터(OHLCV) 조회
- 호가 데이터 조회
- 계정 정보 조회
- 주문 실행 및 관리

#### 1.2 데이터 수집기
- 시장 데이터(OHLCV) 수집 및 저장
- 호가 데이터 수집 및 저장
- 주기적인 데이터 수집 작업 관리
- 오래된 데이터 정리

#### 1.3 데이터 처리기
- 기술적 지표 계산 (SMA, EMA, 볼린저 밴드, RSI, MACD 등)
- 데이터 정규화 및 전처리
- 데이터 리샘플링
- 머신러닝 모델을 위한 데이터 준비

### 2. 비즈니스 로직 (개발 예정)

#### 2.1 거래 전략
- 기술적 지표 기반 전략
- 머신러닝 기반 전략
- 백테스팅 및 성능 평가

#### 2.2 포트폴리오 관리
- 자산 배분
- 리스크 관리
- 성과 분석

### 3. 사용자 인터페이스 (개발 예정)

#### 3.1 웹 인터페이스
- 대시보드
- 거래 모니터링
- 설정 관리

#### 3.2 알림 시스템
- 이메일 알림
- 텔레그램 알림

## 설치 및 실행

### 요구 사항
- Python 3.8 이상
- SQLite, MySQL 또는 PostgreSQL 데이터베이스
- 업비트 API 키

### 설치
```bash
# 저장소 클론
git clone https://github.com/invisible0000/upbit-autotrader.git
cd upbit-autotrader

# 가상 환경 생성 및 활성화
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows

# 의존성 설치
pip install -r requirements.txt
```

### 환경 설정
1. `.env` 파일을 생성하고 다음 내용을 추가합니다:
```
UPBIT_ACCESS_KEY=your_access_key
UPBIT_SECRET_KEY=your_secret_key
```

### 실행
```bash
python run.py
```

## 개발 현황

### 완료된 작업
- [x] 데이터 계층 구현
  - [x] 업비트 API 클라이언트 확장
  - [x] 데이터 수집기 구현
  - [x] 데이터 처리기 구현
- [x] 비즈니스 로직 구현
  - [x] 스크리너 구현
    - [x] 기본 스크리닝 기능 구현 (거래량, 변동성, 추세 기반)
    - [x] 스크리닝 결과 처리 및 저장 기능 구현

### 진행 중인 작업
- [ ] 비즈니스 로직 구현
  - [x] 매매 전략 관리 시스템 구현
    - [x] 전략 인터페이스 및 기본 클래스 구현
    - [x] 기본 매매 전략 구현
    - [x] 전략 저장 및 관리 기능 구현
  - [x] 포트폴리오 관리 시스템 구현
    - [x] 포트폴리오 모델 및 기본 기능 구현
    - [x] 포트폴리오 성과 계산 기능 구현
  - [ ] 백테스팅 엔진 구현
    - [x] 백테스트 실행기 구현
    - [x] 백테스트 결과 분석기 구현
    - [x] 포트폴리오 백테스트 기능 구현
    - [ ] 백테스트 결과 저장 및 비교 기능 구현

### 예정된 작업
- [ ] 사용자 인터페이스 개발
- [ ] 알림 시스템 구현
- [ ] 성능 최적화 및 안정화

## 작업 로그

### 2025-07-18
- 백테스팅 엔진 - 포트폴리오 백테스트 기능 구현 완료
  - 포트폴리오 백테스트 클래스 구현 (PortfolioBacktest)
  - 포트폴리오 백테스트 실행 기능 구현
    - 포트폴리오 내 각 코인에 대한 개별 백테스트 실행
    - 가중치를 고려한 결과 통합
  - 포트폴리오 성과 지표 계산 기능 구현
    - 가중 평균 수익률, 최대 손실폭, 승률 계산
    - 샤프 비율, 소티노 비율 등 위험 조정 수익률 계산
    - 코인별 기여도 분석
  - 자본 곡선 결합 기능 구현
    - 개별 코인의 자본 곡선을 가중치에 따라 결합
    - 포트폴리오 전체의 자본 곡선 생성
  - 백테스트 결과 시각화 기능 구현
    - 포트폴리오 자본 곡선 시각화
    - 코인별 기여도 시각화
    - 코인별 성과 비교 시각화
  - 단위 테스트 작성 및 검증

- 백테스팅 엔진 - 백테스트 결과 분석기 구현 완료
  - 성과 지표 계산 기능 구현
    - 기본 성과 지표 (수익률, 최대 손실폭, 승률 등)
    - 고급 성과 지표 (칼마 비율, 울서 지수, 시스템 품질 지수 등)
  - 거래 내역 분석 기능 구현
    - 수익/손실 거래 분석
    - 요일별, 시간별 수익 분석
    - 연속 승/패 분석
  - 결과 시각화 기능 구현
    - 자본 곡선 시각화
    - 손실폭(Drawdown) 시각화
    - 월별 수익률 시각화
    - 거래 분석 시각화
  - 단위 테스트 작성 및 검증

- 포트폴리오 관리 시스템 구현 완료
  - 포트폴리오 모델 및 기본 기능 구현
    - 포트폴리오 데이터 모델 구현 (Portfolio, PortfolioCoin)
    - 포트폴리오 관리자 클래스 구현 (PortfolioManager)
    - 포트폴리오 생성, 수정, 삭제 기능 구현
    - 코인 추가/제거 및 가중치 관리 기능 구현
    - 단위 테스트 작성 및 검증
  - 포트폴리오 성과 계산 기능 구현
    - 포트폴리오 가중치 계산 기능 구현
    - 포트폴리오 기대 수익률 계산 기능 구현
    - 포트폴리오 변동성 및 위험 지표 계산 기능 구현
    - 자산 간 상관관계 분석 기능 구현
    - 포트폴리오 가중치 최적화 기능 구현
    - 단위 테스트 작성 및 검증

### 2025-07-17
- 매매 전략 관리 시스템 - 전략 저장 및 관리 기능 구현 완료
  - 전략 관리자 클래스 구현 (StrategyManager)
  - 전략 저장, 불러오기, 목록 관리 기능 구현
  - 데이터베이스 연동 및 전략 정보 저장
  - 한국 시간대(KST) 적용
  - 단위 테스트 작성 및 검증

- 매매 전략 관리 시스템 - 기본 매매 전략 구현 완료
  - 이동 평균 교차 전략 구현 (MovingAverageCrossStrategy)
  - 볼린저 밴드 전략 구현 (BollingerBandsStrategy)
  - RSI 기반 전략 구현 (RSIStrategy)
  - 전략 팩토리 통합 및 단위 테스트 작성

- 매매 전략 관리 시스템 - 전략 인터페이스 및 기본 클래스 구현 완료
  - 전략 인터페이스 정의 (StrategyInterface)
  - 기본 전략 추상 클래스 구현 (BaseStrategy)
  - 전략 매개변수 관리 기능 구현 (ParameterDefinition, StrategyParameterManager)
  - 전략 팩토리 패턴 구현 (StrategyFactory)
  - 단위 테스트 작성

- 스크리너 기능 구현 완료
  - 거래량 기반 스크리닝 구현
  - 변동성 기반 스크리닝 구현
  - 추세 기반 스크리닝 구현
  - 스크리닝 결과 저장 및 관리 기능 구현
  - 단위 테스트 작성

### 2025-07-15
- 데이터 처리기 구현 완료
  - 기술적 지표 계산 기능 구현 (SMA, EMA, 볼린저 밴드, RSI, MACD 등)
  - 데이터 정규화 및 전처리 기능 구현
  - 데이터 리샘플링 기능 구현

### 2025-07-10
- 데이터 수집기 구현 완료
  - 시장 데이터(OHLCV) 수집 기능 구현
  - 호가 데이터 수집 기능 구현
  - 데이터 저장 및 관리 기능 구현

### 2025-07-05
- 업비트 API 클라이언트 구현 완료
  - API 요청 제한 및 오류 처리 로직 구현
  - 시장 데이터 조회 기능 구현
  - 호가 데이터 조회 기능 구현
  - 계정 정보 조회 기능 구현
  - 주문 실행 및 관리 기능 구현

### 2025-07-01
- 프로젝트 초기 설정
  - 프로젝트 구조 설계
  - 기본 설정 파일 생성
  - Git 저장소 초기화

## 문서

프로젝트에 관한 자세한 문서는 다음 링크에서 확인할 수 있습니다:

- [문서 목록](upbit_auto_trading/docs/README.md)
- [개발 가이드](upbit_auto_trading/docs/development_guide.md)
- [API 문서](upbit_auto_trading/docs/api_docs.md)
- [테스트 결과 요약](upbit_auto_trading/docs/test_results_summary.md)

## 라이선스
이 프로젝트는 MIT 라이선스 하에 배포됩니다.

## 기여
이슈 및 풀 리퀘스트는 언제나 환영합니다.